<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 7: Binary Trees, Part 2: AVL | Lecture Videos | Introduction to Algorithms | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-006-introduction-to-algorithms-spring-2020" name="WT.cg_n">
    <meta content="Lecture 7: Binary Trees, Part 2: AVL" name="WT.cg_s">
    <meta content="" name="Description">
    <meta content="Demaine, Erik" name="Author">
    <meta content="Ku, Jason" name="Author">
    <meta content="Solomon, Justin" name="Author">
    <meta content="6.006,data structure,sorting,hashing,binary trees,breadth-first search,depth-first search,weighted shortest path,Bellman-Ford,Dijkstra,dynamic programming,recursion,complexity,algorithms,computational programs,analysis,proofs,Algorithms and Data Structures,Theory of Computation" name="keywords">
    <meta content="6.006 Introduction to Algorithms | Lecture 7: Binary Trees, Part 2: AVL" name="Search_Display">
    <meta content="Algorithms and Data Structures" itemprop="about">
    <meta content="Theory of Computation" itemprop="about">
    <meta content="Computation" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-7-binary-trees-part-2-avl/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Introduction to Algorithms</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/lecture-videos/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 7: Binary Trees, Part 2: AVL
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 7: Binary Trees, Part 2: AVL
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/lecture-videos/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/quizzes/index.htm">
		                  Quizzes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/practice-problems/index.htm">
		                  Practice Problems  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/assignments/index.htm">
		                  Assignments  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/resource-index/index.htm">
		                  Resource Index  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-7-binary-trees-part-2-avl/U1JYwHcFfso.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://archive.org/download/MIT6.006S20/MIT6_006S20_02_27_Lecture_7_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/U1JYwHcFfso', 'youtube', '/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-7-binary-trees-part-2-avl', 'https://img.youtube.com/vi/U1JYwHcFfso/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-7-binary-trees-part-2-avl/U1JYwHcFfso.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 6476813, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/lecture-videos/lecture-6-binary-trees-part-1/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/lecture-videos/problem-session-4/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p>This is the second lecture on binary trees. This covers subtree augmentation and sequence binary trees with subtree sizes. Rotations, rebalancing, and height augmentation are used to achieve height balance (AVL).</p>
<p><strong>Instructor:</strong> Erik Demaine</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-1-algorithms-and-computation/index.htm">
<img src="https://img.youtube.com/vi/ZA-tUyM_y7s/default.jpg" title="Lecture 1: Algorithms and Computation" alt="Lecture 1: Algorithms and Computation">
<p>Lecture 1: Algorithms and C...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-2-data-structures-and-dynamic-arrays/index.htm">
<img src="https://img.youtube.com/vi/CHhwJjR0mZA/default.jpg" title="Lecture 2: Data Structures and Dynamic Arrays" alt="Lecture 2: Data Structures and Dynamic Arrays">
<p>Lecture 2: Data Structures ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-1/index.htm">
<img src="https://img.youtube.com/vi/IPSaG9RRc-k/default.jpg" title="Problem Session 1" alt="Problem Session 1">
<p>Problem Session 1</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-3-sets-and-sorting/index.htm">
<img src="https://img.youtube.com/vi/oS9aPzUNG-s/default.jpg" title="Lecture 3: Sets and Sorting" alt="Lecture 3: Sets and Sorting">
<p>Lecture 3: Sets and Sorting</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-4-hashing/index.htm">
<img src="https://img.youtube.com/vi/Nu8YGneFCWE/default.jpg" title="Lecture 4: Hashing" alt="Lecture 4: Hashing">
<p>Lecture 4: Hashing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-2/index.htm">
<img src="https://img.youtube.com/vi/KlQiwkhLBg0/default.jpg" title="Problem Session 2" alt="Problem Session 2">
<p>Problem Session 2</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-5-linear-sorting/index.htm">
<img src="https://img.youtube.com/vi/yndgIDO0zQQ/default.jpg" title="Lecture 5: Linear Sorting" alt="Lecture 5: Linear Sorting">
<p>Lecture 5: Linear Sorting</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-3/index.htm">
<img src="https://img.youtube.com/vi/g0bXSXuLVb0/default.jpg" title="Problem Session 3" alt="Problem Session 3">
<p>Problem Session 3</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-6-binary-trees-part-1/index.htm">
<img src="https://img.youtube.com/vi/76dhtgZt38A/default.jpg" title="Lecture 6: Binary Trees, Part 1" alt="Lecture 6: Binary Trees, Part 1">
<p>Lecture 6: Binary Trees, Pa...</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/U1JYwHcFfso/default.jpg" title="Lecture 7: Binary Trees, Part 2: AVL" alt="Lecture 7: Binary Trees, Part 2: AVL">
<p>Lecture 7: Binary Trees, Pa...</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-4/index.htm">
<img src="https://img.youtube.com/vi/MAyraVVYB64/default.jpg" title="Problem Session 4" alt="Problem Session 4">
<p>Problem Session 4</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-8-binary-heaps/index.htm">
<img src="https://img.youtube.com/vi/Xnpo1atN-Iw/default.jpg" title="Lecture 8: Binary Heaps" alt="Lecture 8: Binary Heaps">
<p>Lecture 8: Binary Heaps</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-9-breadth-first-search/index.htm">
<img src="https://img.youtube.com/vi/oFVYVzlvk9c/default.jpg" title="Lecture 9: Breadth-First Search" alt="Lecture 9: Breadth-First Search">
<p>Lecture 9: Breadth-First Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-1-review/index.htm">
<img src="https://img.youtube.com/vi/e98MPnMHLxE/default.jpg" title="Quiz 1 Review" alt="Quiz 1 Review">
<p>Quiz 1 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-10-depth-first-search/index.htm">
<img src="https://img.youtube.com/vi/IBfWDYSffUU/default.jpg" title="Lecture 10: Depth-First Search" alt="Lecture 10: Depth-First Search">
<p>Lecture 10: Depth-First Search</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-11-weighted-shortest-paths/index.htm">
<img src="https://img.youtube.com/vi/5cF5Bgv59Sc/default.jpg" title="Lecture 11: Weighted Shortest Paths" alt="Lecture 11: Weighted Shortest Paths">
<p>Lecture 11: Weighted Shorte...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-5/index.htm">
<img src="https://img.youtube.com/vi/ZLdooNwP7Pw/default.jpg" title="Problem Session 5" alt="Problem Session 5">
<p>Problem Session 5</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-12-bellman-ford/index.htm">
<img src="https://img.youtube.com/vi/f9cVS_URPc0/default.jpg" title="Lecture 12: Bellman-Ford" alt="Lecture 12: Bellman-Ford">
<p>Lecture 12: Bellman-Ford</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-6/index.htm">
<img src="https://img.youtube.com/vi/kshe8d8rxHo/default.jpg" title="Problem Session 6" alt="Problem Session 6">
<p>Problem Session 6</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-13-dijkstra/index.htm">
<img src="https://img.youtube.com/vi/NSHizBK9JD8/default.jpg" title="Lecture 13: Dijkstra" alt="Lecture 13: Dijkstra">
<p>Lecture 13: Dijkstra</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-7/index.htm">
<img src="https://img.youtube.com/vi/WO6vQJ6Rhm8/default.jpg" title="Problem Session 7" alt="Problem Session 7">
<p>Problem Session 7</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-14-apsp-and-johnson/index.htm">
<img src="https://img.youtube.com/vi/EmSmaW-ud6A/default.jpg" title="Lecture 14: APSP and Johnson" alt="Lecture 14: APSP and Johnson">
<p>Lecture 14: APSP and Johnson</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-2-review/index.htm">
<img src="https://img.youtube.com/vi/vCIa2h1C9UQ/default.jpg" title="Quiz 2 Review" alt="Quiz 2 Review">
<p>Quiz 2 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-15-dynamic-programming-part-1-srtbot-fib-dags-bowling/index.htm">
<img src="https://img.youtube.com/vi/r4-cftqTcdI/default.jpg" title="Lecture 15: Dynamic Programming, Part 1: SRTBOT, Fib, DAGs, Bowling" alt="Lecture 15: Dynamic Programming, Part 1: SRTBOT, Fib, DAGs, Bowling">
<p>Lecture 15: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-16-dynamic-programming-part-2-lcs-lis-coins/index.htm">
<img src="https://img.youtube.com/vi/KLBCUx1is2c/default.jpg" title="Lecture 16: Dynamic Programming, Part 2: LCS, LIS, Coins" alt="Lecture 16: Dynamic Programming, Part 2: LCS, LIS, Coins">
<p>Lecture 16: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-8/index.htm">
<img src="https://img.youtube.com/vi/l_A-ig1n8CM/default.jpg" title="Problem Session 8" alt="Problem Session 8">
<p>Problem Session 8</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-17-dynamic-programming-part-3-apsp-parens-piano/index.htm">
<img src="https://img.youtube.com/vi/TDo3r5M1LNo/default.jpg" title="Lecture 17: Dynamic Programming, Part 3: APSP, Parens, Piano" alt="Lecture 17: Dynamic Programming, Part 3: APSP, Parens, Piano">
<p>Lecture 17: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-18-dynamic-programming-part-4-rods-subset-sum-pseudopolynomial/index.htm">
<img src="https://img.youtube.com/vi/i9OAOk0CUQE/default.jpg" title="Lecture 18: Dynamic Programming, Part 4: Rods, Subset Sum, Pseudopolynomial" alt="Lecture 18: Dynamic Programming, Part 4: Rods, Subset Sum, Pseudopolynomial">
<p>Lecture 18: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-19-complexity/index.htm">
<img src="https://img.youtube.com/vi/JbafQJx1CIA/default.jpg" title="Lecture 19: Complexity" alt="Lecture 19: Complexity">
<p>Lecture 19: Complexity</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-3-review/index.htm">
<img src="https://img.youtube.com/vi/wEKFGdo4Sck/default.jpg" title="Quiz 3 Review" alt="Quiz 3 Review">
<p>Quiz 3 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-20-course-review/index.htm">
<img src="https://img.youtube.com/vi/2NMtS1ecb3o/default.jpg" title="Lecture 20: Course Review" alt="Lecture 20: Course Review">
<p>Lecture 20: Course Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-21-algorithms2014next-steps/index.htm">
<img src="https://img.youtube.com/vi/4nXw-f6NJ9s/default.jpg" title="Lecture 21: Algorithms—Next Steps" alt="Lecture 21: Algorithms—Next Steps">
<p>Lecture 21: Algorithms—Ne...</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/lecture-videos/lecture-7-binary-trees-part-2-avl/U1JYwHcFfso.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="497">[SQUEAKING]</span> <span m="994">[RUSTLING]</span> <span m="1491">[CLICKING]</span></p>
<p> </p>
<p><span m="12740">ERIK DEMAINE:</span> <span m="12790">All</span> <span m="12840">right,</span> <span m="13100">welcome</span> <span m="13520">back</span> <span m="13880">to</span> <span m="14360">data</span> <span m="14690">structures</span> <span m="15140">land.</span> <span m="15920">Today</span> <span m="16550">we</span> <span m="17570">continue</span> <span m="18200">and</span> <span m="18380">complete</span> <span m="19100">our</span> <span m="19460">segment</span> <span m="19880">on</span> <span m="20090">binary</span> <span m="20540">trees.</span> <span m="21140">So</span> <span m="21410">this</span> <span m="21590">is</span> <span m="21710">part</span> <span m="21950">two.</span> <span m="23030">If</span> <span m="23150">you</span> <span m="23270">missed</span> <span m="23510">part</span> <span m="23720">one,</span> <span m="23960">go</span> <span m="24110">back</span> <span m="24350">and</span> <span m="24440">watch</span> <span m="24650">part</span> <span m="24890">one.</span></p>
<p><span m="26180">Last</span> <span m="26540">time,</span> <span m="26870">we</span> <span m="26990">talked</span> <span m="27260">about</span> <span m="27440">binary</span> <span m="27830">trees</span> <span m="28820">in</span> <span m="29120">general.</span> <span m="30650">We</span> <span m="30950">had</span> <span m="32330">each</span> <span m="32689">node</span> <span m="33200">stored</span> <span m="33590">an</span> <span m="33710">item,</span> <span m="35330">and</span> <span m="35750">also</span> <span m="36200">a</span> <span m="36320">left</span> <span m="36560">pointer</span> <span m="36980">and</span> <span m="37160">a</span> <span m="37220">right</span> <span m="37460">pointer</span> <span m="37820">to</span> <span m="38030">other</span> <span m="38240">nodes,</span> <span m="38570">and</span> <span m="38780">a</span> <span m="38840">parent</span> <span m="39140">pointer</span> <span m="39860">to</span> <span m="40040">another</span> <span m="40340">node.</span> <span m="41420">This</span> <span m="41660">was</span> <span m="41810">an</span> <span m="41930">example</span> <span m="42560">of</span> <span m="42800">a</span> <span m="42860">tree.</span> <span m="43910">B,</span> <span m="44120">and</span> <span m="44240">C</span> <span m="44440">are</span> <span m="44720">A's</span> <span m="45140">children.</span> <span m="45965">A</span> <span m="46280">is</span> <span m="46700">the</span> <span m="46790">parent</span> <span m="47450">of</span> <span m="47720">B</span> <span m="47870">and</span> <span m="47960">C,</span> <span m="48230">and</span> <span m="48380">also</span> <span m="48650">the</span> <span m="48740">root</span> <span m="49010">of</span> <span m="49160">the</span> <span m="49250">entire</span> <span m="49670">tree.</span></p>
<p><span m="50330">We</span> <span m="50510">defined</span> <span m="50900">the</span> <span m="51080">height</span> <span m="51410">of</span> <span m="51500">a</span> <span m="51560">node.</span> <span m="51890">We</span> <span m="51980">didn't</span> <span m="52160">use</span> <span m="52340">this</span> <span m="52550">too</span> <span m="52700">much</span> <span m="52940">yet.</span> <span m="53180">But</span> <span m="53330">we're</span> <span m="53450">going</span> <span m="53570">to</span> <span m="53660">use</span> <span m="53810">it</span> <span m="53900">a</span> <span m="53930">lot</span> <span m="54140">today.</span> <span m="54600">So</span> <span m="54740">remember,</span> <span m="55220">the</span> <span m="55340">height</span> <span m="55670">is</span> <span m="55910">as</span> <span m="56210">drawn</span> <span m="56540">in</span> <span m="56690">red</span> <span m="56930">here.</span> <span m="58460">Height</span> <span m="58700">of</span> <span m="58790">the</span> <span m="58850">node</span> <span m="59330">is</span> <span m="59900">the</span> <span m="60260">length</span> <span m="60620">of</span> <span m="60710">the</span> <span m="60830">longest</span> <span m="61460">downward</span> <span m="61940">path</span> <span m="62390">counting</span> <span m="62810">edges.</span> <span m="63230">So</span> <span m="63500">B,</span> <span m="63740">for</span> <span m="63890">example,</span> <span m="64410">has</span> <span m="64550">a</span> <span m="64640">length</span> <span m="64940">2</span> <span m="65150">paths.</span> <span m="65510">So</span> <span m="65660">we</span> <span m="65780">write</span> <span m="65990">a</span> <span m="66110">2</span> <span m="66380">here.</span> <span m="67070">You</span> <span m="67220">can</span> <span m="67400">also</span> <span m="67640">think</span> <span m="67850">of</span> <span m="67970">it</span> <span m="68090">as</span> <span m="68240">if</span> <span m="68360">you</span> <span m="68840">just</span> <span m="69560">live</span> <span m="69920">within</span> <span m="70580">the</span> <span m="70940">subtree</span> <span m="71600">rooted</span> <span m="71960">at</span> <span m="72080">B,</span> <span m="72500">B</span> <span m="72950">subtree,</span> <span m="74600">then</span> <span m="75860">what</span> <span m="76040">is</span> <span m="76160">the</span> <span m="76280">maximum</span> <span m="76700">depth</span> <span m="77060">of</span> <span m="77150">those</span> <span m="77360">nodes,</span> <span m="77870">if</span> <span m="78020">you</span> <span m="78110">prefer</span> <span m="78380">to</span> <span m="78470">think</span> <span m="78620">about</span> <span m="78830">it</span> <span m="78920">that</span> <span m="79040">way.</span> <span m="79320">Either</span> <span m="79490">way</span> <span m="79640">is</span> <span m="79760">fine.</span> <span m="80750">And</span> <span m="80900">in</span> <span m="80990">particular,</span> <span m="81660">we</span> <span m="81710">distinguished</span> <span m="82730">h,</span> <span m="83580">the</span> <span m="83720">height</span> <span m="83960">of</span> <span m="84110">the</span> <span m="84200">root</span> <span m="84410">node,</span> <span m="84740">as</span> <span m="85010">the</span> <span m="85160">height</span> <span m="85460">of</span> <span m="85670">the</span> <span m="85820">entire</span> <span m="86300">tree.</span></p>
<p><span m="87360">And</span> <span m="87530">what</span> <span m="87680">we</span> <span m="87800">achieved</span> <span m="88190">last</span> <span m="88460">time</span> <span m="88730">was</span> <span m="88880">basically</span> <span m="89450">all</span> <span m="89810">of</span> <span m="89930">our</span> <span m="90050">operations</span> <span m="90650">ran</span> <span m="90980">in</span> <span m="91160">order</span> <span m="91460">h</span> <span m="91790">time.</span> <span m="92850">So</span> <span m="93980">we</span> <span m="94220">had</span> <span m="94580">subtree</span> <span m="95120">insert,</span> <span m="95690">subtree</span> <span m="96170">delete,</span> <span m="96950">subtree</span> <span m="97430">first</span> <span m="97730">and</span> <span m="97850">last.</span> <span m="98270">We</span> <span m="98360">could</span> <span m="98480">compute</span> <span m="98780">the</span> <span m="98900">predecessor</span> <span m="99500">and</span> <span m="99590">successor</span> <span m="100130">of</span> <span m="100250">a</span> <span m="100280">node,</span> <span m="101030">all</span> <span m="101420">in</span> <span m="101630">order</span> <span m="101930">h</span> <span m="102290">time.</span> <span m="102780">So</span> <span m="102830">as</span> <span m="102950">long</span> <span m="103160">as</span> <span m="103310">h</span> <span m="103550">was</span> <span m="103730">small,</span> <span m="105350">we</span> <span m="105650">were</span> <span m="105830">happy.</span></p>
<p><span m="108170">And</span> <span m="108410">remember,</span> <span m="108740">what</span> <span m="108890">does</span> <span m="109070">predecessor</span> <span m="109610">and</span> <span m="109700">successor</span> <span m="110180">mean?</span> <span m="110510">It's</span> <span m="110930">talking</span> <span m="111320">about</span> <span m="111710">an</span> <span m="111890">implicit</span> <span m="112520">order</span> <span m="112910">in</span> <span m="113150">the</span> <span m="113240">tree,</span> <span m="114020">which</span> <span m="114320">is</span> <span m="114560">what</span> <span m="114770">we</span> <span m="114860">call</span> <span m="115040">traversal</span> <span m="115580">order,</span> <span m="116270">which</span> <span m="116510">is</span> <span m="116630">defined</span> <span m="116960">recursively</span> <span m="117590">as</span> <span m="118460">recursively</span> <span m="119450">traverse</span> <span m="119870">the</span> <span m="119960">left</span> <span m="120140">subtree,</span> <span m="120860">then</span> <span m="121400">output</span> <span m="121790">the</span> <span m="121880">root,</span> <span m="122330">then</span> <span m="122600">recursively</span> <span m="123200">traverse</span> <span m="123710">the</span> <span m="123830">right</span> <span m="124070">subtree.</span> <span m="125040">So</span> <span m="125420">in</span> <span m="125690">this</span> <span m="125960">example,</span> <span m="126900">the</span> <span m="126950">traversal</span> <span m="127520">order</span> <span m="127880">is</span> <span m="128660">F</span> <span m="129110">is</span> <span m="129440">the--</span> <span m="130520">if</span> <span m="130759">you</span> <span m="130850">go</span> <span m="131000">all</span> <span m="131210">the</span> <span m="131300">way</span> <span m="131420">left,</span> <span m="131690">that</span> <span m="131870">was</span> <span m="132110">the</span> <span m="132590">first</span> <span m="133130">in</span> <span m="133370">the</span> <span m="133460">traversal</span> <span m="133880">order.</span> <span m="134930">Then</span> <span m="135230">we</span> <span m="135410">have--</span> <span m="136440">right,</span> <span m="136930">I'll make me</span> <span m="137420">some</span> <span m="137660">space</span> <span m="138050">here.</span> <span m="139430">Then</span> <span m="139670">we</span> <span m="139790">have</span> <span m="140060">D,</span> <span m="141110">then</span> <span m="141380">we</span> <span m="141530">have</span> <span m="141860">B.</span> <span m="143810">Then</span> <span m="144140">we</span> <span m="144260">do</span> <span m="144410">the</span> <span m="144500">right</span> <span m="144710">subtree</span> <span m="145100">of</span> <span m="145190">B,</span> <span m="145820">which</span> <span m="146000">is</span> <span m="146150">E.</span> <span m="147530">Then</span> <span m="147890">we</span> <span m="148040">have</span> <span m="149390">the</span> <span m="149540">root,</span> <span m="149960">because</span> <span m="150170">we</span> <span m="150260">finished</span> <span m="150590">the</span> <span m="150680">left</span> <span m="150890">subtree</span> <span m="151280">of</span> <span m="151370">the</span> <span m="151460">root.</span> <span m="152310">So</span> <span m="152420">that's</span> <span m="152810">A.</span> <span m="153980">And</span> <span m="154310">then</span> <span m="154490">we</span> <span m="154670">have</span> <span m="155240">C.</span></p>
<p><span m="157220">So</span> <span m="157400">there's</span> <span m="157610">an</span> <span m="157700">implicit</span> <span m="158270">linear</span> <span m="158600">order</span> <span m="159260">encoded</span> <span m="159980">by</span> <span m="160160">this</span> <span m="160400">tree.</span> <span m="160910">And</span> <span m="161210">the</span> <span m="161270">whole</span> <span m="161480">point</span> <span m="161870">of</span> <span m="162110">binary</span> <span m="162440">trees</span> <span m="162770">is</span> <span m="162860">that</span> <span m="162980">we</span> <span m="163070">can</span> <span m="163370">efficiently</span> <span m="164000">update</span> <span m="164330">the</span> <span m="164420">tree</span> <span m="165590">much</span> <span m="165860">faster</span> <span m="166220">than</span> <span m="166370">we</span> <span m="166460">could</span> <span m="166580">explicitly</span> <span m="167660">write</span> <span m="167930">down</span> <span m="168140">an</span> <span m="168260">order</span> <span m="168560">in</span> <span m="168680">an</span> <span m="168800">array</span> <span m="169160">or</span> <span m="169220">something</span> <span m="169550">like</span> <span m="169700">that.</span> <span m="170130">So</span> <span m="171020">binary</span> <span m="171380">trees</span> <span m="171680">let</span> <span m="171860">us</span> <span m="172250">quickly--</span> <span m="173480">now,</span> <span m="173720">quickly</span> <span m="174320">is</span> <span m="174440">not</span> <span m="174620">so</span> <span m="174770">quick</span> <span m="175070">right</span> <span m="175310">now.</span> <span m="175520">Because</span> <span m="175820">everything</span> <span m="176180">is</span> <span m="176270">order</span> <span m="176510">h.</span> <span m="176990">And</span> <span m="177200">in</span> <span m="177320">the</span> <span m="177380">worst</span> <span m="177620">case,</span> <span m="178040">h</span> <span m="178280">is</span> <span m="178430">linear.</span> <span m="178790">Because</span> <span m="179000">we</span> <span m="179120">can</span> <span m="179270">have</span> <span m="179420">a</span> <span m="179450">tree</span> <span m="179720">like</span> <span m="179930">this.</span></p>
<p><span m="183200">But</span> <span m="183440">today,</span> <span m="183980">we're</span> <span m="184160">going</span> <span m="184310">to</span> <span m="184370">make--</span> <span m="184850">we're</span> <span m="185000">going</span> <span m="185120">to</span> <span m="185210">guarantee</span> <span m="185780">that</span> <span m="185960">h</span> <span m="186260">is</span> <span m="186440">log</span> <span m="186710">n.</span> <span m="187490">And</span> <span m="187730">so</span> <span m="187880">the</span> <span m="187970">goal</span> <span m="188210">of</span> <span m="188300">today</span> <span m="188600">is</span> <span m="188720">to</span> <span m="188810">take</span> <span m="189050">all</span> <span m="189380">of</span> <span m="189500">these</span> <span m="189680">operations</span> <span m="190490">that</span> <span m="190730">run</span> <span m="190910">in</span> <span m="191000">order</span> <span m="191240">h</span> <span m="191480">time</span> <span m="192080">and</span> <span m="192320">get</span> <span m="192470">them</span> <span m="192620">to</span> <span m="192710">run</span> <span m="192950">an</span> <span m="193040">order</span> <span m="193460">log</span> <span m="193790">n</span> <span m="193910">time,</span> <span m="194210">just</span> <span m="194450">by</span> <span m="194600">modifying</span> <span m="195110">the</span> <span m="195170">data</span> <span m="195380">structure</span> <span m="195810">we've</span> <span m="195860">already</span> <span m="196160">seen.</span> <span m="196530">So</span> <span m="196550">we've</span> <span m="196670">done</span> <span m="196820">a</span> <span m="196850">lot</span> <span m="197060">of</span> <span m="197150">the</span> <span m="197210">hard</span> <span m="197450">work,</span> <span m="197930">just</span> <span m="198200">a</span> <span m="198260">little</span> <span m="198500">bit</span> <span m="198650">more</span> <span m="198860">work</span> <span m="199430">we</span> <span m="199580">need</span> <span m="199730">to</span> <span m="199850">do</span> <span m="200030">today</span> <span m="200330">on</span> <span m="200450">something</span> <span m="200780">called</span> <span m="201590">AVL</span> <span m="202130">trees</span> <span m="202490">or</span> <span m="202760">height</span> <span m="203120">balance.</span></p>
<p><span m="205370">But</span> <span m="205550">before</span> <span m="206150">we</span> <span m="206270">get</span> <span m="206480">there,</span> <span m="206820">I</span> <span m="206900">want</span> <span m="207140">to</span> <span m="207680">talk</span> <span m="207950">a</span> <span m="208010">little</span> <span m="208190">bit</span> <span m="208340">more--</span> <span m="208670">at</span> <span m="208790">the</span> <span m="208880">very</span> <span m="209150">end</span> <span m="209390">of</span> <span m="209450">the</span> <span m="209510">last</span> <span m="209750">lecture,</span> <span m="210150">we</span> <span m="210170">talked</span> <span m="210440">about</span> <span m="210980">once</span> <span m="211280">you</span> <span m="211400">have</span> <span m="211670">these</span> <span m="211820">subtree</span> <span m="212330">operations--</span> <span m="212970">so</span> <span m="213050">I</span> <span m="213140">can</span> <span m="213260">insert</span> <span m="213590">and</span> <span m="213710">delete</span> <span m="214010">in</span> <span m="214160">the</span> <span m="214220">subtree--</span> <span m="216110">how</span> <span m="216320">do</span> <span m="216440">I</span> <span m="216530">actually</span> <span m="216800">use</span> <span m="217070">that</span> <span m="217250">to</span> <span m="217370">solve</span> <span m="217670">the</span> <span m="217760">problems</span> <span m="218330">that</span> <span m="218450">we</span> <span m="218570">care</span> <span m="218780">about</span> <span m="218960">in</span> <span m="219020">this</span> <span m="219170">class,</span> <span m="219570">which</span> <span m="219710">are</span> <span m="219860">sequence</span> <span m="220280">data</span> <span m="220490">structure</span> <span m="221090">and</span> <span m="221330">set</span> <span m="221630">data</span> <span m="221840">structure?</span> <span m="222870">So</span> <span m="224930">we</span> <span m="225170">talked</span> <span m="225590">mostly</span> <span m="225920">about</span> <span m="226160">the</span> <span m="226280">set</span> <span m="226550">data</span> <span m="226760">structure</span> <span m="227120">last</span> <span m="227360">time.</span> <span m="227910">So</span> <span m="227990">in</span> <span m="228080">general,</span> <span m="228440">we're</span> <span m="228560">going</span> <span m="228680">to</span> <span m="228740">define</span> <span m="229250">what</span> <span m="229940">traversal</span> <span m="230480">order</span> <span m="230810">we</span> <span m="230960">maintain</span> <span m="231920">by</span> <span m="232370">a</span> <span m="232580">binary</span> <span m="232970">tree.</span></p>
<p><span m="233780">And</span> <span m="234020">so</span> <span m="234410">for</span> <span m="234920">a</span> <span m="235130">set,</span> <span m="236930">because</span> <span m="237590">for</span> <span m="237800">the</span> <span m="237920">set</span> <span m="238220">interface,</span> <span m="238730">we're</span> <span m="238850">interested</span> <span m="239330">in</span> <span m="239510">doing</span> <span m="240380">queries</span> <span m="240770">like</span> <span m="240950">find_next</span> <span m="241700">and</span> <span m="241790">find_previous,</span> <span m="242780">given</span> <span m="243110">a</span> <span m="243140">key,</span> <span m="243710">if</span> <span m="243920">it's</span> <span m="244040">not</span> <span m="244310">there,</span> <span m="244670">tell</span> <span m="244910">me</span> <span m="245120">the</span> <span m="245210">previous</span> <span m="245600">one</span> <span m="245750">or</span> <span m="245840">the</span> <span m="245930">next</span> <span m="246170">one,</span> <span m="246350">this</span> <span m="246500">is</span> <span m="246590">something</span> <span m="246890">we</span> <span m="247010">could</span> <span m="247160">do</span> <span m="247310">with</span> <span m="247460">binary</span> <span m="247790">search.</span> <span m="248720">And</span> <span m="248990">so</span> <span m="249290">the</span> <span m="249950">big,</span> <span m="250340">cool</span> <span m="250640">thing</span> <span m="250910">that</span> <span m="251060">binary</span> <span m="251390">trees</span> <span m="251690">let</span> <span m="251840">us</span> <span m="251960">do,</span> <span m="252170">if</span> <span m="252410">we</span> <span m="252920">let</span> <span m="253250">the</span> <span m="253340">traversal</span> <span m="253820">order</span> <span m="254150">always</span> <span m="254510">be</span> <span m="255500">all</span> <span m="255770">of</span> <span m="255860">the</span> <span m="255980">items</span> <span m="256279">stored</span> <span m="256610">in</span> <span m="256700">increasing</span> <span m="257250">key</span> <span m="257480">order,</span> <span m="258260">then</span> <span m="258529">we</span> <span m="258680">are</span> <span m="258769">effectively</span> <span m="259399">maintaining</span> <span m="260510">the</span> <span m="260690">items</span> <span m="261260">in</span> <span m="261560">order--</span> <span m="263450">in</span> <span m="263630">the</span> <span m="263740">traversal</span> <span m="264140">order</span> <span m="264350">sense.</span> <span m="264680">Again,</span> <span m="264920">we're</span> <span m="265040">not</span> <span m="265250">explicitly</span> <span m="265910">maintaining</span> <span m="266300">them</span> <span m="266420">in</span> <span m="266540">order.</span> <span m="267210">But</span> <span m="267350">up</span> <span m="267560">here,</span> <span m="268280">we're</span> <span m="268670">maintaining</span> <span m="269090">a</span> <span m="269150">tree</span> <span m="269660">that</span> <span m="269840">represents</span> <span m="270410">items</span> <span m="270830">in</span> <span m="271040">key</span> <span m="271310">order.</span> <span m="272300">And</span> <span m="272540">so</span> <span m="272720">this</span> <span m="272930">lets</span> <span m="273200">us</span> <span m="273380">do</span> <span m="275060">a</span> <span m="275210">subtree_find</span> <span m="276770">operation--</span> <span m="277640">which</span> <span m="277940">you</span> <span m="278090">could</span> <span m="278270">easily</span> <span m="278810">use</span> <span m="279140">to</span> <span m="279290">implement</span> <span m="279710">find,</span> <span m="280220">and</span> <span m="280340">find_previous,</span> <span m="280835">and</span> <span m="281090">so</span> <span m="281270">on--</span> <span m="282500">as</span> <span m="282800">follows.</span></p>
<p><span m="283800">We</span> <span m="283910">start</span> <span m="284330">at</span> <span m="284660">the</span> <span m="285020">root</span> <span m="285350">of</span> <span m="285500">the</span> <span m="285590">tree.</span> <span m="285890">So</span> <span m="286250">we</span> <span m="286370">can</span> <span m="286490">say,</span> <span m="286670">node</span> <span m="287000">equals</span> <span m="287360">root</span> <span m="287600">initially.</span> <span m="288770">And</span> <span m="289040">then</span> <span m="289190">we</span> <span m="289280">can</span> <span m="289430">recursively</span> <span m="290060">search</span> <span m="290420">for</span> <span m="290750">a</span> <span m="290810">key</span> <span m="291080">k</span> <span m="291920">as</span> <span m="292220">follows.</span> <span m="292770">We</span> <span m="292790">check,</span> <span m="293300">well,</span> <span m="293630">if</span> <span m="294380">the</span> <span m="294980">item</span> <span m="295550">at</span> <span m="295820">the</span> <span m="295940">root</span> <span m="296900">has</span> <span m="297170">a</span> <span m="297230">key</span> <span m="297530">that's</span> <span m="297770">bigger</span> <span m="298220">than</span> <span m="298400">k--</span> <span m="299490">let</span> <span m="299630">me</span> <span m="299810">draw</span> <span m="300140">a</span> <span m="300230">little</span> <span m="300440">picture.</span> <span m="304200">So</span> <span m="304400">we're</span> <span m="304640">at</span> <span m="305000">some</span> <span m="305300">node</span> <span m="305600">here.</span> <span m="308348">This is a</span> <span m="308816">node.</span> <span m="310220">And</span> <span m="310670">it</span> <span m="310730">has</span> <span m="310980">left</span> <span m="311240">subtree</span> <span m="312460">and a</span> <span m="312700">right</span> <span m="312940">subtree.</span> <span m="313550">And</span> <span m="313690">there's</span> <span m="313840">some</span> <span m="314080">item</span> <span m="315880">with</span> <span m="316030">some</span> <span m="316240">key.</span> <span m="316780">So</span> <span m="317170">if</span> <span m="317380">the</span> <span m="317470">key</span> <span m="317800">we're</span> <span m="317950">looking</span> <span m="318310">for</span> <span m="318580">is</span> <span m="318790">less</span> <span m="319120">than</span> <span m="319300">the</span> <span m="319390">node's</span> <span m="319660">item,</span> <span m="320260">that</span> <span m="320530">means</span> <span m="321040">it's</span> <span m="321370">down</span> <span m="321730">here</span> <span m="322090">in</span> <span m="322240">the</span> <span m="322300">left</span> <span m="322540">subtree.</span> <span m="323080">And</span> <span m="323230">so</span> <span m="323380">we</span> <span m="323530">recurse</span> <span m="323785">on</span> <span m="324040">node.left.</span></p>
<p><span m="325510">If</span> <span m="325780">they're</span> <span m="325930">equal,</span> <span m="326680">that</span> <span m="326920">means</span> <span m="327250">that</span> <span m="327460">this</span> <span m="327640">item</span> <span m="327910">is</span> <span m="328060">the</span> <span m="328120">item</span> <span m="328360">we're</span> <span m="328480">looking</span> <span m="328750">for.</span> <span m="329150">So</span> <span m="329230">we</span> <span m="329320">can</span> <span m="329440">just</span> <span m="329590">return</span> <span m="329920">it</span> <span m="330070">or</span> <span m="330220">the</span> <span m="330310">node,</span> <span m="330910">depending</span> <span m="331240">on</span> <span m="331300">what</span> <span m="331390">you're</span> <span m="331510">looking</span> <span m="331750">for.</span> <span m="332390">And</span> <span m="332680">if</span> <span m="332980">the</span> <span m="333190">key</span> <span m="333520">in</span> <span m="333670">here</span> <span m="333850">is</span> <span m="333940">greater</span> <span m="334300">than</span> <span m="334450">the</span> <span m="334510">key</span> <span m="334690">we're</span> <span m="334810">looking</span> <span m="335080">for,</span> <span m="335320">then</span> <span m="335500">we'll</span> <span m="335650">recurse</span> <span m="336010">to</span> <span m="336160">the</span> <span m="336220">right.</span> <span m="338650">If</span> <span m="338860">you</span> <span m="338950">think</span> <span m="339130">about</span> <span m="339430">it</span> <span m="339790">a</span> <span m="340060">little</span> <span m="340270">bit,</span> <span m="340570">this</span> <span m="340870">is</span> <span m="341110">exactly</span> <span m="341870">binary</span> <span m="342280">search</span> <span m="342580">on</span> <span m="342700">an</span> <span m="342790">array.</span> <span m="343600">It</span> <span m="343780">just</span> <span m="343990">happens</span> <span m="344320">to</span> <span m="344410">be</span> <span m="344620">on</span> <span m="344830">a</span> <span m="344860">tree</span> <span m="345160">instead.</span></p>
<p><span m="346120">If</span> <span m="346210">you</span> <span m="346330">think</span> <span m="346600">of</span> <span m="346810">an</span> <span m="346930">array</span> <span m="354160">like</span> <span m="354550">this,</span> <span m="355330">what</span> <span m="355480">does</span> <span m="355630">binary</span> <span m="355960">search</span> <span m="356230">do?</span> <span m="356500">It</span> <span m="356710">first</span> <span m="357040">looks</span> <span m="357280">at</span> <span m="357400">the</span> <span m="357460">key</span> <span m="357670">in</span> <span m="357790">the</span> <span m="357850">middle.</span> <span m="358340">I'm</span> <span m="358480">going</span> <span m="358600">to</span> <span m="358660">draw</span> <span m="358870">that</span> <span m="359020">as</span> <span m="359140">the</span> <span m="359230">root.</span> <span m="360160">And</span> <span m="360430">then,</span> <span m="361480">it</span> <span m="361720">recurses</span> <span m="362470">either</span> <span m="362740">on</span> <span m="362830">the</span> <span m="362890">left</span> <span m="363160">chunk,</span> <span m="364060">which</span> <span m="364240">I</span> <span m="364360">will</span> <span m="364480">draw</span> <span m="364670">recursively,</span> <span m="365860">or</span> <span m="366190">on</span> <span m="366340">the</span> <span m="366430">right</span> <span m="366640">chunk.</span> <span m="368110">And</span> <span m="368350">so</span> <span m="368530">if</span> <span m="368710">you</span> <span m="368830">happen</span> <span m="369130">to</span> <span m="369190">have</span> <span m="369340">a</span> <span m="369430">perfect</span> <span m="369880">binary</span> <span m="370240">tree</span> <span m="370480">like</span> <span m="370660">this</span> <span m="370840">one,</span> <span m="371290">it</span> <span m="371530">is</span> <span m="371620">simulating</span> <span m="372190">exactly</span> <span m="373690">binary</span> <span m="374080">search</span> <span m="374470">in</span> <span m="374680">this</span> <span m="374830">array.</span> <span m="375460">But</span> <span m="375730">this</span> <span m="375940">we're</span> <span m="376060">going</span> <span m="376180">to</span> <span m="376240">be</span> <span m="376330">able</span> <span m="376450">to</span> <span m="376540">maintain</span> <span m="376870">dynamically--</span> <span m="377410">not</span> <span m="377590">perfect</span> <span m="378010">any</span> <span m="378160">more,</span> <span m="378340">but</span> <span m="378550">close.</span> <span m="379690">Whereas</span> <span m="379990">this</span> <span m="380170">we</span> <span m="380290">could</span> <span m="380470">not</span> <span m="380650">maintain</span> <span m="381160">in</span> <span m="381370">sorted</span> <span m="381700">order.</span></p>
<p><span m="383180">So</span> <span m="384280">this</span> <span m="384700">is</span> <span m="385360">like</span> <span m="385660">a</span> <span m="385720">generalization</span> <span m="386500">of</span> <span m="386560">binary</span> <span m="386860">search</span> <span m="387160">to</span> <span m="387280">work</span> <span m="387520">on</span> <span m="387730">trees</span> <span m="388210">instead</span> <span m="388630">of</span> <span m="389110">on</span> <span m="389740">arrays.</span> <span m="390670">And</span> <span m="391480">for</span> <span m="391660">this</span> <span m="391840">reason,</span> <span m="392260">set</span> <span m="392560">binary</span> <span m="392890">trees</span> <span m="393280">are</span> <span m="393400">called</span> <span m="393760">binary</span> <span m="394150">search</span> <span m="394510">trees,</span> <span m="394930">because</span> <span m="395260">they're</span> <span m="395470">the</span> <span m="395530">tree</span> <span m="395800">version</span> <span m="396130">of</span> <span m="396190">binary</span> <span m="396520">search.</span> <span m="396820">So</span> <span m="396970">there's</span> <span m="397120">many</span> <span m="397360">equivalent</span> <span m="397780">names.</span> <span m="398450">So</span> <span m="398680">binary</span> <span m="398980">search</span> <span m="399220">tree</span> <span m="399370">is</span> <span m="399460">another</span> <span m="399760">name</span> <span m="399940">for</span> <span m="400060">set</span> <span m="400270">binary</span> <span m="400630">tree.</span></p>
<p><span m="401140">And</span> <span m="401410">the</span> <span m="401500">key</span> <span m="401770">thing</span> <span m="401980">that</span> <span m="402130">makes</span> <span m="402430">this</span> <span m="402700">algorithm</span> <span m="403180">work</span> <span m="403450">is</span> <span m="403720">the</span> <span m="404080">so-called</span> <span m="404500">binary</span> <span m="404830">search</span> <span m="405070">tree</span> <span m="405250">property,</span> <span m="405730">which</span> <span m="405970">is</span> <span m="406900">all</span> <span m="407320">the</span> <span m="407590">keys</span> <span m="408520">in</span> <span m="408790">the</span> <span m="408850">left</span> <span m="409120">subtree</span> <span m="409540">of</span> <span m="409630">a</span> <span m="409690">node</span> <span m="410050">are</span> <span m="410230">less</span> <span m="410560">than</span> <span m="411370">the</span> <span m="411520">root,</span> <span m="412765">or</span> <span m="413080">of</span> <span m="413230">that</span> <span m="413410">node,</span> <span m="414100">and</span> <span m="415180">that</span> <span m="415420">key</span> <span m="415780">is</span> <span m="416020">less</span> <span m="416290">than</span> <span m="416470">all</span> <span m="416680">the</span> <span m="416770">keys</span> <span m="417040">in</span> <span m="417160">the</span> <span m="417220">right</span> <span m="417400">subtree.</span> <span m="417880">And</span> <span m="418060">this</span> <span m="418240">is</span> <span m="418330">true</span> <span m="418540">recursively</span> <span m="419170">all</span> <span m="419290">the</span> <span m="419380">way</span> <span m="419500">down.</span> <span m="420380">And</span> <span m="420520">so</span> <span m="420700">that's</span> <span m="421660">how</span> <span m="421780">you</span> <span m="421900">prove</span> <span m="422170">that</span> <span m="422260">this</span> <span m="422440">algorithm</span> <span m="422830">is</span> <span m="422950">correct</span> <span m="423610">by</span> <span m="423880">this</span> <span m="424060">property.</span></p>
<p><span m="424850">Why</span> <span m="425020">is</span> <span m="425140">this</span> <span m="425320">true?</span> <span m="426170">Because</span> <span m="427510">if</span> <span m="427780">we</span> <span m="427900">can</span> <span m="428080">maintain</span> <span m="428470">traversal</span> <span m="428890">order</span> <span m="429160">to</span> <span m="429280">be</span> <span m="429520">increasing</span> <span m="430060">key,</span> <span m="430900">then</span> <span m="431680">that's</span> <span m="432010">exactly</span> <span m="433060">what</span> <span m="433300">traversal</span> <span m="433690">order</span> <span m="433900">means.</span> <span m="434230">It</span> <span m="434320">tells</span> <span m="434620">you</span> <span m="434770">all</span> <span m="434920">the</span> <span m="435010">things</span> <span m="435280">in the</span> <span m="435380">left</span> <span m="435580">subtree</span> <span m="435910">come</span> <span m="436150">before</span> <span m="436600">the</span> <span m="436690">root,</span> <span m="436930">which</span> <span m="437080">come</span> <span m="437260">before</span> <span m="437650">all</span> <span m="437740">the</span> <span m="437830">things</span> <span m="438070">in</span> <span m="438130">the</span> <span m="438190">right</span> <span m="438370">subtree.</span> <span m="438890">So</span> <span m="439900">this</span> <span m="440350">property</span> <span m="440950">implies</span> <span m="441430">this</span> <span m="441610">one.</span></p>
<p><span m="443680">And</span> <span m="443980">how</span> <span m="444100">do</span> <span m="444190">you</span> <span m="444310">maintain</span> <span m="444880">things</span> <span m="445120">in</span> <span m="445180">increasing</span> <span m="445450">key</span> <span m="445720">order?</span> <span m="446110">It's</span> <span m="446650">pretty</span> <span m="446920">easy.</span> <span m="447790">If</span> <span m="448000">you</span> <span m="448120">want</span> <span m="448300">to</span> <span m="448450">insert</span> <span m="448930">an</span> <span m="449050">item,</span> <span m="449800">where</span> <span m="450100">does</span> <span m="450310">it</span> <span m="450400">belong?</span> <span m="451240">Well,</span> <span m="451540">you</span> <span m="451660">do</span> <span m="451900">this</span> <span m="452110">search</span> <span m="452560">to</span> <span m="452680">find</span> <span m="453430">where</span> <span m="453700">it</span> <span m="453760">would</span> <span m="453940">belong</span> <span m="454240">if</span> <span m="454360">it</span> <span m="454450">was</span> <span m="454600">there.</span> <span m="455380">If</span> <span m="455620">it's</span> <span m="455770">there,</span> <span m="455980">you</span> <span m="456100">can</span> <span m="456250">overwrite</span> <span m="456730">the</span> <span m="456790">value</span> <span m="457150">stored</span> <span m="457490">with</span> <span m="457600">that</span> <span m="457750">key.</span> <span m="458260">If</span> <span m="458530">it's</span> <span m="458650">not,</span> <span m="460960">this</span> <span m="461380">search</span> <span m="461830">will</span> <span m="462010">fall</span> <span m="462370">off</span> <span m="462550">the</span> <span m="462640">tree</span> <span m="462880">at</span> <span m="463000">some</span> <span m="463180">point,</span> <span m="463450">and</span> <span m="463570">that's</span> <span m="463810">where</span> <span m="463960">you</span> <span m="464140">insert</span> <span m="466390">a</span> <span m="466540">new</span> <span m="466750">node</span> <span m="467380">in</span> <span m="467590">your</span> <span m="467740">tree.</span> <span m="468850">That</span> <span m="468970">was</span> <span m="469120">covered</span> <span m="469390">in</span> <span m="469480">recitation,</span> <span m="470150">so</span> <span m="470200">I</span> <span m="470220">don't</span> <span m="470350">want</span> <span m="470470">to</span> <span m="470830">dwell</span> <span m="471160">on</span> <span m="471280">it.</span></p>
<p><span m="471610">What</span> <span m="471820">I</span> <span m="471880">want</span> <span m="472030">to</span> <span m="472090">focus</span> <span m="472420">on</span> <span m="472540">today</span> <span m="472900">is</span> <span m="473590">the</span> <span m="473830">other</span> <span m="474130">application.</span> <span m="474920">How</span> <span m="475090">do</span> <span m="475210">we--</span> <span m="475570">this</span> <span m="475780">is</span> <span m="475930">for</span> <span m="476110">representing</span> <span m="476650">a</span> <span m="476710">set,</span> <span m="477010">which</span> <span m="477160">is</span> <span m="477280">relatively</span> <span m="477730">easy.</span> <span m="479080">A</span> <span m="479230">challenge</span> <span m="480640">to</span> <span m="480800">sort</span> <span m="481030">of</span> <span m="481150">set</span> <span m="481360">ourselves</span> <span m="481660">up</span> <span m="481810">for,</span> <span m="481960">but</span> <span m="482110">we</span> <span m="482200">need</span> <span m="482350">a</span> <span m="482410">little</span> <span m="482590">more</span> <span m="482770">work,</span> <span m="483430">is</span> <span m="483970">to</span> <span m="484390">make</span> <span m="484690">sequence</span> <span m="485140">binary</span> <span m="485470">trees.</span> <span m="487540">So</span> <span m="487750">suppose</span> <span m="488110">I</span> <span m="488200">have</span> <span m="488380">a</span> <span m="488410">binary</span> <span m="488770">tree,</span> <span m="489370">and</span> <span m="489610">what</span> <span m="489790">I</span> <span m="489880">would</span> <span m="490030">like--</span> <span m="490910">we</span> <span m="491110">mentioned</span> <span m="491410">at</span> <span m="491530">the</span> <span m="491620">end</span> <span m="491770">of</span> <span m="491860">last</span> <span m="492070">time--</span> <span m="492370">is</span> <span m="492580">that</span> <span m="492940">I</span> <span m="493150">want</span> <span m="493330">the</span> <span m="493450">traversal</span> <span m="493990">order</span> <span m="494380">of</span> <span m="494560">my</span> <span m="494740">tree</span> <span m="495640">to</span> <span m="495880">be</span> <span m="497020">the</span> <span m="497200">sequence</span> <span m="497560">order,</span> <span m="499810">the</span> <span m="499960">order</span> <span m="500230">that</span> <span m="500350">I'm</span> <span m="500470">trying</span> <span m="500680">to</span> <span m="500770">represent</span> <span m="501300">that's</span> <span m="501700">changed</span> <span m="502240">by</span> <span m="502450">operations</span> <span m="502960">like</span> <span m="503140">insert_at.</span></p>
<p><span m="506380">So</span> <span m="506560">I'd</span> <span m="506650">just</span> <span m="506860">like</span> <span m="507040">to</span> <span m="507160">do</span> <span m="507400">the</span> <span m="507520">same</span> <span m="507850">thing.</span> <span m="508540">But</span> <span m="508720">now,</span> <span m="508870">I</span> <span m="508930">have</span> <span m="509110">to</span> <span m="509200">think</span> <span m="509410">about</span> <span m="509710">how</span> <span m="509860">do</span> <span m="509980">I</span> <span m="510070">do</span> <span m="510220">a</span> <span m="510280">search,</span> <span m="510640">how</span> <span m="510760">do</span> <span m="510880">I</span> <span m="510940">do a</span> <span m="511100">insert_at,</span> <span m="511660">that</span> <span m="511780">sort</span> <span m="511930">of</span> <span m="512020">thing.</span> <span m="512650">And</span> <span m="512919">here</span> <span m="513220">is</span> <span m="514150">an</span> <span m="514330">algorithm</span> <span m="514780">for</span> <span m="514990">what</span> <span m="515200">I</span> <span m="515350">would</span> <span m="515559">like</span> <span m="516280">to</span> <span m="516460">work.</span> <span m="516789">But</span> <span m="516940">it's</span> <span m="517090">not</span> <span m="517240">going</span> <span m="517360">to</span> <span m="518169">quite</span> <span m="518500">work</span> <span m="518740">yet.</span></p>
<p><span m="520059">So</span> <span m="520299">suppose</span> <span m="520929">I</span> <span m="521110">give</span> <span m="521350">you</span> <span m="521710">a</span> <span m="521799">subtree,</span> <span m="523280">so</span> <span m="523929">specified</span> <span m="524590">by</span> <span m="524860">a</span> <span m="524920">node.</span> <span m="525700">So</span> <span m="525940">there's</span> <span m="526150">all</span> <span m="526360">the</span> <span m="527050">descendants</span> <span m="527740">of</span> <span m="527860">that</span> <span m="528010">node.</span> <span m="529060">And</span> <span m="529300">I'd</span> <span m="529420">like</span> <span m="529600">to</span> <span m="529690">know</span> <span m="530320">what</span> <span m="530620">is</span> <span m="531070">in</span> <span m="531340">the</span> <span m="531430">traversal</span> <span m="532030">order</span> <span m="532360">of</span> <span m="532540">that</span> <span m="532810">subtree,</span> <span m="533410">which</span> <span m="533650">starts</span> <span m="534010">here,</span> <span m="534670">and</span> <span m="534970">ends</span> <span m="535270">here,</span> <span m="535570">and</span> <span m="535780">the</span> <span m="535900">root</span> <span m="536080">will</span> <span m="536200">be</span> <span m="536290">somewhere</span> <span m="536590">in</span> <span m="536650">the</span> <span m="536710">middle.</span> <span m="538250">Give</span> <span m="538510">me</span> <span m="539020">the</span> <span m="539260">ith</span> <span m="539680">node.</span> <span m="541100">So</span> <span m="541420">if</span> <span m="541600">I</span> <span m="541780">ask</span> <span m="542080">i equals</span> <span m="542440">0,</span> <span m="542800">I</span> <span m="542950">want</span> <span m="543100">to</span> <span m="543190">get</span> <span m="543430">this</span> <span m="543610">leftmost</span> <span m="544330">descendant.</span> <span m="545230">If</span> <span m="545380">I</span> <span m="545470">ask</span> <span m="545680">for</span> <span m="545830">i</span> <span m="546010">equals</span> <span m="546580">the</span> <span m="547270">size</span> <span m="547720">of</span> <span m="547810">the</span> <span m="547900">tree</span> <span m="548140">minus</span> <span m="548470">1,</span> <span m="548800">I</span> <span m="548950">want</span> <span m="549100">to</span> <span m="549190">get</span> <span m="549340">the</span> <span m="549430">rightmost</span> <span m="549880">descendant.</span> <span m="551380">That</span> <span m="551590">was</span> <span m="551770">the</span> <span m="551890">first</span> <span m="552220">and</span> <span m="552310">last</span> <span m="552670">in</span> <span m="552820">the</span> <span m="552880">subtree</span> <span m="554020">that</span> <span m="554200">we</span> <span m="554290">talked</span> <span m="554530">about.</span></p>
<p><span m="554710">But</span> <span m="554860">we</span> <span m="555670">know</span> <span m="555790">how</span> <span m="555850">to</span> <span m="555940">find</span> <span m="556150">the</span> <span m="556210">first</span> <span m="556450">and</span> <span m="556570">last.</span> <span m="556840">Just</span> <span m="556990">walk</span> <span m="557200">left</span> <span m="557470">or</span> <span m="557560">walk</span> <span m="557770">right.</span> <span m="558220">But</span> <span m="558430">we</span> <span m="558520">don't</span> <span m="558700">know</span> <span m="558880">how</span> <span m="559000">to</span> <span m="559090">find</span> <span m="559900">the</span> <span m="560110">ith</span> <span m="560380">node--</span> <span m="562180">in</span> <span m="562600">order</span> <span m="562960">h</span> <span m="563230">time</span> <span m="563530">is</span> <span m="563680">the</span> <span m="563770">goal</span> <span m="563980">right</span> <span m="564190">now,</span> <span m="564530">not</span> <span m="564760">log</span> <span m="565000">n.</span> <span m="566110">And</span> <span m="566680">the</span> <span m="566980">idea</span> <span m="567370">is,</span> <span m="567520">well,</span> <span m="568330">it</span> <span m="568540">seems</span> <span m="568750">like</span> <span m="568960">size</span> <span m="569740">matters.</span> <span m="570400">[CHUCKLES]</span> <span m="571390">Sorry</span> <span m="571720">if</span> <span m="571840">you</span> <span m="571930">heard</span> <span m="572110">otherwise.</span></p>
<p><span m="574070">So</span> <span m="574360">in</span> <span m="574510">particular,</span> <span m="576000">I</span> <span m="576130">mentioned</span> <span m="576520">size</span> <span m="576940">when</span> <span m="577090">I</span> <span m="577120">was</span> <span m="577210">talking</span> <span m="577510">about</span> <span m="577750">the</span> <span m="578560">last</span> <span m="579100">node</span> <span m="579400">in</span> <span m="579490">the</span> <span m="579550">sequence.</span> <span m="580300">The</span> <span m="580480">index</span> <span m="580960">of</span> <span m="581080">that</span> <span m="581260">node</span> <span m="581830">is</span> <span m="582140">size</span> <span m="582730">of</span> <span m="582820">the</span> <span m="582970">subtree</span> <span m="583720">minus</span> <span m="584110">1.</span> <span m="584860">So</span> <span m="585100">let's</span> <span m="585340">define</span> <span m="586660">the</span> <span m="586930">size</span> <span m="587410">of</span> <span m="587500">a</span> <span m="587560">node</span> <span m="591250">to</span> <span m="591490">be</span> <span m="592720">the</span> <span m="593080">number</span> <span m="593500">of</span> <span m="593650">nodes</span> <span m="594970">in</span> <span m="595540">its</span> <span m="595780">subtree--</span> <span m="597310">we</span> <span m="597490">were</span> <span m="597580">calling</span> <span m="597850">that</span> <span m="598000">subtree(node)--</span> <span m="606510">including</span> <span m="607140">the</span> <span m="607200">node</span> <span m="607440">itself.</span> <span m="609100">So</span> <span m="609330">if</span> <span m="609510">I</span> <span m="609630">somehow</span> <span m="610230">knew</span> <span m="610560">the</span> <span m="610680">size,</span> <span m="611220">this</span> <span m="611340">seems</span> <span m="611700">important</span> <span m="612270">for</span> <span m="612510">understanding</span> <span m="612990">indexes.</span> <span m="613590">Let's</span> <span m="613770">just</span> <span m="613980">assume</span> <span m="614280">that</span> <span m="614430">I</span> <span m="614550">knew</span> <span m="614700">that</span> <span m="615930">magically</span> <span m="616530">in</span> <span m="616620">constant</span> <span m="617050">time.</span></p>
<p><span m="619980">Then,</span> <span m="620760">I</span> <span m="621000">claim</span> <span m="621400">that</span> <span m="621540">the</span> <span m="621630">size</span> <span m="622140">of</span> <span m="622290">the</span> <span m="622440">left</span> <span m="622680">subtree--</span> <span m="623200">so</span> <span m="623310">why</span> <span m="623430">don't</span> <span m="623610">I</span> <span m="623760">expand</span> <span m="624330">this</span> <span m="624510">diagram</span> <span m="624930">a</span> <span m="624960">little</span> <span m="625140">bit?</span> <span m="629060">So</span> <span m="629300">we</span> <span m="629420">have</span> <span m="629780">node</span> <span m="630240">as</span> <span m="630440">before.</span> <span m="631910">But</span> <span m="632300">we</span> <span m="632480">have</span> <span m="632810">left</span> <span m="633110">subtree</span> <span m="634340">and a</span> <span m="634670">right</span> <span m="634910">subtree.</span> <span m="636120">So</span> <span m="636230">this</span> <span m="636470">node</span> <span m="636710">here</span> <span m="636920">is</span> <span m="637040">node.left.</span> <span m="637700">This</span> <span m="637850">node</span> <span m="638030">here</span> <span m="638210">is</span> <span m="638330">node.right.</span> <span m="639080">They</span> <span m="639290">might</span> <span m="639470">not</span> <span m="639620">exist,</span> <span m="640860">but</span> <span m="641000">let's</span> <span m="641210">ignore</span> <span m="641510">those</span> <span m="641720">exceptional</span> <span m="642140">cases</span> <span m="642500">for</span> <span m="642590">now.</span> <span m="643760">Let's</span> <span m="644030">suppose</span> <span m="644390">we</span> <span m="644540">knew</span> <span m="645170">not</span> <span m="645440">only</span> <span m="645620">the</span> <span m="645760">size</span> <span m="646130">of</span> <span m="646490">node,</span> <span m="647190">but</span> <span m="647300">we</span> <span m="647390">knew</span> <span m="647540">the</span> <span m="647660">size</span> <span m="648170">of</span> <span m="648440">node.left,</span> <span m="649280">so</span> <span m="649490">that</span> <span m="649670">is</span> <span m="649790">the</span> <span m="649910">size</span> <span m="650390">of</span> <span m="650600">this</span> <span m="650870">tree</span> <span m="651770">on</span> <span m="652070">the</span> <span m="652160">left.</span> <span m="653780">I'm going</span> <span m="654020">to</span> <span m="654080">call</span> <span m="654320">that</span> <span m="654530">nL.</span></p>
<p><span m="655070">So</span> <span m="655280">let's</span> <span m="655460">suppose</span> <span m="655820">that</span> <span m="655910">there</span> <span m="656030">are</span> <span m="656130">nL</span> <span m="656660">nodes</span> <span m="657080">down</span> <span m="657320">here.</span> <span m="659000">I</span> <span m="659270">claim</span> <span m="659630">that</span> <span m="659870">lets</span> <span m="660200">me</span> <span m="660350">do</span> <span m="660740">the</span> <span m="660860">equivalent</span> <span m="661490">of</span> <span m="661640">a</span> <span m="661700">binary</span> <span m="662090">search.</span> <span m="663770">Because</span> <span m="664040">I'm</span> <span m="664250">looking</span> <span m="664550">for</span> <span m="664670">some</span> <span m="664880">index</span> <span m="665240">i.</span> <span m="666440">And</span> <span m="666740">if</span> <span m="666860">i</span> <span m="667220">is</span> <span m="667610">less</span> <span m="667940">than</span> <span m="668150">nL,</span> <span m="668960">then</span> <span m="669260">I</span> <span m="669470">know</span> <span m="669710">that</span> <span m="669890">it</span> <span m="669980">must</span> <span m="670160">be</span> <span m="670310">down</span> <span m="670520">here.</span> <span m="670830">For</span> <span m="670930">example,</span> <span m="671220">if</span> <span m="671240">i</span> <span m="671330">equals</span> <span m="671570">0,</span> <span m="671930">it's</span> <span m="672200">going</span> <span m="672320">to</span> <span m="672410">be</span> <span m="672500">in</span> <span m="672680">the</span> <span m="672740">left</span> <span m="672980">subtree,</span> <span m="673790">as</span> <span m="674060">long</span> <span m="674240">as</span> <span m="674390">nL</span> <span m="674660">is</span> <span m="674810">greater</span> <span m="675110">than</span> <span m="675260">0,</span> <span m="676670">right?</span> <span m="676990">So</span> <span m="678020">that's</span> <span m="678320">exactly</span> <span m="678800">this</span> <span m="678980">check.</span> <span m="679190">If</span> <span m="679340">i</span> <span m="679520">is</span> <span m="679640">less</span> <span m="679820">than</span> <span m="679970">nL,</span> <span m="680270">I'm</span> <span m="680360">going</span> <span m="680480">to</span> <span m="680540">recurse</span> <span m="681080">to</span> <span m="681260">the</span> <span m="681350">left,</span> <span m="682580">call</span> <span m="682940">subtree</span> <span m="683390">at</span> <span m="683630">of</span> <span m="683810">node.left,</span> <span m="684710">i.</span> <span m="685860">That's</span> <span m="686300">what's</span> <span m="686690">written</span> <span m="686900">here.</span></p>
<p><span m="687830">If</span> <span m="688070">i</span> <span m="688310">equals</span> <span m="688790">nL,</span> <span m="689700">if</span> <span m="689770">you</span> <span m="690140">think</span> <span m="690350">about</span> <span m="690530">it</span> <span m="690590">for a</span> <span m="690710">second--</span> <span m="691120">so</span> <span m="691160">nL</span> <span m="691430">is</span> <span m="691520">the</span> <span m="691640">number</span> <span m="691910">of</span> <span m="692030">nodes</span> <span m="692330">here.</span> <span m="693150">And</span> <span m="693320">so</span> <span m="693470">that</span> <span m="693620">means</span> <span m="693890">this</span> <span m="694190">node</span> <span m="694490">has</span> <span m="695000">index</span> <span m="696140">nL.</span> <span m="697340">The</span> <span m="697490">index</span> <span m="697820">of</span> <span m="697940">this</span> <span m="698090">node</span> <span m="698330">is</span> <span m="698540">nL.</span> <span m="699500">And</span> <span m="699800">so</span> <span m="700130">if</span> <span m="700340">i</span> <span m="700610">equals--</span> <span m="701090">if</span> <span m="701600">the</span> <span m="701690">one</span> <span m="701930">index</span> <span m="702260">we're</span> <span m="702350">looking</span> <span m="702590">for</span> <span m="702770">is</span> <span m="702950">that</span> <span m="703130">one,</span> <span m="703550">then</span> <span m="703760">we</span> <span m="703850">just</span> <span m="704000">return</span> <span m="704330">this</span> <span m="704480">node.</span> <span m="704780">We're</span> <span m="704930">done.</span></p>
<p><span m="706460">And</span> <span m="706880">otherwise,</span> <span m="707205">i</span> <span m="707530">is</span> <span m="707750">greater</span> <span m="708110">than</span> <span m="708260">nL.</span> <span m="708920">And</span> <span m="709130">that</span> <span m="709250">means</span> <span m="709520">that</span> <span m="709700">the</span> <span m="709970">node</span> <span m="710210">we're</span> <span m="710330">looking</span> <span m="710600">for</span> <span m="710930">is</span> <span m="711740">in</span> <span m="712010">the</span> <span m="712100">right</span> <span m="712310">subtree,</span> <span m="712760">because</span> <span m="712970">it</span> <span m="713060">comes</span> <span m="713360">after</span> <span m="713840">the</span> <span m="713930">root.</span> <span m="714590">Again,</span> <span m="715400">that's</span> <span m="715670">what</span> <span m="715820">it</span> <span m="715880">means.</span> <span m="716420">That's</span> <span m="716630">what</span> <span m="716760">traversal</span> <span m="717110">order</span> <span m="717320">means.</span> <span m="717680">So</span> <span m="717830">if</span> <span m="717920">we</span> <span m="718010">define</span> <span m="718370">it</span> <span m="718460">to</span> <span m="718550">be</span> <span m="718670">sequence</span> <span m="719030">order,</span> <span m="720830">then</span> <span m="721100">we</span> <span m="721220">know</span> <span m="721820">all</span> <span m="722060">the</span> <span m="722150">things</span> <span m="722360">that</span> <span m="722450">come</span> <span m="722690">after</span> <span m="723110">this</span> <span m="723500">node,</span> <span m="723740">which</span> <span m="723920">is</span> <span m="724040">index</span> <span m="724370">nL,</span> <span m="724940">must</span> <span m="725240">be</span> <span m="725360">over</span> <span m="725570">here.</span></p>
<p><span m="726120">Now</span> <span m="726290">when</span> <span m="726440">we</span> <span m="726560">recurse</span> <span m="726950">down</span> <span m="727160">here,</span> <span m="727370">our</span> <span m="727490">numbering</span> <span m="727940">system</span> <span m="728300">changes.</span> <span m="728870">Because</span> <span m="730460">for</span> <span m="730640">node,</span> <span m="731040">0</span> <span m="731450">is</span> <span m="731660">here.</span> <span m="732320">And</span> <span m="732560">then</span> <span m="732680">for</span> <span m="732830">node.right</span> <span m="733910">is</span> <span m="734090">here.</span> <span m="735060">So</span> <span m="735230">we</span> <span m="735380">need</span> <span m="735530">to</span> <span m="735860">do</span> <span m="736130">a</span> <span m="736250">little</span> <span m="736400">bit</span> <span m="736520">of</span> <span m="736580">subtraction</span> <span m="737150">here,</span> <span m="737490">which</span> <span m="737630">is</span> <span m="737780">when</span> <span m="737930">we</span> <span m="738050">recurse</span> <span m="738410">to</span> <span m="738530">the</span> <span m="738590">right,</span> <span m="739100">we</span> <span m="739310">take</span> <span m="739580">i</span> <span m="739890">minus</span> <span m="740300">nL</span> <span m="740600">minus</span> <span m="740990">1--</span> <span m="741350">minus</span> <span m="741740">nL</span> <span m="741980">for</span> <span m="742100">these</span> <span m="742280">guys,</span> <span m="742580">minus</span> <span m="742910">1</span> <span m="743090">for</span> <span m="743270">the</span> <span m="743330">root</span> <span m="744110">node.</span> <span m="746300">And</span> <span m="746420">that</span> <span m="746600">will</span> <span m="746690">give</span> <span m="746900">us</span> <span m="747020">the</span> <span m="747140">index</span> <span m="747470">we're</span> <span m="747560">looking</span> <span m="747800">for</span> <span m="748340">within</span> <span m="748730">this</span> <span m="748910">subtree.</span></p>
<p><span m="750980">So</span> <span m="752060">my</span> <span m="752270">point</span> <span m="752540">is,</span> <span m="752690">this</span> <span m="752900">algorithm</span> <span m="753320">is</span> <span m="753440">basically</span> <span m="754400">the</span> <span m="754550">same</span> <span m="754880">as</span> <span m="755000">this</span> <span m="755180">algorithm.</span> <span m="755600">But</span> <span m="755840">this</span> <span m="756050">one</span> <span m="756230">uses</span> <span m="756560">keys,</span> <span m="757880">because</span> <span m="758150">we're</span> <span m="758330">dealing</span> <span m="758600">with</span> <span m="758750">a</span> <span m="758810">set,</span> <span m="759080">and</span> <span m="759350">in</span> <span m="759770">sets</span> <span m="760100">we</span> <span m="760220">assume</span> <span m="760490">items</span> <span m="760760">have</span> <span m="760880">keys.</span> <span m="761450">Over</span> <span m="761720">here,</span> <span m="762170">items</span> <span m="762560">don't</span> <span m="762770">have</span> <span m="762950">to</span> <span m="763070">have</span> <span m="763250">keys.</span> <span m="763520">In</span> <span m="763610">fact,</span> <span m="763920">we're</span> <span m="763940">not</span> <span m="764090">touching</span> <span m="764360">the</span> <span m="764420">items</span> <span m="764750">at</span> <span m="764930">all.</span> <span m="765810">We're</span> <span m="765860">just</span> <span m="766010">asking,</span> <span m="766530">what</span> <span m="766610">is</span> <span m="766790">the</span> <span m="766910">ith</span> <span m="767180">item</span> <span m="767840">in</span> <span m="768110">my</span> <span m="768890">sequence,</span> <span m="769920">which</span> <span m="770090">is</span> <span m="770180">the</span> <span m="770240">same</span> <span m="770480">thing</span> <span m="770690">as</span> <span m="770810">what</span> <span m="770960">is</span> <span m="771050">the</span> <span m="771140">ith</span> <span m="771350">item</span> <span m="771620">in my</span> <span m="771890">traversal</span> <span m="772160">order,</span> <span m="772490">which</span> <span m="772640">is</span> <span m="772730">the</span> <span m="772790">same</span> <span m="773030">thing</span> <span m="773180">as</span> <span m="773330">asking</span> <span m="773840">what</span> <span m="774020">is</span> <span m="774140">the</span> <span m="774260">ith</span> <span m="774560">node</span> <span m="775340">in</span> <span m="775670">the</span> <span m="775730">traversal</span> <span m="776120">order?</span> <span m="776600">And</span> <span m="776870">this</span> <span m="777080">algorithm</span> <span m="777530">gives</span> <span m="777710">it</span> <span m="777800">to</span> <span m="777890">you</span> <span m="778310">exactly</span> <span m="778820">the</span> <span m="778910">same</span> <span m="779150">way</span> <span m="779540">in</span> <span m="780320">order</span> <span m="780590">h</span> <span m="780830">time.</span></p>
<p><span m="783890">Now,</span> <span m="784010">I'm</span> <span m="784100">not</span> <span m="784220">going</span> <span m="784340">to</span> <span m="784430">show</span> <span m="784580">you</span> <span m="784700">all</span> <span m="784910">the</span> <span m="785030">operations.</span> <span m="785630">But</span> <span m="785810">you</span> <span m="785930">can</span> <span m="786140">use</span> <span m="786770">subtree_at</span> <span m="788030">to</span> <span m="788210">implement</span> <span m="790070">get_at</span> <span m="790880">set_at.</span> <span m="791930">You</span> <span m="792110">just</span> <span m="792470">find</span> <span m="792800">the</span> <span m="792890">appropriate</span> <span m="793370">node</span> <span m="793730">and</span> <span m="793880">return</span> <span m="794480">the</span> <span m="794630">item</span> <span m="795050">or</span> <span m="795200">modify</span> <span m="795620">the</span> <span m="795710">item.</span> <span m="797180">Or</span> <span m="797480">you</span> <span m="797630">can</span> <span m="797810">use</span> <span m="797990">it</span> <span m="798170">to--</span> <span m="799070">most</span> <span m="799370">crucially,</span> <span m="799790">you</span> <span m="799910">can</span> <span m="800030">use</span> <span m="800180">it</span> <span m="800240">to</span> <span m="800350">do</span> <span m="800510">insert_at</span> <span m="801350">delete_at.</span> <span m="801950">This</span> <span m="802160">is</span> <span m="802310">a</span> <span m="802370">new</span> <span m="802580">thing</span> <span m="802820">we've</span> <span m="802970">never</span> <span m="803210">been</span> <span m="803360">able</span> <span m="803540">to</span> <span m="803660">do</span> <span m="803840">before.</span></p>
<p><span m="805090">What</span> <span m="805280">do</span> <span m="805370">you</span> <span m="805460">do?</span> <span m="805970">Just</span> <span m="806360">like</span> <span m="806600">over</span> <span m="806840">here,</span> <span m="807170">if I'm</span> <span m="807290">trying</span> <span m="807500">to</span> <span m="807590">insert</span> <span m="807920">an</span> <span m="808040">item,</span> <span m="808670">I</span> <span m="809750">search</span> <span m="810290">for</span> <span m="811220">that</span> <span m="811610">item</span> <span m="812000">over</span> <span m="812300">here.</span> <span m="813300">So</span> <span m="813370">if I'm</span> <span m="813620">trying</span> <span m="813770">to</span> <span m="813830">insert</span> <span m="814190">at</span> <span m="814310">i,</span> <span m="814580">for</span> <span m="814700">example,</span> <span m="815390">I</span> <span m="815600">look</span> <span m="815810">for</span> <span m="815960">i.</span> <span m="816710">And</span> <span m="816950">then</span> <span m="820520">for</span> <span m="820730">insert_at</span> <span m="821600">i,</span> <span m="822260">want</span> <span m="822440">to</span> <span m="822530">add</span> <span m="822680">a</span> <span m="822740">new</span> <span m="822920">item</span> <span m="823220">just</span> <span m="823490">before</span> <span m="823940">that</span> <span m="824150">one.</span> <span m="824990">And</span> <span m="825260">conveniently,</span> <span m="826250">we</span> <span m="826520">already</span> <span m="826940">have--</span> <span m="827870">I</span> <span m="828050">didn't</span> <span m="828260">mention,</span> <span m="828750">but</span> <span m="828800">we</span> <span m="828920">have</span> <span m="829130">a</span> <span m="829220">subtree</span> <span m="829790">insert.</span> <span m="830810">We</span> <span m="831080">had</span> <span m="831410">two</span> <span m="831680">versions--</span> <span m="832160">before</span> <span m="832580">and</span> <span m="832730">after.</span> <span m="835470">I</span> <span m="835940">think</span> <span m="836150">we</span> <span m="836270">covered</span> <span m="836660">after,</span> <span m="838400">which</span> <span m="838650">I use</span> <span m="838750">successor</span> <span m="839270">before</span> <span m="839640">I use</span> <span m="839870">predecessor.</span> <span m="841130">But</span> <span m="841400">we</span> <span m="841550">can</span> <span m="842570">just</span> <span m="842840">call</span> <span m="843410">subtree</span> <span m="843920">insert</span> <span m="844280">before</span> <span m="845360">at</span> <span m="845660">that</span> <span m="845870">node,</span> <span m="846470">and</span> <span m="846710">boom,</span> <span m="847340">we</span> <span m="847640">will</span> <span m="848600">have</span> <span m="849050">added</span> <span m="849470">a</span> <span m="849530">new</span> <span m="849740">item</span> <span m="850070">just</span> <span m="850280">before</span> <span m="850730">it.</span></p>
<p><span m="852230">And</span> <span m="852620">great,</span> <span m="853100">so</span> <span m="853340">magically,</span> <span m="854090">somehow,</span> <span m="855560">we</span> <span m="855710">have</span> <span m="855860">inserted</span> <span m="856310">in</span> <span m="856400">the</span> <span m="856460">middle</span> <span m="856670">of</span> <span m="856760">this</span> <span m="856850">sequence.</span> <span m="858080">And</span> <span m="858410">all</span> <span m="858740">of</span> <span m="858890">the</span> <span m="859010">indices</span> <span m="859670">update,</span> <span m="860900">because</span> <span m="861320">I'm</span> <span m="861440">not</span> <span m="861620">storing</span> <span m="861980">indices.</span> <span m="863210">Instead,</span> <span m="864050">to</span> <span m="864230">search</span> <span m="864560">for</span> <span m="864680">an</span> <span m="864770">item</span> <span m="865100">at</span> <span m="865190">index</span> <span m="865520">i,</span> <span m="865730">I'm</span> <span m="865880">using</span> <span m="866210">the</span> <span m="866300">search</span> <span m="866570">algorithm.</span></p>
<p><span m="868820">But</span> <span m="869720">there's</span> <span m="869990">a</span> <span m="870050">problem.</span> <span m="871460">What's</span> <span m="871760">the</span> <span m="871850">problem?</span> <span m="876520">This</span> <span m="876730">seems</span> <span m="877000">a</span> <span m="877060">little</span> <span m="877270">too</span> <span m="877480">good</span> <span m="877660">to</span> <span m="877780">be</span> <span m="877870">true.</span> <span m="879190">I</span> <span m="879670">insert</span> <span m="880070">in</span> <span m="880180">the</span> <span m="880240">middle</span> <span m="880480">of</span> <span m="880570">this</span> <span m="880750">tree,</span> <span m="881500">and</span> <span m="881740">then</span> <span m="881890">somehow,</span> <span m="882310">I</span> <span m="882400">can</span> <span m="882580">magically</span> <span m="883060">search</span> <span m="883810">and</span> <span m="884110">still</span> <span m="884350">find</span> <span m="884560">the</span> <span m="884650">ith</span> <span m="884920">item,</span> <span m="885610">even</span> <span m="885910">though</span> <span m="886090">all</span> <span m="886330">the</span> <span m="886420">indices</span> <span m="886960">to</span> <span m="887080">the</span> <span m="887170">right</span> <span m="887350">of</span> <span m="887440">that</span> <span m="887590">item</span> <span m="887860">incremented</span> <span m="888340">by</span> <span m="888490">1.</span> <span m="892580">It's</span> <span m="892870">almost</span> <span m="893330">true.</span> <span m="894750">Answer?</span> <span m="898020">Yeah?</span></p>
<p><span m="899280">AUDIENCE:</span> <span m="899400">[INAUDIBLE]</span></p>
<p><span m="901450">ERIK DEMAINE:</span> <span m="901540">Because</span> <span m="901630">we</span> <span m="901720">have</span> <span m="901840">to</span> <span m="901930">update</span> <span m="902290">the</span> <span m="902380">sizes,</span> <span m="902950">right.</span> <span m="903130">I</span> <span m="903250">didn't</span> <span m="903520">say,</span> <span m="904150">how</span> <span m="904390">do</span> <span m="904540">I</span> <span m="904660">compute</span> <span m="904990">the</span> <span m="905080">size</span> <span m="905380">of</span> <span m="905440">the</span> <span m="905530">left</span> <span m="905710">subtree?</span> <span m="906350">So</span> <span m="906550">that</span> <span m="906760">is</span> <span m="906910">the</span> <span m="907000">next</span> <span m="907240">topic.</span></p>
<p><span m="911950">We're</span> <span m="912220">almost</span> <span m="912610">done.</span> <span m="912850">This</span> <span m="913330">will</span> <span m="913570">actually</span> <span m="913930">work.</span> <span m="914510">It's</span> <span m="914950">really</span> <span m="915310">quite</span> <span m="915730">awesome.</span> <span m="916780">But</span> <span m="917500">for</span> <span m="917740">it</span> <span m="917800">to</span> <span m="917920">work,</span> <span m="918160">we</span> <span m="918280">need</span> <span m="918460">something</span> <span m="918790">called</span> <span m="919180">subtree</span> <span m="919660">augmentation,</span> <span m="922690">which</span> <span m="922840">I'll</span> <span m="922930">talk</span> <span m="923170">about</span> <span m="923410">generally.</span> <span m="923920">And</span> <span m="924040">then,</span> <span m="924190">we'll</span> <span m="924340">apply</span> <span m="924700">it</span> <span m="924820">to</span> <span m="925090">size.</span></p>
<p><span m="930370">So</span> <span m="930640">the</span> <span m="930730">idea</span> <span m="931000">with</span> <span m="931100">subtree</span> <span m="931510">augmentation</span> <span m="932590">is</span> <span m="932980">that</span> <span m="934000">each</span> <span m="934510">node</span> <span m="935710">in</span> <span m="936070">our</span> <span m="936400">binary</span> <span m="936790">tree</span> <span m="937900">can</span> <span m="938110">store</span> <span m="939960">a</span> <span m="940540">constant</span> <span m="941110">number</span> <span m="941710">of</span> <span m="942130">extra</span> <span m="942550">fields.</span> <span m="945100">Why</span> <span m="945310">not?</span> <span m="946780">And</span> <span m="947320">in</span> <span m="947500">particular,</span> <span m="948950">if</span> <span m="949150">these</span> <span m="949330">fields</span> <span m="949750">are</span> <span m="950110">of</span> <span m="950200">a</span> <span m="950290">particular</span> <span m="950740">type--</span> <span m="951610">maybe</span> <span m="951850">I'll</span> <span m="951940">call</span> <span m="952150">them</span> <span m="952510">properties.</span> <span m="957700">I'm</span> <span m="958000">going</span> <span m="958210">to</span> <span m="958300">define</span> <span m="958870">a</span> <span m="959110">subtree</span> <span m="959770">property</span> <span m="970030">to</span> <span m="970240">be</span> <span m="970420">something</span> <span m="970810">that</span> <span m="970960">can</span> <span m="971140">be</span> <span m="971290">computed</span> <span m="981330">from</span> <span m="981870">the</span> <span m="982290">properties</span> <span m="983880">of</span> <span m="984420">the</span> <span m="984630">nodes'</span> <span m="985020">children.</span> <span m="988740">So</span> <span m="989070">I</span> <span m="989160">should</span> <span m="989340">say</span> <span m="989580">this</span> <span m="989760">is</span> <span m="989940">of</span> <span m="990180">a</span> <span m="990480">node.</span></p>
<p><span m="997230">So</span> <span m="997530">children</span> <span m="998010">are</span> <span m="998400">node.left</span> <span m="999150">and</span> <span m="999270">node.right.</span> <span m="1002030">You</span> <span m="1002210">can</span> <span m="1002420">also</span> <span m="1002840">access</span> <span m="1003530">constant</span> <span m="1003940">amount</span> <span m="1004130">of</span> <span m="1004220">other</span> <span m="1004370">stuff,</span> <span m="1004655">for</span> <span m="1004940">example</span> <span m="1005390">the</span> <span m="1005510">node</span> <span m="1005720">itself.</span> <span m="1007620">But</span> <span m="1007850">the</span> <span m="1008030">point</span> <span m="1008210">of</span> <span m="1008300">a</span> <span m="1008360">subtree</span> <span m="1008720">property</span> <span m="1009140">is it's</span> <span m="1009410">downward</span> <span m="1010010">looking.</span> <span m="1010490">If</span> <span m="1010700">I</span> <span m="1010790">have</span> <span m="1011060">a</span> <span m="1011120">node</span> <span m="1013100">here,</span> <span m="1014840">and</span> <span m="1016940">I</span> <span m="1017180">want</span> <span m="1017360">to</span> <span m="1017450">compute</span> <span m="1017870">some</span> <span m="1018830">property</span> <span m="1019370">about</span> <span m="1019700">it--</span> <span m="1020750">call</span> <span m="1021050">it,</span> <span m="1022340">we</span> <span m="1022550">want</span> <span m="1023330">to</span> <span m="1023480">store</span> <span m="1023780">P</span> <span m="1024170">of</span> <span m="1024410">the</span> <span m="1024560">node--</span> <span m="1026000">and</span> <span m="1026270">suppose</span> <span m="1026630">we</span> <span m="1026810">already</span> <span m="1027349">know</span> <span m="1028369">P</span> <span m="1028700">over</span> <span m="1028940">here,</span> <span m="1029270">the</span> <span m="1029390">property</span> <span m="1030200">computed</span> <span m="1030800">for</span> <span m="1031010">the</span> <span m="1031099">left</span> <span m="1031310">subtree</span> <span m="1031910">or</span> <span m="1032060">for</span> <span m="1032210">the</span> <span m="1032270">left</span> <span m="1032510">node,</span> <span m="1033050">and</span> <span m="1033260">we</span> <span m="1033380">already</span> <span m="1033710">know</span> <span m="1033890">the</span> <span m="1033980">property</span> <span m="1034760">for</span> <span m="1034940">the</span> <span m="1035030">right</span> <span m="1035210">node,</span> <span m="1035780">then</span> <span m="1037099">what</span> <span m="1037310">I'd</span> <span m="1037430">like</span> <span m="1037970">is</span> <span m="1038270">for</span> <span m="1038420">this</span> <span m="1038569">to</span> <span m="1038690">be</span> <span m="1038839">computable</span> <span m="1039440">in</span> <span m="1039619">constant</span> <span m="1039994">time.</span></p>
<p><span m="1046160">So</span> <span m="1046460">I</span> <span m="1046579">can</span> <span m="1046730">compute</span> <span m="1047119">P</span> <span m="1047480">of</span> <span m="1047630">this</span> <span m="1047780">node</span> <span m="1048319">given</span> <span m="1048800">P</span> <span m="1049070">of</span> <span m="1049160">the</span> <span m="1049250">left</span> <span m="1049490">node</span> <span m="1049750">and</span> <span m="1049760">P of</span> <span m="1050150">the</span> <span m="1050270">right</span> <span m="1050450">node.</span> <span m="1050870">That's</span> <span m="1051170">a</span> <span m="1051230">subtree</span> <span m="1051650">property.</span> <span m="1052340">Now,</span> <span m="1052580">in</span> <span m="1052670">particular,</span> <span m="1054020">size</span> <span m="1055310">is</span> <span m="1055580">a</span> <span m="1055670">substrate</span> <span m="1056090">property.</span> <span m="1058340">Why?</span> <span m="1059510">Because</span> <span m="1061130">I</span> <span m="1061370">can</span> <span m="1061550">write</span> <span m="1061880">this</span> <span m="1062150">kind</span> <span m="1062360">of</span> <span m="1062450">recurrence,</span> <span m="1063830">node.size</span> <span m="1066440">equals</span> <span m="1067100">node.left.size--</span> <span m="1069282">this</span> <span m="1069700">is</span> <span m="1069840">very</span> <span m="1070175">tedious</span> <span m="1070510">to</span> <span m="1070930">write--</span> <span m="1072470">plus</span> <span m="1073070">node.right.size,</span> <span m="1079310">plus?</span> <span m="1083790">1,</span> <span m="1084320">thank</span> <span m="1084600">you.</span> <span m="1085955">The</span> <span m="1086340">size</span> <span m="1086790">of</span> <span m="1086880">the</span> <span m="1087810">entire</span> <span m="1088290">subtree</span> <span m="1088800">here,</span> <span m="1089670">called</span> <span m="1089940">node,</span> <span m="1091290">is</span> <span m="1091710">the</span> <span m="1091800">size of the</span> <span m="1092100">left</span> <span m="1092310">subtree</span> <span m="1092700">plus</span> <span m="1093010">size</span> <span m="1093250">of</span> <span m="1093300">the</span> <span m="1093360">right</span> <span m="1093480">subtree,</span> <span m="1093810">plus</span> <span m="1094290">1</span> <span m="1094620">for</span> <span m="1094800">that</span> <span m="1095400">node</span> <span m="1095730">itself.</span></p>
<p><span m="1097290">So</span> <span m="1097470">this</span> <span m="1097680">is</span> <span m="1097770">an</span> <span m="1097890">update</span> <span m="1098250">rule.</span> <span m="1098865">It</span> <span m="1099120">takes</span> <span m="1099400">constant</span> <span m="1099810">time</span> <span m="1100020">to</span> <span m="1100110">evaluate.</span> <span m="1100530">It's</span> <span m="1100680">two</span> <span m="1100830">editions.</span> <span m="1102990">Sorry,</span> <span m="1103290">my</span> <span m="1103440">t's</span> <span m="1103710">look</span> <span m="1103860">kind</span> <span m="1104040">of</span> <span m="1104130">like</span> <span m="1104280">plus</span> <span m="1104490">signs.</span> <span m="1107250">I'll</span> <span m="1107718">make</span> <span m="1108190">the</span> <span m="1108310">pluses</span> <span m="1108790">a</span> <span m="1108820">little</span> <span m="1109030">bigger.</span> <span m="1115750">So</span> <span m="1115900">we're</span> <span m="1116020">just</span> <span m="1116150">summing</span> <span m="1116590">those</span> <span m="1116800">three</span> <span m="1117010">things.</span> <span m="1118030">Boom,</span> <span m="1118360">we</span> <span m="1118480">can</span> <span m="1118630">get</span> <span m="1118810">node.size.</span></p>
<p><span m="1120020">So</span> <span m="1120760">I</span> <span m="1121030">claim</span> <span m="1121960">that</span> <span m="1124060">as</span> <span m="1124270">long</span> <span m="1124570">as</span> <span m="1124690">my</span> <span m="1124840">property</span> <span m="1125350">has</span> <span m="1125770">this</span> <span m="1125980">feature,</span> <span m="1126980">I</span> <span m="1127090">can</span> <span m="1127300">maintain</span> <span m="1127810">it</span> <span m="1128230">dynamically</span> <span m="1128950">as</span> <span m="1129160">I'm</span> <span m="1129280">changing</span> <span m="1129670">the</span> <span m="1129730">tree.</span> <span m="1131680">Now,</span> <span m="1131860">this</span> <span m="1132700">is</span> <span m="1132970">a</span> <span m="1133030">little</span> <span m="1133240">bit</span> <span m="1133360">of</span> <span m="1133480">a</span> <span m="1133510">forward</span> <span m="1133840">reference,</span> <span m="1134140">because</span> <span m="1134320">we</span> <span m="1134410">haven't</span> <span m="1134650">said</span> <span m="1134830">exactly</span> <span m="1135250">how</span> <span m="1135340">we're</span> <span m="1135430">going</span> <span m="1135580">to</span> <span m="1135640">change</span> <span m="1135880">the</span> <span m="1135940">tree</span> <span m="1136180">yet.</span> <span m="1136390">But</span> <span m="1136750">question?</span></p>
<p><span m="1137710">AUDIENCE:</span> <span m="1137860">If</span> <span m="1138450">node.size</span> <span m="1139450">is</span> <span m="1139862">recursive,</span> <span m="1141100">then</span> <span m="1141430">how is it</span> <span m="1141895">happening</span> <span m="1142360">in constant</span> <span m="1142825">time?</span> <span m="1143290">Wouldn't it be happening</span> <span m="1143755">[INAUDIBLE]?</span></p>
<p><span m="1145150">ERIK DEMAINE:</span> <span m="1145315">Why</span> <span m="1145480">is</span> <span m="1145630">this--</span> <span m="1145930">OK,</span> <span m="1146260">good</span> <span m="1146440">question.</span> <span m="1147290">So</span> <span m="1147640">one</span> <span m="1147970">natural</span> <span m="1148360">way,</span> <span m="1148630">you</span> <span m="1148780">can</span> <span m="1148900">think</span> <span m="1149080">of</span> <span m="1149170">this</span> <span m="1149380">as</span> <span m="1149620">a</span> <span m="1149740">recursion,</span> <span m="1150430">which</span> <span m="1150610">gives</span> <span m="1150760">you</span> <span m="1150850">a</span> <span m="1150880">recursive</span> <span m="1151390">algorithm.</span> <span m="1152750">So</span> <span m="1153100">I</span> <span m="1153310">wrote--</span> <span m="1153620">but</span> <span m="1153990">didn't</span> <span m="1154240">write</span> <span m="1154480">it.</span> <span m="1154780">But</span> <span m="1155020">I</span> <span m="1155080">could</span> <span m="1155200">have</span> <span m="1155320">written</span> <span m="1155560">size</span> <span m="1156040">of</span> <span m="1156280">node</span> <span m="1156790">equals</span> <span m="1157270">this--</span> <span m="1158140">size</span> <span m="1158530">of</span> <span m="1158740">node.left</span> <span m="1159310">plus--</span> <span m="1159580">and</span> <span m="1159760">that</span> <span m="1159910">would</span> <span m="1160060">give</span> <span m="1160240">you</span> <span m="1160330">a</span> <span m="1160390">linear</span> <span m="1160750">time</span> <span m="1161020">algorithm</span> <span m="1161410">to</span> <span m="1161530">count</span> <span m="1161830">the</span> <span m="1161920">size.</span> <span m="1163030">And</span> <span m="1163300">if</span> <span m="1163420">you</span> <span m="1163510">don't</span> <span m="1163750">have</span> <span m="1163900">any</span> <span m="1164110">information,</span> <span m="1164710">that</span> <span m="1165040">is</span> <span m="1166690">what</span> <span m="1166900">you</span> <span m="1167020">would</span> <span m="1167110">do.</span> <span m="1167320">And</span> <span m="1167410">that</span> <span m="1167500">would</span> <span m="1167590">be</span> <span m="1167710">very</span> <span m="1167920">painful.</span> <span m="1168510">So</span> <span m="1168580">that</span> <span m="1168730">would</span> <span m="1168850">make</span> <span m="1169030">this</span> <span m="1169210">algorithm</span> <span m="1169600">really</span> <span m="1169840">slow.</span> <span m="1170200">If</span> <span m="1170410">I'm</span> <span m="1170620">calling</span> <span m="1170950">size</span> <span m="1171280">as</span> <span m="1171370">a</span> <span m="1171490">recursive</span> <span m="1171970">function,</span> <span m="1172340">it's</span> <span m="1172420">bad.</span></p>
<p><span m="1173860">What</span> <span m="1174070">I'm</span> <span m="1174190">instead</span> <span m="1174580">doing</span> <span m="1174970">is</span> <span m="1175150">storing</span> <span m="1175780">the</span> <span m="1175840">sizes</span> <span m="1176410">on</span> <span m="1176620">every</span> <span m="1177040">single</span> <span m="1177430">node</span> <span m="1179170">and</span> <span m="1179830">pre-computing</span> <span m="1180640">this.</span> <span m="1181510">So</span> <span m="1181720">in</span> <span m="1181810">fact,</span> <span m="1182300">I'm</span> <span m="1182380">going</span> <span m="1182590">to</span> <span m="1182740">define</span> <span m="1183840">the</span> <span m="1184540">size</span> <span m="1184960">of</span> <span m="1185080">node</span> <span m="1185620">in--</span> <span m="1186220">so</span> <span m="1186460">this</span> <span m="1186640">is</span> <span m="1186730">the</span> <span m="1186820">definition</span> <span m="1187540">mathematically.</span> <span m="1188440">But</span> <span m="1188620">the</span> <span m="1188740">algorithm</span> <span m="1189250">for</span> <span m="1189400">this</span> <span m="1189580">function</span> <span m="1190000">is</span> <span m="1190180">just</span> <span m="1190360">going</span> <span m="1190540">to</span> <span m="1190630">be</span> <span m="1191020">return</span> <span m="1191560">node.size.</span> <span m="1193600">So</span> <span m="1193780">that's</span> <span m="1194020">constant</span> <span m="1194350">time.</span></p>
<p><span m="1195610">So</span> <span m="1196120">the</span> <span m="1196330">challenge</span> <span m="1196780">now</span> <span m="1196930">is</span> <span m="1197050">I</span> <span m="1197140">have</span> <span m="1197260">to</span> <span m="1197350">keep</span> <span m="1197500">these</span> <span m="1197620">sizes</span> <span m="1197950">up</span> <span m="1198100">to</span> <span m="1198190">date,</span> <span m="1198470">no</span> <span m="1198550">matter</span> <span m="1198880">what</span> <span m="1199060">I</span> <span m="1199180">do</span> <span m="1199330">to</span> <span m="1199480">the</span> <span m="1199600">tree.</span> <span m="1200470">And</span> <span m="1200830">you</span> <span m="1200980">could</span> <span m="1201130">look</span> <span m="1201310">back</span> <span m="1201670">at</span> <span m="1201910">last</span> <span m="1202150">lecture</span> <span m="1202450">and</span> <span m="1202570">see,</span> <span m="1202750">OK,</span> <span m="1203050">what</span> <span m="1203290">were</span> <span m="1203410">all</span> <span m="1203590">the</span> <span m="1203680">changes</span> <span m="1204190">that</span> <span m="1204340">I</span> <span m="1204430">did</span> <span m="1204640">in</span> <span m="1204760">a</span> <span m="1204820">tree?</span> <span m="1206500">We</span> <span m="1206770">only</span> <span m="1207010">did</span> <span m="1207160">changes</span> <span m="1207550">during</span> <span m="1207790">insert</span> <span m="1208120">and</span> <span m="1208210">delete.</span> <span m="1209620">And</span> <span m="1209980">I</span> <span m="1210160">will</span> <span m="1210310">just</span> <span m="1211120">claim</span> <span m="1211480">to</span> <span m="1211630">you,</span> <span m="1212290">when</span> <span m="1212590">we</span> <span m="1212800">did</span> <span m="1213610">insert</span> <span m="1214090">and</span> <span m="1214180">delete,</span> <span m="1216940">what</span> <span m="1217210">they</span> <span m="1217420">ended</span> <span m="1217750">up</span> <span m="1217960">doing</span> <span m="1220900">in</span> <span m="1221140">the</span> <span m="1221260">end,</span> <span m="1222640">they</span> <span m="1223840">add</span> <span m="1224440">or</span> <span m="1224650">remove</span> <span m="1227620">a</span> <span m="1227830">leaf</span> <span m="1228490">of</span> <span m="1228700">the</span> <span m="1228790">tree.</span> <span m="1235050">Remember,</span> <span m="1235380">a leaf</span> <span m="1235650">was</span> <span m="1235800">a</span> <span m="1235830">node</span> <span m="1236040">with</span> <span m="1236160">no</span> <span m="1236280">children.</span></p>
<p><span m="1239170">So</span> <span m="1239370">let's</span> <span m="1239520">just</span> <span m="1239670">think</span> <span m="1239850">about</span> <span m="1240210">if</span> <span m="1240420">I</span> <span m="1240540">add</span> <span m="1240810">a</span> <span m="1240870">new</span> <span m="1241140">leaf</span> <span m="1241530">in</span> <span m="1241770">a</span> <span m="1241830">tree--</span> <span m="1242730">here's</span> <span m="1242970">a</span> <span m="1243030">tree,</span> <span m="1243600">suppose</span> <span m="1244020">I</span> <span m="1244080">add</span> <span m="1244260">a</span> <span m="1244290">leaf</span> <span m="1244530">here--</span> <span m="1245440">which</span> <span m="1245700">subtrees</span> <span m="1246360">change?</span> <span m="1248160">Well,</span> <span m="1249310">which</span> <span m="1249720">subtrees</span> <span m="1250350">contain</span> <span m="1250800">that</span> <span m="1250980">node?</span> <span m="1252570">It</span> <span m="1252750">is</span> <span m="1252870">its</span> <span m="1253020">own</span> <span m="1253170">new</span> <span m="1253320">subtree.</span> <span m="1254040">Then</span> <span m="1255210">it's</span> <span m="1255930">in</span> <span m="1256050">its</span> <span m="1256170">parent</span> <span m="1256530">subtree,</span> <span m="1256890">and</span> <span m="1257040">its</span> <span m="1257160">grandparent</span> <span m="1257540">subtree,</span> <span m="1258480">and</span> <span m="1258990">the</span> <span m="1259230">overall</span> <span m="1259590">subtree.</span> <span m="1260970">In</span> <span m="1261060">general,</span> <span m="1261360">these</span> <span m="1261660">nodes</span> <span m="1262050">are</span> <span m="1262230">called</span> <span m="1262530">the</span> <span m="1262740">ancestors</span> <span m="1264240">of</span> <span m="1264510">this</span> <span m="1264870">node</span> <span m="1265140">that</span> <span m="1265260">we</span> <span m="1265410">added.</span> <span m="1266250">And</span> <span m="1266520">those</span> <span m="1266850">are</span> <span m="1266910">the</span> <span m="1267000">ones</span> <span m="1267240">that</span> <span m="1267360">update.</span></p>
<p><span m="1267930">This</span> <span m="1268380">subtree</span> <span m="1268560">over</span> <span m="1268770">here</span> <span m="1269020">didn't</span> <span m="1269340">change.</span> <span m="1270360">It</span> <span m="1270540">didn't</span> <span m="1270810">change</span> <span m="1271110">size.</span> <span m="1271560">And</span> <span m="1271800">because</span> <span m="1272640">it's</span> <span m="1272940">a</span> <span m="1273000">subtree</span> <span m="1273360">property,</span> <span m="1273780">no</span> <span m="1274020">subtree</span> <span m="1274380">property</span> <span m="1274770">will</span> <span m="1274890">change</span> <span m="1275190">over</span> <span m="1275370">here,</span> <span m="1275520">because</span> <span m="1275700">the</span> <span m="1275820">subtree</span> <span m="1276150">was</span> <span m="1276330">untouched.</span> <span m="1278370">So</span> <span m="1281190">when</span> <span m="1281400">I</span> <span m="1281460">touch</span> <span m="1281700">this</span> <span m="1281880">guy,</span> <span m="1282150">I</span> <span m="1282330">just</span> <span m="1282540">have</span> <span m="1282630">to</span> <span m="1282750">update</span> <span m="1283140">the</span> <span m="1283420">subtree</span> <span m="1283800">property</span> <span m="1284190">here,</span> <span m="1284610">update</span> <span m="1285000">the</span> <span m="1285070">subtree</span> <span m="1285390">property</span> <span m="1285750">here,</span> <span m="1285990">update</span> <span m="1286300">subtree</span> <span m="1286650">property</span> <span m="1286980">here.</span> <span m="1287190">How</span> <span m="1287340">many</span> <span m="1287580">of</span> <span m="1287670">these</span> <span m="1287850">are</span> <span m="1287970">there?</span> <span m="1292220">Yeah?</span> <span m="1293730">h--</span> <span m="1294660">I'll</span> <span m="1295020">say</span> <span m="1295380">order</span> <span m="1295650">h</span> <span m="1295920">to</span> <span m="1296040">be</span> <span m="1296130">safe.</span> <span m="1296500">But</span> <span m="1296610">I</span> <span m="1296700">think</span> <span m="1296910">it's</span> <span m="1297060">exactly</span> <span m="1297450">h.</span> <span m="1300090">So</span> <span m="1300450">also,</span> <span m="1300780">when</span> <span m="1300900">I</span> <span m="1300990">remove</span> <span m="1301290">a</span> <span m="1301350">leaf,</span> <span m="1301680">the</span> <span m="1301800">same</span> <span m="1302100">thing--</span> <span m="1302610">if</span> <span m="1302760">I</span> <span m="1302850">remove</span> <span m="1303180">this</span> <span m="1303390">leaf,</span> <span m="1303750">then</span> <span m="1304200">the</span> <span m="1304410">subtrees</span> <span m="1304830">that</span> <span m="1304900">change</span> <span m="1305220">are</span> <span m="1305280">exactly</span> <span m="1305670">its</span> <span m="1305820">former</span> <span m="1306120">ancestors.</span></p>
<p><span m="1311430">Cool,</span> <span m="1312210">so</span> <span m="1315810">we're</span> <span m="1316050">going</span> <span m="1316170">to</span> <span m="1316260">update</span> <span m="1317490">those</span> <span m="1318330">order</span> <span m="1318660">h</span> <span m="1321360">ancestors</span> <span m="1327590">in</span> <span m="1327950">order</span> <span m="1330650">up</span> <span m="1330960">the</span> <span m="1331070">tree.</span> <span m="1333770">So</span> <span m="1333880">what</span> <span m="1334030">do</span> <span m="1334120">I</span> <span m="1334240">mean</span> <span m="1335170">by</span> <span m="1335410">update?</span> <span m="1335950">I</span> <span m="1336130">mean</span> <span m="1336820">apply</span> <span m="1337450">this</span> <span m="1337720">rule.</span> <span m="1338740">For</span> <span m="1339580">size,</span> <span m="1340150">it's</span> <span m="1340900">this</span> <span m="1341170">rule.</span> <span m="1341810">But</span> <span m="1342190">in</span> <span m="1342310">general,</span> <span m="1342700">the</span> <span m="1342790">subtree</span> <span m="1343120">property</span> <span m="1343540">gives</span> <span m="1343870">me</span> <span m="1343990">an</span> <span m="1344080">update</span> <span m="1344440">rule</span> <span m="1344620">that</span> <span m="1344740">takes</span> <span m="1344980">constant</span> <span m="1345400">time.</span></p>
<p><span m="1346250">And</span> <span m="1346390">so</span> <span m="1346600">I'm</span> <span m="1346780">going</span> <span m="1346990">to</span> <span m="1347080">apply</span> <span m="1347500">that</span> <span m="1347710">update</span> <span m="1348070">rule</span> <span m="1348820">to</span> <span m="1349060">this</span> <span m="1349270">node,</span> <span m="1350150">which</span> <span m="1350320">will</span> <span m="1350860">fix</span> <span m="1351310">whatever</span> <span m="1351760">property</span> <span m="1352210">is</span> <span m="1352270">stored</span> <span m="1352570">in</span> <span m="1352660">there.</span> <span m="1353560">Maybe</span> <span m="1353890">there's</span> <span m="1354040">more</span> <span m="1354160">than</span> <span m="1354280">one</span> <span m="1354430">property.</span> <span m="1355150">And</span> <span m="1355360">then</span> <span m="1355510">I'll</span> <span m="1355600">apply</span> <span m="1355840">it</span> <span m="1355900">to</span> <span m="1356020">this</span> <span m="1356200">node.</span> <span m="1356630">And</span> <span m="1356770">because</span> <span m="1357220">this</span> <span m="1357430">is</span> <span m="1357580">already</span> <span m="1357910">correct</span> <span m="1359020">by</span> <span m="1359290">induction,</span> <span m="1360040">and</span> <span m="1360310">this</span> <span m="1360520">is</span> <span m="1360670">already</span> <span m="1360940">correct</span> <span m="1361270">because</span> <span m="1361570">I</span> <span m="1361630">didn't</span> <span m="1361900">touch</span> <span m="1362290">this</span> <span m="1362470">subtree--</span> <span m="1362725">it's</span> <span m="1362980">unchanged--</span> <span m="1364030">then</span> <span m="1364360">I</span> <span m="1364540">can</span> <span m="1364990">update</span> <span m="1365470">the</span> <span m="1365560">value</span> <span m="1366040">at</span> <span m="1366250">this</span> <span m="1366460">node--</span> <span m="1366790">the</span> <span m="1366880">property</span> <span m="1367240">at</span> <span m="1367510">this</span> <span m="1367690">node</span> <span m="1368080">in</span> <span m="1368290">constant</span> <span m="1368620">time.</span> <span m="1369160">Then</span> <span m="1369430">I</span> <span m="1369550">update</span> <span m="1369910">this</span> <span m="1370090">one.</span> <span m="1371200">And</span> <span m="1371500">because</span> <span m="1371860">this</span> <span m="1372010">one</span> <span m="1372160">is</span> <span m="1372280">already</span> <span m="1372490">correct</span> <span m="1372850">by</span> <span m="1373000">induction,</span> <span m="1373810">and</span> <span m="1374110">this</span> <span m="1374260">one</span> <span m="1374380">is</span> <span m="1374470">already</span> <span m="1374680">correct</span> <span m="1374920">because</span> <span m="1375130">this</span> <span m="1375250">subtree</span> <span m="1375670">is</span> <span m="1375760">unchanged,</span> <span m="1376390">I</span> <span m="1376600">can</span> <span m="1377110">update</span> <span m="1377560">the</span> <span m="1377620">property</span> <span m="1378130">correctly</span> <span m="1378610">here</span> <span m="1378880">in</span> <span m="1379030">constant</span> <span m="1379345">time.</span></p>
<p><span m="1380500">So</span> <span m="1380650">when</span> <span m="1380800">I</span> <span m="1380860">make</span> <span m="1381040">a</span> <span m="1381100">change</span> <span m="1381490">in</span> <span m="1381670">order</span> <span m="1381910">h</span> <span m="1382180">time,</span> <span m="1383170">because</span> <span m="1383410">I'm</span> <span m="1383560">making</span> <span m="1383890">h</span> <span m="1384160">calls</span> <span m="1384640">to</span> <span m="1384820">this</span> <span m="1385030">constant</span> <span m="1385330">time</span> <span m="1385630">algorithm,</span> <span m="1386200">I</span> <span m="1386380">can</span> <span m="1386530">update</span> <span m="1387100">a</span> <span m="1387310">constant</span> <span m="1387670">number</span> <span m="1388000">of</span> <span m="1388360">subtree</span> <span m="1388870">properties.</span> <span m="1391570">This</span> <span m="1391840">is</span> <span m="1391960">very</span> <span m="1392230">powerful.</span> <span m="1392620">Data</span> <span m="1392830">structure</span> <span m="1393130">augmentation</span> <span m="1393385">is</span> <span m="1393640">super</span> <span m="1393940">useful.</span> <span m="1394700">You</span> <span m="1394750">will</span> <span m="1394870">use</span> <span m="1395020">it</span> <span m="1395110">on</span> <span m="1395230">your</span> <span m="1395320">problem</span> <span m="1395680">set.</span> <span m="1396160">We</span> <span m="1396340">will</span> <span m="1396460">use</span> <span m="1396610">it</span> <span m="1396700">again</span> <span m="1396940">today.</span></p>
<p><span m="1399080">Let</span> <span m="1399220">me</span> <span m="1399370">give</span> <span m="1399580">you</span> <span m="1399700">some</span> <span m="1400060">examples</span> <span m="1400930">of</span> <span m="1401410">subtree</span> <span m="1401830">properties.</span> <span m="1407980">They</span> <span m="1408310">could</span> <span m="1408670">be--</span> <span m="1409840">common</span> <span m="1410230">ones</span> <span m="1410620">are,</span> <span m="1410980">like,</span> <span m="1411760">the</span> <span m="1411940">sum,</span> <span m="1413050">or</span> <span m="1413500">the</span> <span m="1413740">product,</span> <span m="1415060">or</span> <span m="1415360">the</span> <span m="1415510">min,</span> <span m="1416800">or</span> <span m="1417040">the</span> <span m="1417160">max,</span> <span m="1420790">or</span> <span m="1421150">sum</span> <span m="1421420">of</span> <span m="1421510">squares,</span> <span m="1422290">or</span> <span m="1422500">all</span> <span m="1422620">sorts</span> <span m="1422890">of</span> <span m="1422950">things,</span> <span m="1423640">of</span> <span m="1424480">some</span> <span m="1426430">feature</span> <span m="1430090">of</span> <span m="1430600">every</span> <span m="1431050">node</span> <span m="1431500">in the</span> <span m="1431800">subtree.</span> <span m="1437860">In</span> <span m="1438010">fact,</span> <span m="1439390">subtree</span> <span m="1439750">size</span> <span m="1440140">is</span> <span m="1440230">an</span> <span m="1440350">example</span> <span m="1440770">of</span> <span m="1440830">such</span> <span m="1441040">a</span> <span m="1441100">thing.</span> <span m="1441310">It</span> <span m="1441490">is</span> <span m="1441670">the</span> <span m="1441850">sum</span> <span m="1442420">over</span> <span m="1442720">all</span> <span m="1442960">nodes</span> <span m="1443230">in</span> <span m="1443320">the</span> <span m="1443380">subtree</span> <span m="1443830">of</span> <span m="1444010">the</span> <span m="1444100">value</span> <span m="1444610">1.</span> <span m="1445990">It's</span> <span m="1446140">another</span> <span m="1446440">way</span> <span m="1446530">to</span> <span m="1446620">say</span> <span m="1446800">count</span> <span m="1447100">the</span> <span m="1447160">number</span> <span m="1447430">of</span> <span m="1447520">nodes.</span></p>
<p><span m="1448510">But</span> <span m="1448630">you</span> <span m="1448720">could</span> <span m="1448870">also</span> <span m="1449110">say,</span> <span m="1449620">what's</span> <span m="1449920">the</span> <span m="1450070">sum</span> <span m="1450460">of</span> <span m="1450580">the</span> <span m="1450700">keys</span> <span m="1451120">in</span> <span m="1451240">these</span> <span m="1451420">nodes?</span> <span m="1451780">Or</span> <span m="1452020">you</span> <span m="1452140">could</span> <span m="1452290">say,</span> <span m="1452500">what's</span> <span m="1452710">the</span> <span m="1452770">maximum</span> <span m="1453250">key</span> <span m="1453460">in</span> <span m="1453550">these</span> <span m="1453730">nodes?</span> <span m="1454030">Or</span> <span m="1454240">you</span> <span m="1454360">could</span> <span m="1454510">say,</span> <span m="1458500">what</span> <span m="1458830">is</span> <span m="1459010">the</span> <span m="1459160">maximum</span> <span m="1460630">value</span> <span m="1461200">in</span> <span m="1461320">these</span> <span m="1461470">nodes?</span> <span m="1461770">You</span> <span m="1461890">can</span> <span m="1462010">take</span> <span m="1462220">any</span> <span m="1462460">property.</span> <span m="1462820">It</span> <span m="1462880">doesn't</span> <span m="1463120">have</span> <span m="1463240">to</span> <span m="1463330">be</span> <span m="1463450">key.</span> <span m="1463900">It</span> <span m="1464110">doesn't</span> <span m="1464320">have</span> <span m="1464410">to</span> <span m="1464500">be</span> <span m="1464590">anything</span> <span m="1464890">in</span> <span m="1464980">particular.</span> <span m="1465760">It's</span> <span m="1465970">very</span> <span m="1466180">powerful.</span> <span m="1466730">You</span> <span m="1466750">can</span> <span m="1466900">take</span> <span m="1467080">all</span> <span m="1467320">sums,</span> <span m="1467650">products</span> <span m="1468100">and</span> <span m="1468220">maintain</span> <span m="1468640">them</span> <span m="1469000">as</span> <span m="1469270">long</span> <span m="1469450">as</span> <span m="1469540">they're</span> <span m="1469660">downward</span> <span m="1470050">looking--</span> <span m="1470350">as</span> <span m="1470440">long</span> <span m="1470590">as</span> <span m="1470650">you're</span> <span m="1470770">only</span> <span m="1471010">thinking</span> <span m="1471310">about</span> <span m="1471520">the</span> <span m="1471610">subtree.</span></p>
<p><span m="1473890">Some</span> <span m="1474190">examples</span> <span m="1474910">of</span> <span m="1475090">things</span> <span m="1475420">you</span> <span m="1475570">cannot</span> <span m="1476200">maintain</span> <span m="1478448">are--</span> <span m="1481880">not</span> <span m="1484220">a</span> <span m="1484640">nodes</span> <span m="1485060">index.</span> <span m="1488480">So</span> <span m="1488690">if</span> <span m="1488810">you</span> <span m="1488930">get</span> <span m="1489140">a</span> <span m="1489230">little</span> <span m="1489440">bit</span> <span m="1489560">too</span> <span m="1490250">excited</span> <span m="1490880">about</span> <span m="1491090">augmentation,</span> <span m="1491750">you</span> <span m="1491840">might</span> <span m="1491990">think,</span> <span m="1492330">oh,</span> <span m="1492440">I</span> <span m="1492530">could</span> <span m="1492680">do</span> <span m="1492830">everything.</span> <span m="1494150">I</span> <span m="1494300">needed</span> <span m="1494570">to</span> <span m="1494750">support</span> <span m="1495260">subtree_at,</span> <span m="1496490">or</span> <span m="1496700">let's</span> <span m="1496850">just</span> <span m="1497000">say,</span> <span m="1497840">get_at</span> <span m="1498410">globally,</span> <span m="1499010">I</span> <span m="1499130">wanted</span> <span m="1499370">to</span> <span m="1499430">know</span> <span m="1499580">what</span> <span m="1499790">is</span> <span m="1499910">the</span> <span m="1500030">ith</span> <span m="1500300">node</span> <span m="1500570">in</span> <span m="1500750">my</span> <span m="1500900">tree?</span> <span m="1501500">Well,</span> <span m="1502010">I'll</span> <span m="1502190">just</span> <span m="1502430">use</span> <span m="1502640">data</span> <span m="1502850">structure</span> <span m="1503180">augmentation</span> <span m="1503690">and</span> <span m="1503780">store</span> <span m="1504060">in</span> <span m="1504200">every</span> <span m="1504410">node</span> <span m="1504860">what</span> <span m="1505130">is</span> <span m="1505250">its</span> <span m="1505400">index,</span> <span m="1506120">0</span> <span m="1506570">through</span> <span m="1507260">n</span> <span m="1507530">minus</span> <span m="1507830">1.</span></p>
<p><span m="1509240">I</span> <span m="1509420">can't</span> <span m="1509870">maintain</span> <span m="1510410">that</span> <span m="1510710">efficiently.</span> <span m="1511370">Because</span> <span m="1512240">if</span> <span m="1512450">I</span> <span m="1512570">insert</span> <span m="1512960">at</span> <span m="1513140">the</span> <span m="1513230">beginning</span> <span m="1513890">of</span> <span m="1514220">my</span> <span m="1514430">traversal</span> <span m="1514880">order,</span> <span m="1515480">then</span> <span m="1516020">all</span> <span m="1516380">the</span> <span m="1516500">indices</span> <span m="1516950">change.</span> <span m="1518340">So</span> <span m="1518660">that's</span> <span m="1518900">an</span> <span m="1518990">example</span> <span m="1519690">of</span> <span m="1520010">a</span> <span m="1520430">edit.</span> <span m="1520910">So</span> <span m="1521210">if</span> <span m="1521390">I</span> <span m="1521540">insert</span> <span m="1521960">a</span> <span m="1522050">new</span> <span m="1522200">node</span> <span m="1522410">over</span> <span m="1522620">here,</span> <span m="1523530">so</span> <span m="1523790">this</span> <span m="1523970">guy's</span> <span m="1524210">index</span> <span m="1524510">was</span> <span m="1524750">0,</span> <span m="1525050">now</span> <span m="1525230">it's</span> <span m="1525350">1.</span> <span m="1525650">This</span> <span m="1525860">guy's</span> <span m="1526190">index</span> <span m="1526520">was</span> <span m="1526730">1,</span> <span m="1526950">now</span> <span m="1527120">it's</span> <span m="1527270">2.</span> <span m="1527780">This</span> <span m="1528050">was</span> <span m="1528290">2,</span> <span m="1528500">now</span> <span m="1528680">it's</span> <span m="1528830">3,</span> <span m="1529070">and</span> <span m="1529160">so</span> <span m="1529310">on.</span> <span m="1529430">Every</span> <span m="1529760">node</span> <span m="1530000">changes</span> <span m="1530420">its</span> <span m="1530570">index.</span> <span m="1531380">Index</span> <span m="1531830">is</span> <span m="1532010">not</span> <span m="1532460">a</span> <span m="1532580">subtree</span> <span m="1532970">property,</span> <span m="1533420">and</span> <span m="1533570">that's</span> <span m="1533750">why</span> <span m="1533930">we</span> <span m="1534050">can't</span> <span m="1534290">maintain</span> <span m="1534680">it.</span> <span m="1535280">Because</span> <span m="1535760">it</span> <span m="1535880">depends</span> <span m="1536300">on</span> <span m="1536450">all</span> <span m="1536720">of</span> <span m="1536840">the</span> <span m="1536900">nodes</span> <span m="1537170">in</span> <span m="1537260">the</span> <span m="1537350">tree.</span> <span m="1537620">Or</span> <span m="1537740">it</span> <span m="1537830">depends</span> <span m="1538160">on</span> <span m="1538280">all</span> <span m="1538400">the</span> <span m="1538460">nodes</span> <span m="1538700">to</span> <span m="1538850">its</span> <span m="1538970">left--</span> <span m="1539330">all</span> <span m="1539450">the</span> <span m="1539540">predecessors.</span></p>
<p><span m="1540900">So</span> <span m="1540980">for</span> <span m="1541070">example,</span> <span m="1541460">this</span> <span m="1541700">guy's</span> <span m="1541970">index</span> <span m="1542810">depends</span> <span m="1543440">on</span> <span m="1543800">how</span> <span m="1543980">many</span> <span m="1544190">nodes</span> <span m="1544460">are</span> <span m="1544550">over</span> <span m="1544730">here</span> <span m="1544910">on</span> <span m="1545000">the</span> <span m="1545060">left,</span> <span m="1545550">which</span> <span m="1545690">is</span> <span m="1545810">not</span> <span m="1546140">in</span> <span m="1546290">the</span> <span m="1546380">subtree</span> <span m="1546800">of</span> <span m="1546890">that</span> <span m="1547040">node.</span> <span m="1547980">So</span> <span m="1548090">that's</span> <span m="1548240">where</span> <span m="1548330">you</span> <span m="1548390">have</span> <span m="1548480">to</span> <span m="1548570">be</span> <span m="1548660">careful.</span> <span m="1550400">Don't</span> <span m="1550730">use</span> <span m="1550910">global</span> <span m="1551270">properties</span> <span m="1551720">of</span> <span m="1551780">the</span> <span m="1551870">tree.</span> <span m="1552630">You</span> <span m="1552730">can</span> <span m="1552770">only</span> <span m="1553070">use</span> <span m="1555170">subtree</span> <span m="1555650">properties.</span></p>
<p><span m="1557760">Another</span> <span m="1557990">example</span> <span m="1558620">is</span> <span m="1559280">depth.</span> <span m="1561755">Depth</span> <span m="1562250">Is</span> <span m="1563720">annoying</span> <span m="1564260">to</span> <span m="1564410">maintain,</span> <span m="1566180">but</span> <span m="1566570">it's</span> <span m="1566840">not</span> <span m="1567020">obvious</span> <span m="1567440">why</span> <span m="1567800">yet.</span> <span m="1568220">We</span> <span m="1568370">will</span> <span m="1568520">see</span> <span m="1568670">that</span> <span m="1569120">in</span> <span m="1569330">a</span> <span m="1569390">moment.</span></p>
<p><span m="1574610">The</span> <span m="1574880">rest</span> <span m="1575210">of</span> <span m="1575300">today</span> <span m="1575750">is</span> <span m="1575960">about</span> <span m="1576380">going</span> <span m="1576770">from</span> <span m="1578060">order</span> <span m="1578330">h</span> <span m="1579710">order</span> <span m="1579980">log</span> <span m="1580220">n,</span> <span m="1581270">which</span> <span m="1581600">is</span> <span m="1582170">what</span> <span m="1582440">this</span> <span m="1582650">slide</span> <span m="1583100">is</span> <span m="1583190">showing</span> <span m="1583520">us.</span> <span m="1583770">So</span> <span m="1584300">at</span> <span m="1584540">this</span> <span m="1584690">point,</span> <span m="1585000">you</span> <span m="1585100">should</span> <span m="1585110">believe</span> <span m="1585470">that</span> <span m="1585590">we</span> <span m="1585710">can</span> <span m="1585830">do</span> <span m="1586010">all</span> <span m="1586460">of</span> <span m="1586790">the</span> <span m="1586970">sequence</span> <span m="1587750">data</span> <span m="1587990">structure</span> <span m="1588320">operations</span> <span m="1589130">in</span> <span m="1589400">order</span> <span m="1589640">h</span> <span m="1589880">time--</span> <span m="1590180">except</span> <span m="1590480">for</span> <span m="1590600">build</span> <span m="1590900">and</span> <span m="1590990">iterate,</span> <span m="1591320">which</span> <span m="1591470">take</span> <span m="1591620">linear</span> <span m="1591860">time--</span> <span m="1593130">and</span> <span m="1593570">that</span> <span m="1593720">we</span> <span m="1593840">can</span> <span m="1593960">do</span> <span m="1594080">all</span> <span m="1594290">of</span> <span m="1594380">the</span> <span m="1594470">set</span> <span m="1594740">operations</span> <span m="1595760">in</span> <span m="1596060">order</span> <span m="1596300">h</span> <span m="1596510">time,</span> <span m="1596750">except</span> <span m="1597140">build</span> <span m="1597410">and</span> <span m="1597500">iterate,</span> <span m="1597830">which</span> <span m="1598010">take</span> <span m="1598460">n</span> <span m="1598700">log</span> <span m="1598880">n</span> <span m="1599060">and n</span> <span m="1599480">respectively.</span> <span m="1600620">And</span> <span m="1601220">our</span> <span m="1601400">goal</span> <span m="1601790">is</span> <span m="1601940">to</span> <span m="1602060">now</span> <span m="1603200">bound</span> <span m="1608930">h</span> <span m="1609320">by</span> <span m="1609530">log</span> <span m="1609800">n.</span></p>
<p><span m="1610790">We</span> <span m="1611000">know</span> <span m="1611150">it's</span> <span m="1611300">possible</span> <span m="1612830">at</span> <span m="1613070">some</span> <span m="1613310">level,</span> <span m="1613670">because</span> <span m="1614090">there</span> <span m="1614270">are</span> <span m="1614480">trees</span> <span m="1615920">that</span> <span m="1616190">have</span> <span m="1616520">logarithmic</span> <span m="1617120">height.</span> <span m="1617450">That's</span> <span m="1617930">like</span> <span m="1618140">this</span> <span m="1618320">perfect</span> <span m="1618650">tree</span> <span m="1618860">here.</span> <span m="1620570">But</span> <span m="1620780">we</span> <span m="1620900">also</span> <span m="1621200">know</span> <span m="1621410">we</span> <span m="1621560">have</span> <span m="1621680">to</span> <span m="1621770">be</span> <span m="1621860">careful,</span> <span m="1622190">because</span> <span m="1622550">there</span> <span m="1622640">are</span> <span m="1622700">some</span> <span m="1622940">bad</span> <span m="1623180">trees,</span> <span m="1623510">like</span> <span m="1623720">this</span> <span m="1623930">chain.</span> <span m="1627170">So</span> <span m="1629860">if</span> <span m="1630220">h</span> <span m="1630550">equals</span> <span m="1630850">log</span> <span m="1631090">n,</span> <span m="1631660">we</span> <span m="1631840">call</span> <span m="1632080">this</span> <span m="1632800">a</span> <span m="1633040">balanced</span> <span m="1634420">binary</span> <span m="1634810">tree.</span> <span m="1639430">There</span> <span m="1639670">are</span> <span m="1639730">many</span> <span m="1640090">balanced</span> <span m="1640480">binary</span> <span m="1640840">trees</span> <span m="1641200">in</span> <span m="1641350">the</span> <span m="1641410">world,</span> <span m="1641740">maybe</span> <span m="1642010">a</span> <span m="1642100">dozen</span> <span m="1642640">or</span> <span m="1642820">two--</span> <span m="1644680">a</span> <span m="1644770">lot</span> <span m="1644950">of</span> <span m="1645010">different</span> <span m="1645250">data</span> <span m="1645400">structures.</span> <span m="1645760">Question?</span></p>
<p><span m="1646180">AUDIENCE:</span> <span m="1646420">[INAUDIBLE]</span> <span m="1647142">you</span> <span m="1648104">said</span> <span m="1648585">not to</span> <span m="1649066">think about</span> <span m="1649547">things</span> <span m="1650028">on a global</span> <span m="1650509">level</span> <span m="1650990">so we'll think of them</span> <span m="1651471">[INAUDIBLE].</span> <span m="1652433">Can you explain</span> <span m="1652914">what that</span> <span m="1653395">means</span> <span m="1653876">a little</span> <span m="1654357">more?</span></p>
<p><span m="1654850">ERIK DEMAINE:</span> <span m="1655030">OK,</span> <span m="1655210">what</span> <span m="1655360">does</span> <span m="1655480">it</span> <span m="1655600">mean</span> <span m="1655840">for</span> <span m="1656050">a</span> <span m="1656080">property</span> <span m="1656560">to</span> <span m="1656650">be</span> <span m="1657610">local</span> <span m="1658000">to</span> <span m="1658150">a</span> <span m="1658210">subtree</span> <span m="1658690">versus</span> <span m="1659560">global?</span> <span m="1660520">The</span> <span m="1660640">best</span> <span m="1660970">answer</span> <span m="1661270">is</span> <span m="1661840">this</span> <span m="1662200">definition.</span> <span m="1663220">But</span> <span m="1663520">that's</span> <span m="1663730">maybe</span> <span m="1663970">not</span> <span m="1664120">the</span> <span m="1664210">most</span> <span m="1664390">intuitive</span> <span m="1664750">definition.</span> <span m="1665200">This</span> <span m="1665380">is</span> <span m="1665500">what</span> <span m="1665650">I</span> <span m="1665740">mean.</span> <span m="1665980">Something</span> <span m="1666340">that</span> <span m="1666460">can</span> <span m="1666580">be</span> <span m="1666760">computed</span> <span m="1667540">just</span> <span m="1667930">knowing</span> <span m="1668290">information</span> <span m="1668830">about</span> <span m="1669010">your</span> <span m="1669130">left</span> <span m="1669340">and</span> <span m="1669430">right</span> <span m="1669550">children,</span> <span m="1670240">that</span> <span m="1670570">is</span> <span m="1670780">the</span> <span m="1670930">meaning</span> <span m="1671350">of</span> <span m="1671440">such</span> <span m="1671680">a</span> <span m="1671740">property.</span> <span m="1672220">And</span> <span m="1672340">those</span> <span m="1672520">are</span> <span m="1672610">the</span> <span m="1672700">only</span> <span m="1672940">things</span> <span m="1673150">you're</span> <span m="1673240">allowed</span> <span m="1673450">to</span> <span m="1673570">maintain.</span> <span m="1673990">Because</span> <span m="1674335">those</span> <span m="1674680">are</span> <span m="1674800">the</span> <span m="1674920">only</span> <span m="1675250">things</span> <span m="1677320">that</span> <span m="1677530">are</span> <span m="1677620">easy</span> <span m="1677950">to</span> <span m="1678190">update</span> <span m="1678640">by</span> <span m="1678850">walking</span> <span m="1679180">up</span> <span m="1679300">this</span> <span m="1679480">path.</span></p>
<p><span m="1680500">And</span> <span m="1680920">the</span> <span m="1681100">contrast</span> <span m="1681760">is</span> <span m="1681940">that</span> <span m="1682390">global</span> <span m="1682870">property</span> <span m="1683410">like</span> <span m="1684040">index,</span> <span m="1686050">it's</span> <span m="1686380">global,</span> <span m="1686830">in</span> <span m="1686980">particular,</span> <span m="1687490">because</span> <span m="1687850">I</span> <span m="1688000">can</span> <span m="1688150">do</span> <span m="1688600">one</span> <span m="1688990">change,</span> <span m="1689440">add</span> <span m="1689650">one</span> <span m="1690490">node,</span> <span m="1690850">and</span> <span m="1691330">all</span> <span m="1691720">of</span> <span m="1691810">the</span> <span m="1691900">node's</span> <span m="1692140">properties</span> <span m="1692590">change.</span> <span m="1693030">So</span> <span m="1693100">that's</span> <span m="1693280">an</span> <span m="1693370">extreme</span> <span m="1693910">example</span> <span m="1694270">of</span> <span m="1694390">global.</span> <span m="1695470">We</span> <span m="1695680">want</span> <span m="1695890">this</span> <span m="1696040">very</span> <span m="1696250">particular</span> <span m="1696910">notion</span> <span m="1697270">of</span> <span m="1697420">local,</span> <span m="1700180">because</span> <span m="1700540">that's</span> <span m="1700780">what</span> <span m="1700900">we</span> <span m="1700990">can</span> <span m="1701200">actually</span> <span m="1701530">afford</span> <span m="1701860">to</span> <span m="1702310">recompute.</span> <span m="1703570">Hopefully</span> <span m="1703840">that</span> <span m="1704050">clarifies.</span> <span m="1704920">Yeah?</span></p>
<p><span m="1707008">AUDIENCE:</span> <span m="1707224">Doesn't</span> <span m="1707440">size</span> <span m="1707735">not</span> <span m="1708030">work</span> <span m="1708280">with</span> <span m="1708510">that</span> <span m="1709400">[INAUDIBLE]?</span></p>
<p><span m="1711630">ERIK DEMAINE:</span> <span m="1711765">You're</span> <span m="1711900">right</span> <span m="1712170">that</span> <span m="1712350">if</span> <span m="1712590">we</span> <span m="1712980">added--</span> <span m="1713700">oh,</span> <span m="1713880">no.</span> <span m="1714360">OK,</span> <span m="1714600">let's</span> <span m="1714750">think</span> <span m="1714900">about</span> <span m="1715110">that.</span> <span m="1715380">If</span> <span m="1715620">we</span> <span m="1715740">added</span> <span m="1716070">a</span> <span m="1716130">new</span> <span m="1716340">parent</span> <span m="1716760">to</span> <span m="1716910">the</span> <span m="1717000">tree--</span> <span m="1717340">this</span> <span m="1717390">is</span> <span m="1717480">not</span> <span m="1717660">something</span> <span m="1718050">that</span> <span m="1718200">we've</span> <span m="1718380">ever</span> <span m="1718560">done.</span> <span m="1720600">But</span> <span m="1720870">even</span> <span m="1721140">if</span> <span m="1721260">we</span> <span m="1721380">did</span> <span m="1721620">that,</span> <span m="1722250">which</span> <span m="1722610">subtrees</span> <span m="1723120">change?</span> <span m="1724500">Only</span> <span m="1724890">this</span> <span m="1725100">one.</span></p>
<p><span m="1727740">This</span> <span m="1728010">node,</span> <span m="1728310">it's</span> <span m="1728880">a</span> <span m="1729210">totally</span> <span m="1729540">new</span> <span m="1729660">subtree.</span> <span m="1730410">But</span> <span m="1730560">the</span> <span m="1730650">subtree</span> <span m="1731010">of</span> <span m="1731100">this</span> <span m="1731280">node</span> <span m="1731490">is</span> <span m="1731580">completely</span> <span m="1732090">unchanged.</span> <span m="1732780">Because</span> <span m="1733125">subtrees</span> <span m="1733470">are</span> <span m="1733560">always</span> <span m="1733800">downward</span> <span m="1734130">looking,</span> <span m="1734380">if</span> <span m="1734490">I</span> <span m="1734580">added</span> <span m="1734850">a</span> <span m="1734910">new</span> <span m="1735210">root,</span> <span m="1737100">I</span> <span m="1737280">didn't</span> <span m="1737490">change</span> <span m="1737700">any</span> <span m="1737850">subtrees</span> <span m="1738270">except</span> <span m="1738510">for</span> <span m="1738660">one.</span> <span m="1739890">So</span> <span m="1740100">size</span> <span m="1740430">is</span> <span m="1740700">a</span> <span m="1740760">subtree</span> <span m="1741120">property.</span></p>
<p><span m="1741790">Now,</span> <span m="1741900">there</span> <span m="1742080">are--</span> <span m="1743490">I</span> <span m="1743700">mean,</span> <span m="1743910">I</span> <span m="1744000">could</span> <span m="1744150">completely</span> <span m="1744720">redraw</span> <span m="1745050">the</span> <span m="1745140">tree.</span> <span m="1745530">And</span> <span m="1745800">that's</span> <span m="1746070">an</span> <span m="1746160">operation</span> <span m="1746670">that</span> <span m="1746820">requires</span> <span m="1747180">everything</span> <span m="1747510">to</span> <span m="1747600">be</span> <span m="1747760">recomputed.</span> <span m="1748980">So</span> <span m="1749130">it</span> <span m="1749220">is</span> <span m="1749370">limited</span> <span m="1749790">exactly</span> <span m="1750240">what</span> <span m="1750360">I'm</span> <span m="1750480">allowed</span> <span m="1750720">to</span> <span m="1750810">do</span> <span m="1750990">in</span> <span m="1751080">the</span> <span m="1751140">tree.</span> <span m="1751740">But</span> <span m="1751980">I</span> <span m="1752070">claim</span> <span m="1752310">everything</span> <span m="1752730">we'll</span> <span m="1752850">do,</span> <span m="1753370">last</span> <span m="1753630">class</span> <span m="1753960">and</span> <span m="1754170">today,</span> <span m="1755850">we</span> <span m="1756060">can</span> <span m="1756210">afford</span> <span m="1756660">this</span> <span m="1756840">augmentation.</span> <span m="1758410">So</span> <span m="1758550">it's</span> <span m="1758700">a</span> <span m="1759090">feature,</span> <span m="1759610">not</span> <span m="1759690">of</span> <span m="1759930">all</span> <span m="1760320">binary</span> <span m="1760650">trees</span> <span m="1760860">necessarily,</span> <span m="1761130">but</span> <span m="1761400">of</span> <span m="1761640">the</span> <span m="1761730">ones</span> <span m="1761910">that</span> <span m="1762000">we</span> <span m="1762120">would</span> <span m="1762210">cover.</span> <span m="1762600">Yeah?</span></p>
<p><span m="1762900">AUDIENCE:</span> <span m="1763025">What</span> <span m="1763150">is</span> <span m="1763275">a</span> <span m="1763400">min?</span></p>
<p><span m="1764400">ERIK DEMAINE:</span> <span m="1764505">What</span> <span m="1764610">is</span> <span m="1764730">a</span> <span m="1764820">min?</span></p>
<p><span m="1765562">AUDIENCE:</span> <span m="1765788">[INAUDIBLE]</span></p>
<p><span m="1767370">ERIK DEMAINE:</span> <span m="1767610">Binary</span> <span m="1767850">tree,</span> <span m="1769110">yeah.</span> <span m="1771360">OK,</span> <span m="1772650">this</span> <span m="1772860">will</span> <span m="1772950">make</span> <span m="1773160">a</span> <span m="1773220">little</span> <span m="1773400">more</span> <span m="1773550">sense</span> <span m="1774000">in</span> <span m="1774300">a</span> <span m="1774330">moment</span> <span m="1775260">when</span> <span m="1775530">I</span> <span m="1775620">say</span> <span m="1776130">what</span> <span m="1776400">we're</span> <span m="1776520">actually</span> <span m="1776850">going</span> <span m="1777000">to</span> <span m="1777060">do</span> <span m="1777330">with</span> <span m="1777600">trees.</span> <span m="1789060">We</span> <span m="1789270">need</span> <span m="1789510">a</span> <span m="1789570">new</span> <span m="1789750">tool</span> <span m="1790290">for</span> <span m="1790530">manipulating</span> <span m="1791130">a</span> <span m="1791190">tree.</span> <span m="1793830">What</span> <span m="1794160">we've</span> <span m="1794310">done</span> <span m="1794490">so</span> <span m="1794670">far,</span> <span m="1794880">we've</span> <span m="1795060">done</span> <span m="1795180">some</span> <span m="1795360">swapping</span> <span m="1795810">of</span> <span m="1795930">items.</span> <span m="1796530">And</span> <span m="1796860">we</span> <span m="1797040">did</span> <span m="1797580">adding</span> <span m="1798000">and</span> <span m="1798120">removing</span> <span m="1798480">a</span> <span m="1798570">leaf.</span> <span m="1799110">That's</span> <span m="1799380">not</span> <span m="1799590">enough.</span> <span m="1800010">We're</span> <span m="1800190">going</span> <span m="1800310">to</span> <span m="1800370">need</span> <span m="1800520">something</span> <span m="1800940">else</span> <span m="1801540">to</span> <span m="1801690">let</span> <span m="1801870">us</span> <span m="1801990">guarantee</span> <span m="1802830">logarithmic</span> <span m="1803430">height.</span> <span m="1805320">And</span> <span m="1805650">that</span> <span m="1805830">something</span> <span m="1806160">else</span> <span m="1806430">is</span> <span m="1806670">called</span> <span m="1807420">a</span> <span m="1807630">rotation.</span></p>
<p><span m="1812050">What</span> <span m="1812320">does this</span> <span m="1812600">something</span> <span m="1812950">else</span> <span m="1813130">need</span> <span m="1813340">to</span> <span m="1814630">do?</span> <span m="1815350">This</span> <span m="1815620">is</span> <span m="1815770">just</span> <span m="1816190">a</span> <span m="1816250">tool</span> <span m="1816610">for</span> <span m="1816790">rebalancing</span> <span m="1817420">the</span> <span m="1817510">tree.</span> <span m="1818470">So</span> <span m="1818800">it</span> <span m="1818920">should</span> <span m="1819100">not</span> <span m="1819610">change</span> <span m="1820180">the</span> <span m="1820270">data</span> <span m="1820660">that's</span> <span m="1820990">represented</span> <span m="1821590">by</span> <span m="1821740">the</span> <span m="1821830">tree.</span> <span m="1822280">What</span> <span m="1822520">is</span> <span m="1822640">the</span> <span m="1822700">data</span> <span m="1822970">represented</span> <span m="1823450">by</span> <span m="1823570">the</span> <span m="1823660">tree?</span> <span m="1824320">Traversal</span> <span m="1824860">order.</span> <span m="1825940">Traversal</span> <span m="1826420">order</span> <span m="1826720">is</span> <span m="1826990">sacrosanct.</span> <span m="1827860">We're</span> <span m="1827980">not</span> <span m="1828160">allowed</span> <span m="1828370">to</span> <span m="1828460">touch</span> <span m="1828730">it.</span> <span m="1828910">It's</span> <span m="1829180">already</span> <span m="1829540">defined</span> <span m="1830290">two</span> <span m="1830560">different</span> <span m="1830830">ways,</span> <span m="1831250">depending</span> <span m="1831670">on</span> <span m="1831730">whether</span> <span m="1831940">you're</span> <span m="1832040">using</span> <span m="1832180">a</span> <span m="1832240">set</span> <span m="1832750">or</span> <span m="1832960">sequence.</span></p>
<p><span m="1834410">So</span> <span m="1834580">we</span> <span m="1834880">want</span> <span m="1835120">to</span> <span m="1835210">modify</span> <span m="1835840">the</span> <span m="1835960">tree</span> <span m="1836200">in</span> <span m="1836320">a</span> <span m="1836350">way</span> <span m="1836530">that</span> <span m="1836650">doesn't</span> <span m="1837130">modify</span> <span m="1837970">the</span> <span m="1838150">traversal</span> <span m="1838570">order.</span> <span m="1839380">So</span> <span m="1840130">we're</span> <span m="1840410">exploiting</span> <span m="1840910">redundancy.</span> <span m="1841510">If</span> <span m="1841690">you</span> <span m="1841840">wrote</span> <span m="1842110">down</span> <span m="1842350">the</span> <span m="1842470">traversal</span> <span m="1842740">order</span> <span m="1842980">in</span> <span m="1843130">an</span> <span m="1843250">array,</span> <span m="1843820">there's</span> <span m="1844060">exactly</span> <span m="1844630">one</span> <span m="1844810">representation</span> <span m="1845590">of</span> <span m="1845710">a</span> <span m="1845740">given</span> <span m="1846010">order.</span> <span m="1846940">But</span> <span m="1847150">in</span> <span m="1847270">a</span> <span m="1847330">tree,</span> <span m="1847630">there's</span> <span m="1847810">many</span> <span m="1848050">representations.</span> <span m="1849340">It</span> <span m="1849550">could</span> <span m="1849760">be</span> <span m="1849880">a</span> <span m="1849940">long</span> <span m="1850210">line.</span> <span m="1850840">It</span> <span m="1851080">could</span> <span m="1851260">be</span> <span m="1851410">a</span> <span m="1851470">balance</span> <span m="1851860">thing.</span> <span m="1852550">They</span> <span m="1852790">could</span> <span m="1852940">represent</span> <span m="1853390">the</span> <span m="1853480">exact</span> <span m="1853840">same</span> <span m="1854080">order</span> <span m="1854350">on</span> <span m="1854440">the</span> <span m="1854500">nodes</span> <span m="1854770">if</span> <span m="1854890">you</span> <span m="1855010">label</span> <span m="1855290">them</span> <span m="1855430">right.</span></p>
<p><span m="1856600">In</span> <span m="1856720">fact,</span> <span m="1856900">there are</span> <span m="1857050">exponentially</span> <span m="1857800">many</span> <span m="1858370">different</span> <span m="1858700">representations</span> <span m="1859390">of</span> <span m="1859510">the</span> <span m="1859570">same</span> <span m="1859840">thing.</span> <span m="1860050">And</span> <span m="1860170">we're</span> <span m="1860260">going</span> <span m="1860380">to</span> <span m="1860440">exploit</span> <span m="1860800">that,</span> <span m="1861640">the</span> <span m="1861790">same</span> <span m="1862000">order,</span> <span m="1863890">and</span> <span m="1864160">define--</span> <span m="1864880">this</span> <span m="1865090">is</span> <span m="1865180">just</span> <span m="1865360">a</span> <span m="1865420">thing</span> <span m="1865780">you</span> <span m="1865990">need</span> <span m="1866140">to</span> <span m="1866260">know.</span> <span m="1880364">Let</span> <span m="1880857">me</span> <span m="1881350">label,</span> <span m="1882300">A,</span> <span m="1883094">X,</span> <span m="1883890">B,</span> <span m="1884730">Y,</span> <span m="1885380">C.</span> <span m="1886850">You</span> <span m="1887340">can</span> <span m="1887520">tell</span> <span m="1887730">I've</span> <span m="1887820">drawn</span> <span m="1888000">this</span> <span m="1888150">diagram</span> <span m="1888510">before</span> <span m="1889950">many,</span> <span m="1890470">many</span> <span m="1890610">times.</span> <span m="1891570">This</span> <span m="1891810">is</span> <span m="1891930">a</span> <span m="1892080">very</span> <span m="1892470">powerful</span> <span m="1892830">tool</span> <span m="1893160">in</span> <span m="1893340">all</span> <span m="1893850">tree</span> <span m="1894240">data</span> <span m="1894480">structures,</span> <span m="1895060">which</span> <span m="1895140">are</span> <span m="1895230">most</span> <span m="1895530">of</span> <span m="1895620">data</span> <span m="1895800">structures.</span> <span m="1897060">And</span> <span m="1897420">they</span> <span m="1897600">are</span> <span m="1897720">called</span> <span m="1898740">right</span> <span m="1899040">rotate</span> <span m="1903360">of</span> <span m="1903840">y</span> <span m="1905070">and</span> <span m="1905550">left</span> <span m="1905910">rotate</span> <span m="1906460">of</span> <span m="1906660">x.</span></p>
<p><span m="1913860">So</span> <span m="1914190">if</span> <span m="1914370">I</span> <span m="1914490">have</span> <span m="1914790">this</span> <span m="1915030">tree--</span> <span m="1915730">which</span> <span m="1915930">I'm</span> <span m="1916050">just</span> <span m="1916440">black</span> <span m="1916830">boxing</span> <span m="1917310">some</span> <span m="1917520">of</span> <span m="1917610">the</span> <span m="1917700">subtrees</span> <span m="1918150">into</span> <span m="1918360">little</span> <span m="1918540">triangles.</span> <span m="1919410">If</span> <span m="1919560">I</span> <span m="1919650">have</span> <span m="1919980">a</span> <span m="1920160">node,</span> <span m="1920790">and</span> <span m="1921090">it</span> <span m="1921420">has</span> <span m="1921660">a</span> <span m="1921750">left</span> <span m="1921960">child,</span> <span m="1922860">then</span> <span m="1923130">I'm</span> <span m="1923250">allowed</span> <span m="1923550">to</span> <span m="1923880">right</span> <span m="1924300">rotate</span> <span m="1924690">this</span> <span m="1924870">edge,</span> <span m="1925020">which</span> <span m="1925170">means</span> <span m="1925410">take</span> <span m="1925590">this</span> <span m="1925800">edge</span> <span m="1926070">and</span> <span m="1926160">go</span> <span m="1926340">like</span> <span m="1926580">this--</span> <span m="1927000">90</span> <span m="1927330">degrees,</span> <span m="1928200">kind</span> <span m="1928530">of.</span> <span m="1929340">Or</span> <span m="1929580">you</span> <span m="1929670">could</span> <span m="1929790">just</span> <span m="1929910">think</span> <span m="1930060">of</span> <span m="1930180">it</span> <span m="1930240">as</span> <span m="1930360">rewriting</span> <span m="1930810">it</span> <span m="1930930">this</span> <span m="1931110">way.</span></p>
<p><span m="1931350">Now,</span> <span m="1931590">you</span> <span m="1931710">might</span> <span m="1931890">also have</span> <span m="1932280">keeping</span> <span m="1932610">track</span> <span m="1933150">of</span> <span m="1933450">the</span> <span m="1933630">parent</span> <span m="1933930">pointer.</span> <span m="1934290">Parent</span> <span m="1934590">pointer</span> <span m="1935910">moves</span> <span m="1936210">around.</span> <span m="1936720">Before,</span> <span m="1937230">this</span> <span m="1937380">was</span> <span m="1937560">the</span> <span m="1937620">parent</span> <span m="1937950">of</span> <span m="1938040">y.</span> <span m="1938610">Now</span> <span m="1938880">it's</span> <span m="1939030">the</span> <span m="1939090">parent</span> <span m="1939420">of</span> <span m="1939540">x.</span> <span m="1940980">So</span> <span m="1942270">x</span> <span m="1942570">and</span> <span m="1942660">y</span> <span m="1942810">are</span> <span m="1942900">switching</span> <span m="1943350">places.</span> <span m="1943980">But</span> <span m="1945030">we</span> <span m="1945300">couldn't</span> <span m="1945630">just</span> <span m="1946020">swap</span> <span m="1946620">these</span> <span m="1946830">items</span> <span m="1947160">around,</span> <span m="1947610">because</span> <span m="1948120">that</span> <span m="1948330">would</span> <span m="1948480">change</span> <span m="1948810">traversal</span> <span m="1949230">order.</span> <span m="1949980">In</span> <span m="1950220">this</span> <span m="1950370">picture,</span> <span m="1950940">x</span> <span m="1951270">comes</span> <span m="1951570">before</span> <span m="1952020">y,</span> <span m="1952440">because</span> <span m="1952980">x</span> <span m="1953580">is</span> <span m="1953850">in</span> <span m="1953940">the</span> <span m="1954030">left</span> <span m="1954240">subtree</span> <span m="1954640">of</span> <span m="1954720">y</span> <span m="1955890">in</span> <span m="1956175">traversal</span> <span m="1956460">order.</span></p>
<p><span m="1956850">And</span> <span m="1957090">over</span> <span m="1957330">here,</span> <span m="1958210">now</span> <span m="1958380">y</span> <span m="1958740">is</span> <span m="1958890">in</span> <span m="1959010">the</span> <span m="1959100">right</span> <span m="1959340">subtree</span> <span m="1959730">of</span> <span m="1959820">x.</span> <span m="1960000">So</span> <span m="1960150">it</span> <span m="1960240">comes</span> <span m="1960540">after</span> <span m="1961020">x.</span> <span m="1961350">So</span> <span m="1961590">in</span> <span m="1961710">both</span> <span m="1961980">cases,</span> <span m="1962400">x</span> <span m="1962640">comes</span> <span m="1962880">before</span> <span m="1963180">y.</span> <span m="1963600">And</span> <span m="1963840">indeed,</span> <span m="1964470">in</span> <span m="1964800">all</span> <span m="1965100">of</span> <span m="1965220">these</span> <span m="1965400">pictures</span> <span m="1967200">the</span> <span m="1967320">traversal</span> <span m="1967770">order--</span> <span m="1968610">I</span> <span m="1968760">mean,</span> <span m="1968880">not</span> <span m="1969030">just</span> <span m="1969210">for x</span> <span m="1969540">and</span> <span m="1969630">y,</span> <span m="1969810">but</span> <span m="1969960">also</span> <span m="1970260">for</span> <span m="1970410">A,</span> <span m="1970530">B,</span> <span m="1970680">and</span> <span m="1970770">C,</span> <span m="1971520">the</span> <span m="1971690">traversal</span> <span m="1972030">order</span> <span m="1972240">is</span> <span m="1972360">consistent.</span> <span m="1973170">It</span> <span m="1973440">is</span> <span m="1973770">A,</span> <span m="1975570">X,</span> <span m="1977112">B,</span> <span m="1978570">y,</span> <span m="1980028">C,</span> <span m="1981000">where,</span> <span m="1981240">when</span> <span m="1981390">I</span> <span m="1981450">write</span> <span m="1981600">a</span> <span m="1981630">triangle,</span> <span m="1982080">I</span> <span m="1982140">mean</span> <span m="1982320">recursively</span> <span m="1982920">the</span> <span m="1983040">traversal</span> <span m="1983460">order</span> <span m="1983640">of</span> <span m="1983730">all</span> <span m="1983850">the</span> <span m="1983940">things</span> <span m="1984180">in</span> <span m="1984270">the</span> <span m="1984330">triangle.</span> <span m="1985580">So</span> <span m="1985710">if</span> <span m="1985830">you</span> <span m="1985950">just</span> <span m="1986280">apply</span> <span m="1986700">the</span> <span m="1986880">traversal</span> <span m="1987090">order</span> <span m="1987330">algorithm</span> <span m="1987630">here</span> <span m="1987870">versus</span> <span m="1988200">here,</span> <span m="1988410">you</span> <span m="1988560">get</span> <span m="1988740">the</span> <span m="1988830">same</span> <span m="1989130">output,</span> <span m="1989830">which</span> <span m="1990030">means</span> <span m="1990660">these</span> <span m="1990870">operations</span> <span m="1991740">preserve</span> <span m="1992310">traversal</span> <span m="1992700">order.</span></p>
<p><span m="1998770">Great,</span> <span m="2000090">so</span> <span m="2000390">this</span> <span m="2000600">is</span> <span m="2000750">a</span> <span m="2000840">thing</span> <span m="2001140">that</span> <span m="2001260">we</span> <span m="2001380">can</span> <span m="2001560">do</span> <span m="2001830">in</span> <span m="2001920">a</span> <span m="2001980">tree</span> <span m="2002880">that</span> <span m="2003180">won't</span> <span m="2003510">affect</span> <span m="2004050">any</span> <span m="2004350">of</span> <span m="2004530">the</span> <span m="2004650">stuff</span> <span m="2004890">we've</span> <span m="2005070">done</span> <span m="2005250">so</span> <span m="2005430">far.</span> <span m="2006330">It's</span> <span m="2006600">a</span> <span m="2006660">tool</span> <span m="2007440">that</span> <span m="2007620">we</span> <span m="2007710">can</span> <span m="2007890">use</span> <span m="2008040">to</span> <span m="2008130">rebalance.</span> <span m="2008670">Notice</span> <span m="2011556">how</span> <span m="2012000">deep</span> <span m="2012420">things</span> <span m="2012750">are</span> <span m="2012870">in</span> <span m="2012930">the</span> <span m="2013020">tree</span> <span m="2013290">changes.</span> <span m="2014190">Our</span> <span m="2014400">problem</span> <span m="2015330">with</span> <span m="2015810">this</span> <span m="2016170">linear</span> <span m="2016590">tree</span> <span m="2017310">is</span> <span m="2017580">that</span> <span m="2017700">there</span> <span m="2017790">are</span> <span m="2017850">some</span> <span m="2018120">nodes</span> <span m="2018390">of</span> <span m="2018510">linear</span> <span m="2018870">depth.</span> <span m="2019200">We</span> <span m="2019320">want</span> <span m="2019470">to</span> <span m="2019560">get</span> <span m="2019710">rid</span> <span m="2019890">of</span> <span m="2019980">those.</span></p>
<p><span m="2020610">How?</span> <span m="2020940">Well,</span> <span m="2021270">we</span> <span m="2021450">could</span> <span m="2021600">take</span> <span m="2021780">these</span> <span m="2021990">edges</span> <span m="2022230">and</span> <span m="2022320">start</span> <span m="2022560">rotating</span> <span m="2023010">them</span> <span m="2023160">up.</span> <span m="2024030">If</span> <span m="2024120">you</span> <span m="2024210">look</span> <span m="2024420">at</span> <span m="2024540">depths,</span> <span m="2027180">in</span> <span m="2027300">this</span> <span m="2027480">picture,</span> <span m="2027850">A and</span> <span m="2028110">B</span> <span m="2028410">are</span> <span m="2028560">deeper</span> <span m="2028980">than</span> <span m="2029160">C.</span> <span m="2030000">And</span> <span m="2030240">in</span> <span m="2030330">this</span> <span m="2030510">picture,</span> <span m="2031650">B</span> <span m="2031860">and</span> <span m="2031980">C</span> <span m="2032190">are</span> <span m="2032310">deeper</span> <span m="2032610">than</span> <span m="2032790">A.</span> <span m="2033330">So</span> <span m="2033960">it's</span> <span m="2034080">a</span> <span m="2034140">trade</span> <span m="2034410">off.</span> <span m="2035100">This</span> <span m="2035430">one</span> <span m="2036300">moved</span> <span m="2036690">up.</span> <span m="2037470">This</span> <span m="2037710">one</span> <span m="2037890">moved</span> <span m="2038100">down.</span> <span m="2038490">This</span> <span m="2038700">one</span> <span m="2038850">stayed</span> <span m="2039090">at</span> <span m="2039180">the</span> <span m="2039240">same</span> <span m="2039510">depth.</span> <span m="2041040">So</span> <span m="2041460">hopefully,</span> <span m="2042180">if</span> <span m="2042810">A</span> <span m="2043380">is</span> <span m="2043620">too</span> <span m="2043800">deep</span> <span m="2044130">and</span> <span m="2044400">C</span> <span m="2044790">is</span> <span m="2045030">too</span> <span m="2045420">shallow,</span> <span m="2047130">they</span> <span m="2047310">can</span> <span m="2047610">trade</span> <span m="2047910">off</span> <span m="2048120">like</span> <span m="2048300">this.</span></p>
<p><span m="2048935">It</span> <span m="2049270">may</span> <span m="2049409">sound</span> <span m="2049980">difficult,</span> <span m="2050460">but</span> <span m="2050580">in</span> <span m="2050670">fact,</span> <span m="2050909">there's</span> <span m="2051120">a</span> <span m="2051179">pretty</span> <span m="2051420">simple</span> <span m="2051780">way,</span> <span m="2053409">which</span> <span m="2053550">are</span> <span m="2053610">called</span> <span m="2053969">AVL</span> <span m="2054420">trees,</span> <span m="2058530">that</span> <span m="2058770">maintain</span> <span m="2059280">balance</span> <span m="2059760">in</span> <span m="2059940">a</span> <span m="2060120">particular</span> <span m="2060630">way</span> <span m="2063480">called</span> <span m="2063870">height</span> <span m="2064139">balance.</span> <span m="2074730">This</span> <span m="2075090">is</span> <span m="2076590">if</span> <span m="2076860">we</span> <span m="2077010">take</span> <span m="2077429">the</span> <span m="2078480">height</span> <span m="2081210">of</span> <span m="2081989">node.left--</span> <span m="2086130">actually,</span> <span m="2086580">I'd</span> <span m="2086850">prefer</span> <span m="2087175">to--</span> <span m="2090080">node.right,</span> <span m="2093719">minus</span> <span m="2095280">height</span> <span m="2095880">of</span> <span m="2097090">node.left,</span> <span m="2103190">so</span> <span m="2103400">this</span> <span m="2103610">thing</span> <span m="2103940">is</span> <span m="2104180">called</span> <span m="2106640">skew</span> <span m="2107490">of</span> <span m="2107980">the</span> <span m="2108470">node.</span> <span m="2111050">I</span> <span m="2111290">want</span> <span m="2111530">this</span> <span m="2111740">to</span> <span m="2111890">always</span> <span m="2112280">be</span> <span m="2112940">minus</span> <span m="2113330">1,</span> <span m="2113530">0,</span> <span m="2114290">or</span> <span m="2114470">plus</span> <span m="2114770">1.</span></p>
<p><span m="2117890">So</span> <span m="2118130">this</span> <span m="2118340">is</span> <span m="2118430">saying</span> <span m="2118850">that</span> <span m="2119450">if</span> <span m="2119750">I</span> <span m="2119870">have</span> <span m="2120800">any</span> <span m="2121100">node,</span> <span m="2121930">and</span> <span m="2122200">I</span> <span m="2122300">look</span> <span m="2122480">if</span> <span m="2122570">its</span> <span m="2122810">left</span> <span m="2123140">subtree</span> <span m="2124070">and</span> <span m="2124340">its</span> <span m="2124490">right</span> <span m="2124760">subtree,</span> <span m="2125600">I</span> <span m="2125810">measure</span> <span m="2126080">their</span> <span m="2126200">heights--</span> <span m="2126580">remember,</span> <span m="2126830">that's</span> <span m="2127070">downward</span> <span m="2127550">distance,</span> <span m="2128750">maximum</span> <span m="2129260">distance</span> <span m="2129590">to</span> <span m="2129710">a</span> <span m="2129740">leaf--</span> <span m="2130670">I</span> <span m="2130850">measure</span> <span m="2131150">the</span> <span m="2131240">height</span> <span m="2131570">of</span> <span m="2131720">this</span> <span m="2131900">tree--</span> <span m="2132470">maximum</span> <span m="2132860">height--</span> <span m="2133130">and I</span> <span m="2133310">measure</span> <span m="2133610">the</span> <span m="2133700">maximum</span> <span m="2134030">height</span> <span m="2134180">of</span> <span m="2134270">this</span> <span m="2134830">subtree,</span> <span m="2135500">I</span> <span m="2135710">want</span> <span m="2135920">these</span> <span m="2136100">to</span> <span m="2136190">be</span> <span m="2136400">within</span> <span m="2136760">1</span> <span m="2137000">of</span> <span m="2137090">each</span> <span m="2137270">other.</span> <span m="2139080">Ideally,</span> <span m="2139400">they're</span> <span m="2139550">equal.</span> <span m="2139970">That</span> <span m="2140150">would</span> <span m="2140300">be</span> <span m="2140390">the</span> <span m="2140480">perfect</span> <span m="2140900">case.</span> <span m="2141740">But</span> <span m="2142430">let's</span> <span m="2142730">let</span> <span m="2142880">them</span> <span m="2143030">differ</span> <span m="2143300">by</span> <span m="2143450">1.</span></p>
<p><span m="2144140">So</span> <span m="2144380">maybe</span> <span m="2144710">this</span> <span m="2145010">is</span> <span m="2145640">k</span> <span m="2146210">and</span> <span m="2146390">this</span> <span m="2146660">is</span> <span m="2146870">k</span> <span m="2147170">plus</span> <span m="2147500">1.</span> <span m="2148220">Or</span> <span m="2148430">maybe</span> <span m="2148700">this</span> <span m="2148850">is</span> <span m="2148940">k</span> <span m="2149180">and</span> <span m="2149300">this</span> <span m="2149420">is</span> <span m="2149510">k</span> <span m="2149660">minus</span> <span m="2150020">1.</span> <span m="2151670">In</span> <span m="2151850">this</span> <span m="2152000">picture,</span> <span m="2152330">what</span> <span m="2152480">is</span> <span m="2152570">the</span> <span m="2152660">height</span> <span m="2152840">of</span> <span m="2152930">this</span> <span m="2153080">node?</span> <span m="2153730">It's</span> <span m="2154110">good</span> <span m="2154490">practice.</span> <span m="2156812">k</span> <span m="2157250">plus</span> <span m="2157520">2,</span> <span m="2157850">good.</span> <span m="2159560">What's</span> <span m="2159860">the</span> <span m="2159950">longest</span> <span m="2160310">path</span> <span m="2160550">from</span> <span m="2160700">this</span> <span m="2160880">node</span> <span m="2161090">to</span> <span m="2161420">a</span> <span m="2161480">leaf?</span> <span m="2161780">Well,</span> <span m="2161930">it</span> <span m="2161990">could</span> <span m="2162200">go</span> <span m="2162410">through</span> <span m="2162620">this</span> <span m="2162770">subtree.</span> <span m="2163460">And</span> <span m="2163670">that</span> <span m="2163820">would</span> <span m="2163970">be</span> <span m="2164210">length</span> <span m="2164570">k</span> <span m="2164870">plus</span> <span m="2165110">1,</span> <span m="2165290">because</span> <span m="2165470">it's</span> <span m="2165590">k</span> <span m="2165830">in</span> <span m="2165960">here</span> <span m="2166160">plus</span> <span m="2166460">1</span> <span m="2166610">for</span> <span m="2166760">this</span> <span m="2166910">edge.</span> <span m="2167570">Or</span> <span m="2167810">it</span> <span m="2167870">could</span> <span m="2167990">be</span> <span m="2168110">through</span> <span m="2168290">here,</span> <span m="2168630">and</span> <span m="2168830">that's</span> <span m="2169040">k</span> <span m="2169220">plus</span> <span m="2169430">1</span> <span m="2169670">plus</span> <span m="2169940">1.</span> <span m="2170450">So</span> <span m="2170720">the</span> <span m="2170810">biggest</span> <span m="2171260">is</span> <span m="2171380">to</span> <span m="2171440">go</span> <span m="2171560">to</span> <span m="2171680">the</span> <span m="2171740">right.</span> <span m="2172380">So</span> <span m="2172520">the</span> <span m="2172610">height--</span> <span m="2173090">if</span> <span m="2173390">I</span> <span m="2173570">told</span> <span m="2173900">you</span> <span m="2173990">the</span> <span m="2174080">height</span> <span m="2174260">of</span> <span m="2174320">these</span> <span m="2174620">subtrees,</span> <span m="2174860">we</span> <span m="2174950">can</span> <span m="2175070">derive</span> <span m="2175430">the</span> <span m="2175520">height</span> <span m="2175670">of</span> <span m="2175790">this</span> <span m="2175940">node.</span> <span m="2176270">We're</span> <span m="2176420">going</span> <span m="2176540">to</span> <span m="2176600">use</span> <span m="2176720">that</span> <span m="2176900">a</span> <span m="2176930">lot</span> <span m="2177500">in</span> <span m="2177680">a</span> <span m="2177710">moment.</span></p>
<p><span m="2179490">So,</span> <span m="2179900">the first</span> <span m="2180260">claim</span> <span m="2180650">is</span> <span m="2180860">that</span> <span m="2180980">if</span> <span m="2181220">I</span> <span m="2181310">could</span> <span m="2181490">maintain</span> <span m="2182000">height</span> <span m="2182240">balance,</span> <span m="2183500">then</span> <span m="2184250">I</span> <span m="2186500">will</span> <span m="2186620">guarantee</span> <span m="2187490">that</span> <span m="2187700">h</span> <span m="2187940">equals</span> <span m="2188240">log n.</span> <span m="2188640">So</span> <span m="2188810">in</span> <span m="2188900">other</span> <span m="2189020">words,</span> <span m="2189200">height</span> <span m="2189410">balance</span> <span m="2189770">implies</span> <span m="2190580">balance.</span> <span m="2192180">So</span> <span m="2192620">let's</span> <span m="2192780">prove</span> <span m="2193020">that</span> <span m="2193200">first</span> <span m="2194910">quickly.</span> <span m="2196260">And</span> <span m="2196530">then,</span> <span m="2197850">the</span> <span m="2198030">interesting</span> <span m="2198420">part</span> <span m="2198720">is</span> <span m="2199290">how</span> <span m="2199530">do</span> <span m="2199650">we</span> <span m="2199800">actually</span> <span m="2200160">prove--</span> <span m="2204690">or</span> <span m="2205170">how</span> <span m="2205250">do</span> <span m="2205370">we</span> <span m="2205460">actually</span> <span m="2205730">maintain</span> <span m="2206300">the</span> <span m="2206390">balance</span> <span m="2207170">property?</span> <span m="2207890">We're</span> <span m="2208010">going</span> <span m="2208130">to</span> <span m="2208190">do</span> <span m="2208280">that</span> <span m="2208460">using</span> <span m="2208730">rotations.</span> <span m="2209450">But</span> <span m="2210230">how</span> <span m="2210680">is</span> <span m="2210830">a</span> <span m="2210890">big</span> <span m="2211040">question.</span></p>
<p><span m="2221720">So</span> <span m="2222170">why</span> <span m="2222560">does</span> <span m="2223070">height</span> <span m="2223310">balance</span> <span m="2226520">imply</span> <span m="2227120">balance?</span> <span m="2236550">So</span> <span m="2238830">what</span> <span m="2239040">this</span> <span m="2239220">is</span> <span m="2239310">saying</span> <span m="2239610">is</span> <span m="2239760">that</span> <span m="2239970">all</span> <span m="2240390">height</span> <span m="2240600">balanced</span> <span m="2240990">trees</span> <span m="2241530">have</span> <span m="2241830">logarithmic</span> <span m="2243120">height.</span> <span m="2244810">So</span> <span m="2245040">what</span> <span m="2245190">I'd</span> <span m="2245310">like</span> <span m="2245460">to</span> <span m="2245550">think</span> <span m="2245760">about</span> <span m="2246120">is</span> <span m="2246390">sort</span> <span m="2246570">of</span> <span m="2246660">the</span> <span m="2247260">least</span> <span m="2247980">balanced</span> <span m="2248910">height</span> <span m="2249230">balanced</span> <span m="2249690">tree.</span> <span m="2250890">The</span> <span m="2251020">least</span> <span m="2251280">balanced</span> <span m="2251700">one</span> <span m="2252000">is</span> <span m="2252210">going</span> <span m="2252420">to</span> <span m="2252510">have</span> <span m="2252900">every</span> <span m="2253260">node</span> <span m="2254160">a</span> <span m="2254370">mismatch.</span> <span m="2256070">Let's</span> <span m="2256230">say</span> <span m="2256380">the</span> <span m="2256470">left</span> <span m="2256680">subtree</span> <span m="2257550">is</span> <span m="2257940">shallower</span> <span m="2259170">than</span> <span m="2259470">the</span> <span m="2259800">right</span> <span m="2260070">subtree</span> <span m="2260460">by</span> <span m="2260670">1,</span> <span m="2261300">and</span> <span m="2261540">recursively</span> <span m="2262140">all</span> <span m="2262350">the</span> <span m="2262440">way</span> <span m="2262560">down.</span> <span m="2262800">So</span> <span m="2262920">every</span> <span m="2263220">node</span> <span m="2263880">has</span> <span m="2264180">a</span> <span m="2264450">gap</span> <span m="2264890">here,</span> <span m="2265260">a--</span> <span m="2269522">what do we</span> <span m="2270010">call it--</span> <span m="2271480">a</span> <span m="2271660">skew</span> <span m="2272170">of</span> <span m="2272350">1,</span> <span m="2275230">which</span> <span m="2275440">I'm</span> <span m="2275590">going</span> <span m="2275800">to</span> <span m="2276010">write--</span> <span m="2276520">I'm</span> <span m="2276700">going</span> <span m="2276820">to</span> <span m="2277030">introduce</span> <span m="2277420">some</span> <span m="2277540">notation.</span> <span m="2278090">I'll</span> <span m="2278140">write</span> <span m="2278380">a</span> <span m="2278860">dissenting</span> <span m="2279160">rightward</span> <span m="2279640">arrow</span> <span m="2279850">of</span> <span m="2279970">this</span> <span m="2280180">one</span> <span m="2280360">is</span> <span m="2281260">higher</span> <span m="2281860">than</span> <span m="2282190">the</span> <span m="2282310">left</span> <span m="2282910">subtree.</span></p>
<p><span m="2286470">So</span> <span m="2286670">the</span> <span m="2286760">easy</span> <span m="2287020">way</span> <span m="2287390">to</span> <span m="2287480">think</span> <span m="2287660">about</span> <span m="2287900">this</span> <span m="2288270">is</span> <span m="2288640">this</span> <span m="2289010">is</span> <span m="2289070">sort</span> <span m="2289220">of</span> <span m="2289430">our</span> <span m="2289580">worst</span> <span m="2289820">case.</span> <span m="2290120">This</span> <span m="2290300">is</span> <span m="2290390">going</span> <span m="2290510">to</span> <span m="2290600">be</span> <span m="2290930">the</span> <span m="2291620">fewest</span> <span m="2292130">nodes</span> <span m="2292430">for</span> <span m="2292580">the</span> <span m="2292670">maximum</span> <span m="2293150">depth.</span> <span m="2294260">Let's</span> <span m="2294680">just</span> <span m="2294950">count</span> <span m="2295310">how</span> <span m="2295520">many</span> <span m="2295730">nodes</span> <span m="2296030">are</span> <span m="2296120">in</span> <span m="2296210">this</span> <span m="2296390">tree.</span> <span m="2298370">I'm</span> <span m="2298580">going</span> <span m="2298700">to</span> <span m="2298760">write</span> <span m="2298970">that</span> <span m="2299150">as</span> <span m="2299270">a</span> <span m="2299330">recurrence,</span> <span m="2301170">which</span> <span m="2301310">is</span> <span m="2301430">the</span> <span m="2301550">number</span> <span m="2302000">of</span> <span m="2302120">nodes</span> <span m="2303050">in</span> <span m="2303290">a</span> <span m="2303350">tree</span> <span m="2303590">of</span> <span m="2303680">height</span> <span m="2303920">h.</span> <span m="2305660">So</span> <span m="2305870">if</span> <span m="2305990">this</span> <span m="2306170">whole</span> <span m="2306530">tree</span> <span m="2306890">has</span> <span m="2307160">height</span> <span m="2307400">h,</span> <span m="2310790">as</span> <span m="2311090">we</span> <span m="2311270">said</span> <span m="2311870">in</span> <span m="2312140">this</span> <span m="2312290">picture,</span> <span m="2312680">if</span> <span m="2312860">I</span> <span m="2312950">just</span> <span m="2313160">subtract</span> <span m="2313700">2</span> <span m="2314060">from</span> <span m="2314300">all</span> <span m="2314420">these</span> <span m="2314570">numbers,</span> <span m="2315750">then</span> <span m="2315890">this</span> <span m="2316040">one</span> <span m="2316220">has</span> <span m="2316430">height</span> <span m="2317870">h</span> <span m="2318440">minus</span> <span m="2319240">2,</span> <span m="2320270">and</span> <span m="2320510">this</span> <span m="2320690">one</span> <span m="2320840">has</span> <span m="2321110">height</span> <span m="2321440">h</span> <span m="2321680">minus</span> <span m="2321980">1.</span></p>
<p><span m="2324020">So</span> <span m="2324260">how</span> <span m="2324410">many</span> <span m="2324650">nodes</span> <span m="2324920">are</span> <span m="2325010">in</span> <span m="2325130">here?</span> <span m="2325970">Well,</span> <span m="2326180">this</span> <span m="2326360">is</span> <span m="2326510">a</span> <span m="2326600">recurrence</span> <span m="2327290">I'm</span> <span m="2327380">going</span> <span m="2327500">to</span> <span m="2327560">write.</span> <span m="2327750">So</span> <span m="2327950">this</span> <span m="2328430">will</span> <span m="2328670">be</span> <span m="2328990">N</span> <span m="2329840">sub</span> <span m="2330920">h</span> <span m="2331250">minus</span> <span m="2331580">2.</span> <span m="2332060">This</span> <span m="2332240">will</span> <span m="2332360">be</span> <span m="2332540">N</span> <span m="2332870">sub</span> <span m="2333740">h</span> <span m="2334070">minus</span> <span m="2334400">1.</span> <span m="2335360">And</span> <span m="2335510">then</span> <span m="2335630">I</span> <span m="2335690">just</span> <span m="2335870">count</span> <span m="2336170">how</span> <span m="2336350">many</span> <span m="2336560">nodes</span> <span m="2336800">are</span> <span m="2336890">in</span> <span m="2336980">this</span> <span m="2337100">picture.</span> <span m="2337910">It</span> <span m="2338180">is</span> <span m="2339590">Nh</span> <span m="2340340">minus</span> <span m="2340640">1</span> <span m="2340970">plus</span> <span m="2341420">Nh</span> <span m="2342050">minus</span> <span m="2342380">2</span> <span m="2343520">plus</span> <span m="2343820">1,</span> <span m="2344600">or</span> <span m="2344750">this</span> <span m="2344930">node.</span></p>
<p><span m="2346100">Now</span> <span m="2346280">you</span> <span m="2346370">might</span> <span m="2346580">ask,</span> <span m="2346890">what</span> <span m="2346970">is</span> <span m="2347330">Nh a</span> <span m="2347810">recurrence</span> <span m="2348350">for?</span> <span m="2349520">But</span> <span m="2349760">it</span> <span m="2349850">is</span> <span m="2350060">the</span> <span m="2350210">number</span> <span m="2350600">of</span> <span m="2350720">nodes</span> <span m="2351590">in</span> <span m="2352070">this</span> <span m="2352370">sort</span> <span m="2352580">of</span> <span m="2352700">worst</span> <span m="2353060">case</span> <span m="2355760">if</span> <span m="2356150">the</span> <span m="2356300">worst</span> <span m="2356510">case</span> <span m="2356720">has</span> <span m="2356960">total</span> <span m="2357230">height</span> <span m="2357440">h.</span> <span m="2358460">So</span> <span m="2358700">you</span> <span m="2358820">can</span> <span m="2359120">also</span> <span m="2359390">think</span> <span m="2359570">of</span> <span m="2359690">it</span> <span m="2359780">as</span> <span m="2360140">what</span> <span m="2360350">is</span> <span m="2360470">the</span> <span m="2360590">minimum</span> <span m="2361130">number</span> <span m="2361430">of</span> <span m="2361550">nodes</span> <span m="2361820">I</span> <span m="2361910">could</span> <span m="2362090">have</span> <span m="2362510">in</span> <span m="2362690">an</span> <span m="2362810">AVL</span> <span m="2363230">tree,</span> <span m="2363470">which</span> <span m="2363650">is</span> <span m="2363740">a</span> <span m="2363800">height</span> <span m="2364010">balanced</span> <span m="2364370">tree,</span> <span m="2365540">that</span> <span m="2365780">has</span> <span m="2366080">a</span> <span m="2366110">height</span> <span m="2366350">h</span> <span m="2373380">in</span> <span m="2373920">a</span> <span m="2374340">height</span> <span m="2374910">balanced</span> <span m="2375840">tree?</span></p>
<p><span m="2378610">OK,</span> <span m="2378870">so</span> <span m="2378990">now</span> <span m="2379170">I</span> <span m="2379230">just</span> <span m="2379380">need</span> <span m="2379500">to</span> <span m="2379590">solve</span> <span m="2379830">this</span> <span m="2379980">recurrence.</span> <span m="2380920">This</span> <span m="2381030">recurrence</span> <span m="2381360">look</span> <span m="2381460">familiar-ish?</span> <span m="2388050">It's</span> <span m="2388350">like</span> <span m="2388650">Fibonacci</span> <span m="2389160">numbers.</span> <span m="2389550">If</span> <span m="2389670">I</span> <span m="2389760">remove</span> <span m="2390030">the</span> <span m="2390090">plus</span> <span m="2390390">1,</span> <span m="2390900">it's</span> <span m="2391290">Fibonacci.</span> <span m="2392130">And</span> <span m="2392370">if</span> <span m="2392460">you</span> <span m="2392550">happen</span> <span m="2392850">to</span> <span m="2392910">know</span> <span m="2393090">the</span> <span m="2393150">Fibonacci</span> <span m="2393630">numbers</span> <span m="2393960">grow</span> <span m="2394320">as,</span> <span m="2394500">like,</span> <span m="2394860">a</span> <span m="2395070">golden</span> <span m="2395430">ratio</span> <span m="2395850">to</span> <span m="2396000">the</span> <span m="2396120">n,</span> <span m="2396690">then</span> <span m="2397110">we</span> <span m="2397290">know</span> <span m="2397440">that</span> <span m="2397590">this</span> <span m="2397770">is</span> <span m="2397890">exponential,</span> <span m="2398490">which</span> <span m="2398700">is</span> <span m="2398820">what</span> <span m="2398970">we</span> <span m="2399120">want.</span> <span m="2399540">Because</span> <span m="2400440">if</span> <span m="2400740">Nh</span> <span m="2401130">is</span> <span m="2401250">exponential</span> <span m="2401790">in</span> <span m="2401880">h,</span> <span m="2402690">that</span> <span m="2402900">means</span> <span m="2403140">h</span> <span m="2403470">is</span> <span m="2403680">logarithmic</span> <span m="2403970">in</span> <span m="2404260">N,</span> <span m="2404670">because</span> <span m="2404910">log</span> <span m="2405180">is</span> <span m="2405330">inverse</span> <span m="2405690">of</span> <span m="2405780">exponential.</span></p>
<p><span m="2406920">But</span> <span m="2407070">maybe</span> <span m="2407260">you</span> <span m="2407310">don't</span> <span m="2407490">know</span> <span m="2407640">about</span> <span m="2407820">Fibonacci</span> <span m="2408270">numbers.</span> <span m="2408660">And</span> <span m="2409380">so</span> <span m="2410190">we</span> <span m="2410460">can</span> <span m="2410640">still</span> <span m="2412230">easily</span> <span m="2412770">show</span> <span m="2413010">that</span> <span m="2413160">this</span> <span m="2413310">is</span> <span m="2413430">exponential</span> <span m="2414300">as</span> <span m="2414600">follows.</span> <span m="2415960">I</span> <span m="2416190">want</span> <span m="2416370">to</span> <span m="2416490">prove</span> <span m="2416790">that</span> <span m="2416940">it's</span> <span m="2417090">at</span> <span m="2417210">least</span> <span m="2417570">an</span> <span m="2417690">exponential,</span> <span m="2418260">because</span> <span m="2418590">that</span> <span m="2418740">gives</span> <span m="2418980">me</span> <span m="2419100">that</span> <span m="2419250">h</span> <span m="2419520">is</span> <span m="2419700">at</span> <span m="2419850">most</span> <span m="2420570">logarithmic.</span> <span m="2422830">So</span> <span m="2423000">we</span> <span m="2423060">need</span> <span m="2423210">a</span> <span m="2423270">lower</span> <span m="2423540">bound.</span></p>
<p><span m="2424480">And</span> <span m="2424560">so</span> <span m="2424710">we</span> <span m="2424800">have</span> <span m="2424920">these</span> <span m="2425070">two</span> <span m="2425220">terms</span> <span m="2425680">which</span> <span m="2425790">are</span> <span m="2425880">hard</span> <span m="2426120">to</span> <span m="2426180">compare--</span> <span m="2426600">Nh</span> <span m="2427200">minus</span> <span m="2427500">1</span> <span m="2427830">and</span> <span m="2428040">Nh</span> <span m="2428370">minus</span> <span m="2428610">2.</span> <span m="2428850">It's</span> <span m="2428970">kind</span> <span m="2429090">of</span> <span m="2429180">ugly.</span> <span m="2430230">But</span> <span m="2430410">if</span> <span m="2430530">we're</span> <span m="2430650">allowed</span> <span m="2430860">to</span> <span m="2431010">be</span> <span m="2431190">sloppy--</span> <span m="2431670">and</span> <span m="2431760">we'll</span> <span m="2431880">see</span> <span m="2432060">if</span> <span m="2432150">we're</span> <span m="2432720">not</span> <span m="2432930">too</span> <span m="2433110">sloppy--</span> <span m="2433460">and</span> <span m="2433530">still</span> <span m="2433680">get</span> <span m="2433830">an</span> <span m="2433920">exponential</span> <span m="2434490">answer,</span> <span m="2435570">let's</span> <span m="2435780">just</span> <span m="2436170">make</span> <span m="2436470">them</span> <span m="2436620">equal</span> <span m="2439530">like</span> <span m="2439860">so.</span> <span m="2444150">So</span> <span m="2444390">this</span> <span m="2444600">is</span> <span m="2444780">a</span> <span m="2445440">true</span> <span m="2445680">statement,</span> <span m="2446200">in</span> <span m="2446300">fact,</span> <span m="2446440">strictly</span> <span m="2446790">greater</span> <span m="2447060">than.</span></p>
<p><span m="2448140">Why?</span> <span m="2448680">Because</span> <span m="2449490">I</span> <span m="2449580">removed</span> <span m="2449910">the</span> <span m="2449970">plus 1.</span> <span m="2450420">That</span> <span m="2450690">should</span> <span m="2450840">only</span> <span m="2451020">make</span> <span m="2451140">something</span> <span m="2451470">smaller.</span> <span m="2452310">And</span> <span m="2453810">I</span> <span m="2454020">replaced</span> <span m="2454470">Nh</span> <span m="2454920">minus</span> <span m="2455160">1</span> <span m="2455460">with</span> <span m="2455580">Nh</span> <span m="2455910">minus</span> <span m="2456180">2.</span> <span m="2456600">Here,</span> <span m="2456870">I'm</span> <span m="2457020">implicitly</span> <span m="2457530">using</span> <span m="2457890">a</span> <span m="2457980">fact,</span> <span m="2458310">which</span> <span m="2458580">is</span> <span m="2458790">obvious</span> <span m="2459270">by</span> <span m="2459420">induction,</span> <span m="2460200">that</span> <span m="2461370">this</span> <span m="2461670">tree</span> <span m="2462030">on</span> <span m="2462390">height--</span> <span m="2463170">if</span> <span m="2463410">I</span> <span m="2463470">take</span> <span m="2463800">this</span> <span m="2464190">tree</span> <span m="2464550">versus</span> <span m="2464910">this</span> <span m="2465060">tree,</span> <span m="2465270">this</span> <span m="2465480">one</span> <span m="2465660">has</span> <span m="2465870">more</span> <span m="2466140">nodes</span> <span m="2466470">than</span> <span m="2466620">this</span> <span m="2466800">one.</span> <span m="2467850">If</span> <span m="2467970">I</span> <span m="2468030">have</span> <span m="2468270">larger</span> <span m="2468570">height,</span> <span m="2468840">this</span> <span m="2469530">construction</span> <span m="2470130">is</span> <span m="2470220">going</span> <span m="2470340">to</span> <span m="2470400">build</span> <span m="2470790">a</span> <span m="2470940">bigger</span> <span m="2471240">tree,</span> <span m="2472140">at</span> <span m="2472410">least</span> <span m="2472710">as</span> <span m="2472830">big.</span> <span m="2473250">It</span> <span m="2473580">doesn't</span> <span m="2473970">even</span> <span m="2474180">need</span> <span m="2474330">to</span> <span m="2474420">be</span> <span m="2474570">strictly</span> <span m="2474930">bigger.</span></p>
<p><span m="2475710">So</span> <span m="2475980">certainly,</span> <span m="2476430">Nh</span> <span m="2476890">minus</span> <span m="2477120">1</span> <span m="2477420">is</span> <span m="2477600">greater</span> <span m="2477820">than</span> <span m="2477900">or</span> <span m="2477930">equal</span> <span m="2478140">to</span> <span m="2478380">Nh</span> <span m="2478890">minus</span> <span m="2479190">2.</span> <span m="2480060">Now,</span> <span m="2480540">this</span> <span m="2480840">is</span> <span m="2481260">2</span> <span m="2482130">times</span> <span m="2482490">Nh</span> <span m="2483060">minus</span> <span m="2483360">2.</span> <span m="2484230">And</span> <span m="2484500">this</span> <span m="2484710">is</span> <span m="2484830">an</span> <span m="2484920">easy</span> <span m="2485130">recurrence.</span> <span m="2485710">This</span> <span m="2485790">is</span> <span m="2485910">just</span> <span m="2486930">powers</span> <span m="2487260">of</span> <span m="2487350">2.</span> <span m="2487920">I</span> <span m="2488010">keep</span> <span m="2488220">multiplying</span> <span m="2488730">by</span> <span m="2488850">2,</span> <span m="2489420">and</span> <span m="2489630">subtracting</span> <span m="2490170">2</span> <span m="2490380">from</span> <span m="2490680">h.</span> <span m="2491460">So</span> <span m="2491730">this</span> <span m="2491880">solves</span> <span m="2492270">to</span> <span m="2492960">2</span> <span m="2493710">to</span> <span m="2493920">the</span> <span m="2494040">h over</span> <span m="2494460">2,</span> <span m="2495150">maybe</span> <span m="2495480">with</span> <span m="2495690">a</span> <span m="2495750">floor</span> <span m="2496290">or</span> <span m="2496380">something.</span> <span m="2497880">But</span> <span m="2500452">I'm</span> <span m="2500870">using</span> <span m="2501120">a</span> <span m="2501180">base</span> <span m="2501390">case</span> <span m="2501630">here,</span> <span m="2501880">which</span> <span m="2501930">is</span> <span m="2502020">N</span> <span m="2502140">sub</span> <span m="2502515">0</span> <span m="2502890">equals</span> <span m="2503220">1.</span> <span m="2506220">Maybe</span> <span m="2506460">it's</span> <span m="2506570">a</span> <span m="2506640">ceiling</span> <span m="2507030">then.</span></p>
<p><span m="2507270">But</span> <span m="2507540">the</span> <span m="2507630">point</span> <span m="2507810">is</span> <span m="2507990">this</span> <span m="2508200">is</span> <span m="2508320">exponential.</span> <span m="2509380">So</span> <span m="2509490">this</span> <span m="2509670">implies</span> <span m="2510390">that</span> <span m="2510600">the</span> <span m="2510690">height</span> <span m="2511350">is</span> <span m="2511650">always,</span> <span m="2512160">at</span> <span m="2512310">most,</span> <span m="2513060">2</span> <span m="2513450">times</span> <span m="2513810">log</span> <span m="2514080">n.</span> <span m="2515730">This</span> <span m="2515970">2</span> <span m="2516480">corresponds</span> <span m="2517020">to</span> <span m="2517140">this</span> <span m="2517350">2.</span> <span m="2517810">If you</span> <span m="2517950">just</span> <span m="2518160">invert</span> <span m="2518520">this</span> <span m="2518700">formula,</span> <span m="2519510">this</span> <span m="2519750">was</span> <span m="2519840">a</span> <span m="2519870">number</span> <span m="2520110">of</span> <span m="2520230">nodes</span> <span m="2521100">is</span> <span m="2521550">going</span> <span m="2521730">to</span> <span m="2521820">be</span> <span m="2521970">at</span> <span m="2522150">least</span> <span m="2524190">2</span> <span m="2524500">to</span> <span m="2524640">the</span> <span m="2524940">h over</span> <span m="2525120">2.</span> <span m="2525600">And</span> <span m="2525840">so</span> <span m="2525990">h</span> <span m="2526200">is,</span> <span m="2526290">at</span> <span m="2526410">most,</span> <span m="2526800">2</span> <span m="2526980">log</span> <span m="2527250">n.</span> <span m="2527710">So</span> <span m="2527910">it's</span> <span m="2528060">not</span> <span m="2528430">log</span> <span m="2528695">n.</span> <span m="2528960">That</span> <span m="2529110">would</span> <span m="2529230">be</span> <span m="2529320">perfect.</span> <span m="2529830">But</span> <span m="2530040">it's</span> <span m="2530520">within</span> <span m="2530850">a</span> <span m="2530880">factor</span> <span m="2531180">of</span> <span m="2531270">2</span> <span m="2531510">of</span> <span m="2531600">log n.</span> <span m="2532020">So</span> <span m="2532290">AVL</span> <span m="2532620">trees</span> <span m="2533280">are</span> <span m="2533460">always</span> <span m="2534270">quite</span> <span m="2534570">balanced.</span> <span m="2535510">Number</span> <span m="2535860">of</span> <span m="2535950">levels</span> <span m="2536340">is</span> <span m="2536440">at</span> <span m="2536550">most</span> <span m="2536760">double</span> <span m="2537090">what</span> <span m="2537240">you</span> <span m="2537360">need</span> <span m="2537990">to</span> <span m="2538140">store</span> <span m="2538380">n</span> <span m="2538500">nodes.</span> <span m="2539830">Great.</span></p>
<p><span m="2543980">We're</span> <span m="2544220">left</span> <span m="2544520">with</span> <span m="2545540">the</span> <span m="2545750">main</span> <span m="2546170">magic--</span> <span m="2547730">not</span> <span m="2548030">domain</span> <span m="2548390">magic.</span> <span m="2548780">That's</span> <span m="2548960">different.</span> <span m="2551060">And</span> <span m="2551810">let's</span> <span m="2551990">see,</span> <span m="2552210">we're</span> <span m="2552350">going</span> <span m="2552590">to</span> <span m="2552740">use</span> <span m="2552980">subtree</span> <span m="2553370">augmentation.</span> <span m="2557550">Keep</span> <span m="2557790">that.</span> <span m="2565510">Big</span> <span m="2565840">remaining</span> <span m="2566230">challenge</span> <span m="2566770">is</span> <span m="2567790">how</span> <span m="2568090">do</span> <span m="2568210">we</span> <span m="2568330">maintain</span> <span m="2568900">this</span> <span m="2569110">high</span> <span m="2569330">balance</span> <span m="2569710">property</span> <span m="2570190">using</span> <span m="2570520">rotations?</span> <span m="2571240">We</span> <span m="2571360">have</span> <span m="2571510">all</span> <span m="2571780">the</span> <span m="2571900">ingredients</span> <span m="2572530">lined</span> <span m="2572950">up</span> <span m="2573070">for</span> <span m="2573340">us.</span></p>
<p><span m="2574190">We</span> <span m="2574330">have</span> <span m="2574510">subtree</span> <span m="2574870">augmentation.</span> <span m="2576670">What</span> <span m="2576910">does</span> <span m="2577030">that</span> <span m="2577180">let</span> <span m="2577330">me</span> <span m="2577450">do?</span> <span m="2580820">It's</span> <span m="2581000">relevant</span> <span m="2581390">to</span> <span m="2581480">AVL</span> <span m="2581880">trees.</span> <span m="2582710">Well,</span> <span m="2583070">it</span> <span m="2583280">lets</span> <span m="2583490">me</span> <span m="2583640">store</span> <span m="2584510">height.</span> <span m="2586880">I</span> <span m="2587090">need</span> <span m="2587270">to</span> <span m="2587510">be</span> <span m="2587630">able</span> <span m="2587810">to</span> <span m="2587930">compute</span> <span m="2588320">the</span> <span m="2588440">height</span> <span m="2588770">of</span> <span m="2589010">a</span> <span m="2589080">node.</span> <span m="2591230">That,</span> <span m="2591690">in</span> <span m="2591830">general,</span> <span m="2592450">takes</span> <span m="2592520">linear</span> <span m="2592820">time,</span> <span m="2593090">because</span> <span m="2593270">I</span> <span m="2593330">have</span> <span m="2593420">to</span> <span m="2593510">look</span> <span m="2593660">at</span> <span m="2593750">all</span> <span m="2594020">the</span> <span m="2594110">downward</span> <span m="2594440">paths--</span> <span m="2594800">all</span> <span m="2594950">the</span> <span m="2595040">leaves</span> <span m="2595310">within</span> <span m="2595580">that</span> <span m="2595700">subtree.</span> <span m="2596660">But</span> <span m="2596960">height</span> <span m="2597920">is</span> <span m="2598190">a</span> <span m="2598280">subtree</span> <span m="2598670">property--</span> <span m="2600520">so,</span> <span m="2602560">yes--</span> <span m="2604820">height.</span> <span m="2607470">Why?</span> <span m="2608920">Because--</span> <span m="2611110">let</span> <span m="2611200">me</span> <span m="2611350">just</span> <span m="2612130">write</span> <span m="2612400">it</span> <span m="2612490">here--</span> <span m="2613670">node.height</span> <span m="2617950">equals</span> <span m="2619330">1</span> <span m="2619780">plus</span> <span m="2620800">max</span> <span m="2622090">of</span> <span m="2622570">node.left.height</span> <span m="2629140">and</span> <span m="2629470">node.right.height</span> <span m="2635830">and</span> <span m="2636220">of</span> <span m="2636520">max.</span> <span m="2637150">Let me</span> <span m="2637600">put this</span> <span m="2638050">in</span> <span m="2638500">a</span> <span m="2638950">box.</span></p>
<p><span m="2640390">This</span> <span m="2642130">equation,</span> <span m="2642940">or</span> <span m="2643300">I</span> <span m="2643420">guess</span> <span m="2643600">it's</span> <span m="2643750">an</span> <span m="2643840">assignment</span> <span m="2644320">operation--</span> <span m="2645550">this</span> <span m="2645700">is</span> <span m="2645820">a</span> <span m="2646240">1--</span> <span m="2648540">is</span> <span m="2648810">the</span> <span m="2648870">thing</span> <span m="2649050">we've</span> <span m="2649230">been</span> <span m="2649320">doing</span> <span m="2649620">over</span> <span m="2649800">and</span> <span m="2649890">over.</span> <span m="2650100">When</span> <span m="2650250">I</span> <span m="2650340">said</span> <span m="2650550">what</span> <span m="2650700">is</span> <span m="2650820">the</span> <span m="2650910">height</span> <span m="2651090">of</span> <span m="2651210">this</span> <span m="2651360">node,</span> <span m="2651660">you</span> <span m="2651810">just</span> <span m="2652020">figured</span> <span m="2652350">that</span> <span m="2652530">out,</span> <span m="2652710">right?</span> <span m="2652890">You</span> <span m="2652950">took</span> <span m="2653130">the</span> <span m="2653250">height</span> <span m="2653430">of</span> <span m="2653520">the</span> <span m="2653580">left</span> <span m="2653790">subtree</span> <span m="2654240">maxed</span> <span m="2654495">with</span> <span m="2654750">the</span> <span m="2654840">height</span> <span m="2654960">of</span> <span m="2655050">the</span> <span m="2655140">right</span> <span m="2655320">subtree</span> <span m="2655680">and</span> <span m="2655770">added</span> <span m="2656070">1</span> <span m="2657270">to</span> <span m="2657370">account</span> <span m="2657630">for</span> <span m="2657750">these</span> <span m="2657990">edges.</span></p>
<p><span m="2659250">So</span> <span m="2659430">this</span> <span m="2659610">is</span> <span m="2659730">a</span> <span m="2659790">general</span> <span m="2660120">update</span> <span m="2660480">rule.</span> <span m="2660930">It</span> <span m="2661140">matches</span> <span m="2661650">this</span> <span m="2661830">subtree</span> <span m="2662520">property</span> <span m="2663030">pattern.</span> <span m="2663540">If</span> <span m="2663690">I</span> <span m="2663780">have</span> <span m="2663960">the</span> <span m="2664050">property</span> <span m="2664440">of</span> <span m="2664530">left</span> <span m="2664740">and</span> <span m="2664830">right,</span> <span m="2665280">I</span> <span m="2665490">can</span> <span m="2665640">compute</span> <span m="2665970">it</span> <span m="2666120">for</span> <span m="2666330">node.</span> <span m="2667800">And</span> <span m="2668170">this</span> <span m="2668310">takes</span> <span m="2668520">constant</span> <span m="2668880">time</span> <span m="2669120">to</span> <span m="2669210">do.</span> <span m="2669570">And</span> <span m="2669780">so</span> <span m="2669930">it's</span> <span m="2670050">a</span> <span m="2670110">subtree</span> <span m="2670440">property.</span> <span m="2670900">And</span> <span m="2671000">so</span> <span m="2671100">I</span> <span m="2671200">can</span> <span m="2671300">maintain,</span> <span m="2672120">through</span> <span m="2672330">all</span> <span m="2672480">the</span> <span m="2672570">things</span> <span m="2672810">I'm</span> <span m="2672960">doing,</span> <span m="2673590">the</span> <span m="2673740">height</span> <span m="2673890">of</span> <span m="2673980">every</span> <span m="2674160">node.</span></p>
<p><span m="2674430">Oh</span> <span m="2674700">by</span> <span m="2674910">the</span> <span m="2675030">way,</span> <span m="2676000">whenever</span> <span m="2676380">I</span> <span m="2676470">do</span> <span m="2676620">a</span> <span m="2676680">rotation,</span> <span m="2677800">I'm</span> <span m="2678000">also</span> <span m="2678360">going</span> <span m="2678480">to</span> <span m="2678540">have</span> <span m="2678720">to</span> <span m="2678810">update</span> <span m="2679170">my</span> <span m="2679290">subtree</span> <span m="2679680">properties.</span> <span m="2681180">When</span> <span m="2681450">I</span> <span m="2681600">rotate</span> <span m="2682050">this</span> <span m="2682260">edge,</span> <span m="2683700">A</span> <span m="2683980">does</span> <span m="2684180">not</span> <span m="2684390">change,</span> <span m="2684750">B</span> <span m="2684930">does</span> <span m="2685110">not</span> <span m="2685320">change,</span> <span m="2685720">C</span> <span m="2685920">does</span> <span m="2686100">not</span> <span m="2686250">change.</span> <span m="2686710">So</span> <span m="2686790">that's</span> <span m="2687030">good.</span> <span m="2688080">But</span> <span m="2688470">x's</span> <span m="2688950">subtree</span> <span m="2689370">changes.</span> <span m="2689685">It</span> <span m="2690000">now</span> <span m="2690240">has</span> <span m="2690570">y.</span> <span m="2690840">It</span> <span m="2690930">didn't</span> <span m="2691170">before.</span> <span m="2692320">So</span> <span m="2692460">we're</span> <span m="2692580">going</span> <span m="2692700">to</span> <span m="2692760">have</span> <span m="2693000">to</span> <span m="2693180">also</span> <span m="2694410">update</span> <span m="2694830">the</span> <span m="2694920">augmentation</span> <span m="2695550">here</span> <span m="2696620">in</span> <span m="2696990">y.</span> <span m="2698970">And</span> <span m="2699360">we're</span> <span m="2699450">going</span> <span m="2699570">to</span> <span m="2699660">have</span> <span m="2699810">to</span> <span m="2699900">update</span> <span m="2700260">the</span> <span m="2700350">augmentation</span> <span m="2700960">in</span> <span m="2701100">x.</span> <span m="2703550">And</span> <span m="2704010">we're</span> <span m="2704130">going</span> <span m="2704250">to</span> <span m="2704340">have</span> <span m="2704490">to</span> <span m="2704580">update</span> <span m="2704940">the</span> <span m="2705060">augmentation</span> <span m="2705750">of</span> <span m="2705930">all</span> <span m="2706260">of</span> <span m="2706380">the</span> <span m="2706500">ancestors</span> <span m="2707070">of</span> <span m="2707160">x</span> <span m="2707970">eventually.</span></p>
<p><span m="2710280">So</span> <span m="2710610">rotation</span> <span m="2711690">is</span> <span m="2711930">locally</span> <span m="2712290">just</span> <span m="2712470">changing</span> <span m="2712890">a</span> <span m="2712980">constant</span> <span m="2713340">number</span> <span m="2713520">of</span> <span m="2713580">pointers.</span> <span m="2713910">So</span> <span m="2714060">I</span> <span m="2714150">usually</span> <span m="2714450">think</span> <span m="2714630">of</span> <span m="2714750">rotations</span> <span m="2715240">as</span> <span m="2715350">taking</span> <span m="2715770">constant</span> <span m="2716220">time.</span> <span m="2718050">But</span> <span m="2718350">eventually,</span> <span m="2718890">we</span> <span m="2719040">will</span> <span m="2719250">have</span> <span m="2719430">to</span> <span m="2719520">do--</span> <span m="2720870">this</span> <span m="2721070">is</span> <span m="2721200">constant</span> <span m="2721530">time</span> <span m="2721770">locally.</span> <span m="2725250">But</span> <span m="2725670">we</span> <span m="2725880">will</span> <span m="2726090">need</span> <span m="2726300">to</span> <span m="2726780">update</span> <span m="2732690">h</span> <span m="2732960">ancestors</span> <span m="2735240">in</span> <span m="2735510">order</span> <span m="2735720">to</span> <span m="2735900">store</span> <span m="2736230">all</span> <span m="2736410">of--</span> <span m="2736695">keep</span> <span m="2736980">all</span> <span m="2737190">of</span> <span m="2737280">our</span> <span m="2737400">augmentations</span> <span m="2738060">up</span> <span m="2738240">to</span> <span m="2738300">date.</span> <span m="2739470">We'll</span> <span m="2739590">worry</span> <span m="2739800">about</span> <span m="2739980">that</span> <span m="2740130">later.</span></p>
<p><span m="2743380">All</span> <span m="2743530">right,</span> <span m="2743740">so</span> <span m="2744010">great.</span> <span m="2744250">Now</span> <span m="2744490">we</span> <span m="2744610">have</span> <span m="2744760">the</span> <span m="2744850">height</span> <span m="2745030">of</span> <span m="2745150">all</span> <span m="2745300">the</span> <span m="2745390">nodes.</span> <span m="2745720">We</span> <span m="2745840">can</span> <span m="2745990">compute</span> <span m="2746320">the</span> <span m="2746830">skew</span> <span m="2747220">of</span> <span m="2747340">all</span> <span m="2747460">the</span> <span m="2747550">nodes,</span> <span m="2748720">cool.</span> <span m="2750860">We</span> <span m="2750940">have</span> <span m="2751060">this</span> <span m="2751210">rotation</span> <span m="2751660">operation.</span> <span m="2752570">And</span> <span m="2752650">we</span> <span m="2752860">want</span> <span m="2753070">to</span> <span m="2753130">maintain</span> <span m="2756670">this</span> <span m="2757000">height</span> <span m="2757210">balance</span> <span m="2757570">property.</span> <span m="2758320">Height</span> <span m="2758590">of</span> <span m="2758680">left</span> <span m="2758890">node--</span> <span m="2759340">left</span> <span m="2759670">and</span> <span m="2759880">right</span> <span m="2760210">of</span> <span m="2760360">every</span> <span m="2760750">node--</span> <span m="2762130">is</span> <span m="2762340">plus</span> <span m="2762550">or</span> <span m="2762610">minus</span> <span m="2762880">1,</span> <span m="2763120">or</span> <span m="2763210">0.</span></p>
<p><span m="2766210">Cool,</span> <span m="2769080">so</span> <span m="2769800">I</span> <span m="2769980">said</span> <span m="2770280">over</span> <span m="2770490">here</span> <span m="2770670">somewhere,</span> <span m="2772830">whenever</span> <span m="2773370">we--</span> <span m="2773940">so</span> <span m="2774180">the</span> <span m="2774330">only</span> <span m="2774540">things</span> <span m="2774750">that</span> <span m="2774870">change</span> <span m="2775140">the</span> <span m="2775230">tree are</span> <span m="2775500">when</span> <span m="2775650">we</span> <span m="2775740">insert</span> <span m="2776070">or</span> <span m="2776130">delete</span> <span m="2776460">a</span> <span m="2776550">new</span> <span m="2776910">node.</span> <span m="2777630">And</span> <span m="2778230">the</span> <span m="2778320">way</span> <span m="2778530">that</span> <span m="2778680">we</span> <span m="2778800">implemented</span> <span m="2779280">those</span> <span m="2779430">so</span> <span m="2779610">far</span> <span m="2780210">is</span> <span m="2780480">to</span> <span m="2780600">add</span> <span m="2780840">or</span> <span m="2780900">remove</span> <span m="2781170">a</span> <span m="2781230">leaf.</span> <span m="2781950">So</span> <span m="2782190">we</span> <span m="2782310">should</span> <span m="2782460">still</span> <span m="2782790">be</span> <span m="2782940">thinking</span> <span m="2783300">about</span> <span m="2784050">adding</span> <span m="2784410">or</span> <span m="2784500">removing</span> <span m="2784890">a</span> <span m="2784920">leaf.</span> <span m="2785160">The</span> <span m="2785250">problem</span> <span m="2785700">is,</span> <span m="2785850">when</span> <span m="2786000">I</span> <span m="2786090">add</span> <span m="2786330">a</span> <span m="2786360">new</span> <span m="2786540">leaf,</span> <span m="2787410">now</span> <span m="2787860">maybe</span> <span m="2788280">this</span> <span m="2788610">tree</span> <span m="2789000">is</span> <span m="2789360">higher</span> <span m="2789900">than</span> <span m="2790080">it</span> <span m="2790170">used</span> <span m="2790410">to</span> <span m="2790500">be.</span> <span m="2791320">So</span> <span m="2792570">some</span> <span m="2792960">node</span> <span m="2793170">here</span> <span m="2793410">may</span> <span m="2793530">no</span> <span m="2793680">longer</span> <span m="2793950">be</span> <span m="2794280">height</span> <span m="2794550">balanced.</span></p>
<p><span m="2795270">But</span> <span m="2795540">because</span> <span m="2795960">height</span> <span m="2796200">is</span> <span m="2796350">a</span> <span m="2796440">subtree</span> <span m="2796800">property,</span> <span m="2797220">the</span> <span m="2797370">only</span> <span m="2797970">nodes</span> <span m="2798240">we</span> <span m="2798360">need</span> <span m="2798510">to</span> <span m="2798600">check</span> <span m="2799290">are</span> <span m="2799590">the</span> <span m="2799740">ones</span> <span m="2800070">up</span> <span m="2800340">this</span> <span m="2800580">ancestor</span> <span m="2801060">path.</span> <span m="2802330">And</span> <span m="2802470">there's</span> <span m="2802620">only</span> <span m="2802850">log</span> <span m="2802940">n</span> <span m="2803160">of</span> <span m="2803280">them,</span> <span m="2803430">because</span> <span m="2803670">now</span> <span m="2803910">height</span> <span m="2804150">is</span> <span m="2804330">log</span> <span m="2804540">n.</span> <span m="2804900">That's</span> <span m="2805110">what</span> <span m="2805200">we</span> <span m="2805290">just</span> <span m="2805470">proved</span> <span m="2806470">as</span> <span m="2806580">long</span> <span m="2806760">as</span> <span m="2806850">we</span> <span m="2806970">have</span> <span m="2807150">this</span> <span m="2807300">property.</span> <span m="2807660">Now,</span> <span m="2807840">we</span> <span m="2807990">right</span> <span m="2808290">now</span> <span m="2808500">don't</span> <span m="2808710">have</span> <span m="2808920">it</span> <span m="2809070">for,</span> <span m="2809670">like,</span> <span m="2810450">maybe</span> <span m="2810810">these</span> <span m="2811050">few</span> <span m="2811230">nodes.</span> <span m="2811620">But</span> <span m="2811800">it</span> <span m="2812760">was</span> <span m="2812850">long</span> <span m="2813090">n</span> <span m="2813180">before.</span> <span m="2813570">It's</span> <span m="2813720">at</span> <span m="2813810">most</span> <span m="2814020">log</span> <span m="2814230">n--</span> <span m="2814470">2</span> <span m="2814710">log</span> <span m="2814920">n</span> <span m="2815040">plus</span> <span m="2815400">1</span> <span m="2815640">right</span> <span m="2815820">now,</span> <span m="2816000">because</span> <span m="2816180">we</span> <span m="2816240">just</span> <span m="2816390">added</span> <span m="2816690">a</span> <span m="2816750">node.</span></p>
<p><span m="2818250">So</span> <span m="2818610">what</span> <span m="2818790">I</span> <span m="2818880">want</span> <span m="2819000">to</span> <span m="2819090">do</span> <span m="2819180">is</span> <span m="2819330">check</span> <span m="2819720">all</span> <span m="2819960">of</span> <span m="2820080">these</span> <span m="2820380">ancestor</span> <span m="2820920">nodes</span> <span m="2821190">in</span> <span m="2821730">sequence</span> <span m="2822390">from</span> <span m="2822660">bottom</span> <span m="2822960">up,</span> <span m="2823620">and</span> <span m="2823890">find</span> <span m="2824310">one</span> <span m="2824550">that's</span> <span m="2824760">out</span> <span m="2824940">of</span> <span m="2825030">balance.</span> <span m="2826550">So</span> <span m="2826680">let's</span> <span m="2826950">take</span> <span m="2827340">the</span> <span m="2831780">lowest</span> <span m="2834030">out</span> <span m="2834870">of</span> <span m="2834960">balance</span> <span m="2835350">node.</span> <span m="2841540">I'm</span> <span m="2841925">going</span> <span m="2842310">to</span> <span m="2842410">call</span> <span m="2842610">that</span> <span m="2844170">x.</span> <span m="2844860">Now,</span> <span m="2845100">because</span> <span m="2845430">we</span> <span m="2845550">just</span> <span m="2845760">insert</span> <span m="2846150">or</span> <span m="2846270">deleted</span> <span m="2846750">a</span> <span m="2846900">single</span> <span m="2847320">leaf,</span> <span m="2848370">it's</span> <span m="2848610">only</span> <span m="2848880">out</span> <span m="2849030">of</span> <span m="2849090">balance</span> <span m="2849420">by</span> <span m="2849630">1,</span> <span m="2851550">because</span> <span m="2851760">we</span> <span m="2851880">only</span> <span m="2852090">changed</span> <span m="2852540">height--</span> <span m="2853590">one</span> <span m="2853950">height</span> <span m="2854220">went</span> <span m="2854430">up</span> <span m="2854670">by</span> <span m="2854880">1,</span> <span m="2855060">or</span> <span m="2855150">one</span> <span m="2855330">height</span> <span m="2855510">went</span> <span m="2855690">down</span> <span m="2855930">by</span> <span m="2856110">1.</span> <span m="2856710">And</span> <span m="2856950">before,</span> <span m="2857850">all</span> <span m="2858150">of</span> <span m="2858300">our</span> <span m="2858420">skews</span> <span m="2858810">were</span> <span m="2858930">plus</span> <span m="2859170">or</span> <span m="2859260">minus</span> <span m="2859560">1,</span> <span m="2860160">or</span> <span m="2860310">0.</span></p>
<p><span m="2860730">So</span> <span m="2860910">now,</span> <span m="2861450">it's--</span> <span m="2861990">the</span> <span m="2862140">bad</span> <span m="2862410">case is</span> <span m="2862800">when</span> <span m="2862920">it's</span> <span m="2863040">plus</span> <span m="2863250">or</span> <span m="2863340">minus</span> <span m="2863640">2.</span> <span m="2864810">If</span> <span m="2864900">it</span> <span m="2864990">happens</span> <span m="2865290">to</span> <span m="2865380">still</span> <span m="2865560">be</span> <span m="2865650">in</span> <span m="2865740">this</span> <span m="2865860">range</span> <span m="2866130">for</span> <span m="2866220">all</span> <span m="2866340">the</span> <span m="2866430">nodes,</span> <span m="2866640">we're</span> <span m="2866760">happy.</span> <span m="2867510">But</span> <span m="2867810">if</span> <span m="2867990">it's</span> <span m="2868110">outside</span> <span m="2868410">this</span> <span m="2868560">range,</span> <span m="2868770">it's</span> <span m="2868890">only</span> <span m="2869040">going</span> <span m="2869160">to</span> <span m="2869250">be</span> <span m="2869310">out</span> <span m="2869460">by</span> <span m="2869640">1.</span> <span m="2871080">So</span> <span m="2871350">this</span> <span m="2871560">means</span> <span m="2871890">the</span> <span m="2871980">skew</span> <span m="2873630">is</span> <span m="2874020">n</span> <span m="2874500">plus</span> <span m="2875940">2</span> <span m="2876420">or</span> <span m="2876630">minus</span> <span m="2877020">2.</span> <span m="2878550">And</span> <span m="2878940">let's</span> <span m="2879240">say</span> <span m="2879600">that</span> <span m="2879780">it's</span> <span m="2879990">2</span> <span m="2880665">by</span> <span m="2880950">symmetry.</span> <span m="2881910">So</span> <span m="2883410">my</span> <span m="2883680">picture</span> <span m="2884070">is--</span> <span m="2886098">I'm going to</span> <span m="2886584">draw</span> <span m="2887070">double</span> <span m="2888060">right</span> <span m="2888420">arrow</span> <span m="2890010">to</span> <span m="2890190">say</span> <span m="2890520">that</span> <span m="2894480">this</span> <span m="2894740">subtree</span> <span m="2895110">is</span> <span m="2895320">2</span> <span m="2896130">higher</span> <span m="2896940">than</span> <span m="2897180">this</span> <span m="2897510">subtree.</span> <span m="2898590">OK,</span> <span m="2898860">so</span> <span m="2899130">that's</span> <span m="2899340">bad</span> <span m="2899730">and</span> <span m="2899880">we</span> <span m="2900000">want</span> <span m="2900150">to</span> <span m="2900210">fix</span> <span m="2900480">it.</span></p>
<p><span m="2901320">The</span> <span m="2901530">obvious</span> <span m="2901980">thing</span> <span m="2902190">to</span> <span m="2902310">do</span> <span m="2903480">is</span> <span m="2903750">to</span> <span m="2903870">rotate</span> <span m="2904350">this</span> <span m="2904560">edge.</span> <span m="2905400">Because</span> <span m="2905580">that'll</span> <span m="2905820">make</span> <span m="2906000">this--</span> <span m="2909030">this</span> <span m="2909240">is</span> <span m="2909360">too</span> <span m="2909540">high</span> <span m="2909930">and</span> <span m="2910140">this</span> <span m="2910350">is</span> <span m="2910500">too</span> <span m="2910770">low.</span> <span m="2911590">So</span> <span m="2911790">if</span> <span m="2911910">we</span> <span m="2912030">rotate,</span> <span m="2912480">this</span> <span m="2912660">should</span> <span m="2912810">go</span> <span m="2912930">down</span> <span m="2913110">by</span> <span m="2913260">1</span> <span m="2913410">and</span> <span m="2913500">this</span> <span m="2913620">should</span> <span m="2913740">go</span> <span m="2913890">up</span> <span m="2913980">by</span> <span m="2914130">1.</span> <span m="2914550">And</span> <span m="2914760">that</span> <span m="2914910">works</span> <span m="2915450">most</span> <span m="2916020">of</span> <span m="2916110">the</span> <span m="2916200">time.</span> <span m="2918070">So</span> <span m="2918390">case</span> <span m="2918870">one</span> <span m="2921030">is</span> <span m="2921390">the</span> <span m="2921600">skew</span> <span m="2923580">of</span> <span m="2924840">y.</span> <span m="2925200">What</span> <span m="2925410">is</span> <span m="2925560">y?</span> <span m="2925860">I</span> <span m="2926010">want</span> <span m="2926250">y</span> <span m="2926550">to</span> <span m="2926730">be</span> <span m="2926970">the</span> <span m="2927180">right</span> <span m="2927600">child</span> <span m="2928980">of</span> <span m="2929310">x.</span> <span m="2930090">Because</span> <span m="2930510">we</span> <span m="2930630">have</span> <span m="2930970">a</span> <span m="2930990">positive</span> <span m="2931500">skew,</span> <span m="2931740">we</span> <span m="2931860">know</span> <span m="2932040">there</span> <span m="2932160">is</span> <span m="2932340">a</span> <span m="2932400">right</span> <span m="2932580">child.</span></p>
<p><span m="2934260">Now,</span> <span m="2935160">because</span> <span m="2935460">this</span> <span m="2935610">was</span> <span m="2935790">the</span> <span m="2935910">lowest</span> <span m="2936420">bad</span> <span m="2936720">node,</span> <span m="2937120">we</span> <span m="2937170">know</span> <span m="2937320">that</span> <span m="2937470">y</span> <span m="2937680">is</span> <span m="2937830">actually</span> <span m="2938190">good.</span> <span m="2938770">It's</span> <span m="2938970">either</span> <span m="2939750">right</span> <span m="2940200">heavy--</span> <span m="2940680">or</span> <span m="2941100">even</span> <span m="2941520">the</span> <span m="2941640">two</span> <span m="2941880">subtrees</span> <span m="2942300">have</span> <span m="2942420">the</span> <span m="2942510">same</span> <span m="2942780">height--</span> <span m="2943230">or</span> <span m="2943560">left</span> <span m="2943800">heavy.</span> <span m="2944820">The</span> <span m="2945000">easy</span> <span m="2945270">cases</span> <span m="2947250">are</span> <span m="2952200">when</span> <span m="2952800">skew</span> <span m="2953310">of</span> <span m="2953520">y</span> <span m="2953940">is</span> <span m="2954210">either</span> <span m="2955020">1</span> <span m="2956160">or</span> <span m="2956550">0,</span> <span m="2961377">which</span> <span m="2961850">I will</span> <span m="2962330">draw.</span> <span m="2969980">So a</span> <span m="2970410">double</span> <span m="2970850">right</span> <span m="2971180">arrow,</span> <span m="2972020">let's</span> <span m="2972290">say</span> <span m="2973340">single</span> <span m="2973880">right</span> <span m="2974150">arrow--</span> <span m="2980430">so</span> <span m="2981710">I'm</span> <span m="2981890">just</span> <span m="2982040">going</span> <span m="2982160">to</span> <span m="2982220">add</span> <span m="2982370">some</span> <span m="2982550">labels</span> <span m="2982940">here</span> <span m="2984020">to</span> <span m="2984140">make</span> <span m="2984380">this</span> <span m="2984590">picture</span> <span m="2984980">consistent--</span> <span m="2988562">k</span> <span m="2989050">plus</span> <span m="2989380">1,</span> <span m="2990250">k</span> <span m="2990730">plus</span> <span m="2991000">2.</span> <span m="2991210">I'm</span> <span m="2991330">riding</span> <span m="2991630">the</span> <span m="2991720">heights.</span></p>
<p><span m="2992770">So</span> <span m="2993040">this</span> <span m="2993250">is</span> <span m="2993340">an</span> <span m="2993460">example</span> <span m="2993880">where</span> <span m="2994120">C</span> <span m="2994990">is</span> <span m="2995590">taller</span> <span m="2996010">than</span> <span m="2996190">B.</span> <span m="2997720">A</span> <span m="2998140">and</span> <span m="2998290">B</span> <span m="2998440">are</span> <span m="2998530">the</span> <span m="2998620">same</span> <span m="2998980">height.</span> <span m="2999220">And</span> <span m="2999310">then</span> <span m="2999400">if</span> <span m="2999490">you</span> <span m="2999610">compute</span> <span m="2999880">the</span> <span m="2999970">heights</span> <span m="3000180">up</span> <span m="3000330">here,</span> <span m="3000780">indeed</span> <span m="3001560">this</span> <span m="3001800">one</span> <span m="3002010">is</span> <span m="3002580">right</span> <span m="3003030">leaning.</span> <span m="3003480">This</span> <span m="3003690">one</span> <span m="3003840">is</span> <span m="3003990">doubly</span> <span m="3004380">right</span> <span m="3004620">leaning.</span> <span m="3005220">Because</span> <span m="3005370">this</span> <span m="3005520">one</span> <span m="3005670">has</span> <span m="3005880">height</span> <span m="3006150">k</span> <span m="3006390">plus</span> <span m="3006690">1.</span> <span m="3006850">This</span> <span m="3006960">one</span> <span m="3007080">has</span> <span m="3007170">height</span> <span m="3007530">k minus</span> <span m="3007830">1.</span> <span m="3007980">That's</span> <span m="3008130">bad.</span> <span m="3008890">But</span> <span m="3009000">if</span> <span m="3009090">we</span> <span m="3009180">do</span> <span m="3009330">this</span> <span m="3009540">right</span> <span m="3009780">rotation</span> <span m="3010290">on</span> <span m="3010470">x,</span> <span m="3011370">we</span> <span m="3011640">get</span> <span m="3012960">exactly</span> <span m="3013470">what</span> <span m="3013620">we</span> <span m="3013770">want.</span></p>
<p><span m="3018010">So</span> <span m="3018060">I'm</span> <span m="3018180">just</span> <span m="3018300">going</span> <span m="3018420">to</span> <span m="3018510">copy</span> <span m="3019530">the</span> <span m="3019710">labels</span> <span m="3020070">on</span> <span m="3020250">A, B,</span> <span m="3020595">C--</span> <span m="3020940">we</span> <span m="3021090">have</span> <span m="3021240">k</span> <span m="3021420">minus</span> <span m="3021750">1,</span> <span m="3022080">k</span> <span m="3022320">minus</span> <span m="3022710">1,</span> <span m="3023040">and</span> <span m="3023160">k--</span> <span m="3023760">and</span> <span m="3023970">then</span> <span m="3024120">recompute.</span> <span m="3024630">That</span> <span m="3024780">means</span> <span m="3024990">this</span> <span m="3025110">guy</span> <span m="3025320">has</span> <span m="3025500">height</span> <span m="3025785">k,</span> <span m="3026400">this</span> <span m="3026640">one</span> <span m="3026820">has</span> <span m="3027090">height</span> <span m="3027690">k</span> <span m="3027930">plus</span> <span m="3028170">1.</span> <span m="3029040">And</span> <span m="3029250">now,</span> <span m="3029790">all</span> <span m="3030090">the</span> <span m="3030180">nodes</span> <span m="3030420">in</span> <span m="3030540">this</span> <span m="3030660">picture</span> <span m="3031020">that</span> <span m="3031170">I've</span> <span m="3031290">highlighted--</span> <span m="3031740">A,</span> <span m="3031860">B,</span> <span m="3031950">and</span> <span m="3032070">C</span> <span m="3032250">haven't</span> <span m="3032490">changed.</span> <span m="3032820">They</span> <span m="3032970">were</span> <span m="3033120">height</span> <span m="3033260">balanced</span> <span m="3033540">before.</span> <span m="3033870">They</span> <span m="3033990">still</span> <span m="3034230">are.</span> <span m="3035400">But</span> <span m="3035610">now,</span> <span m="3035910">x</span> <span m="3036210">and</span> <span m="3036330">y--</span> <span m="3036720">x</span> <span m="3036990">wasn't</span> <span m="3037290">height</span> <span m="3037440">balanced</span> <span m="3037770">before,</span> <span m="3038190">y</span> <span m="3038400">was.</span> <span m="3039030">Now,</span> <span m="3039300">both</span> <span m="3039630">x</span> <span m="3039900">and</span> <span m="3039990">y</span> <span m="3040200">are</span> <span m="3040290">height</span> <span m="3040470">balanced.</span> <span m="3042420">That's</span> <span m="3042810">case</span> <span m="3043080">one.</span></p>
<p><span m="3044160">In</span> <span m="3044580">case</span> <span m="3044940">two,</span> <span m="3045750">the</span> <span m="3045870">skew</span> <span m="3046200">of</span> <span m="3046320">y</span> <span m="3047490">is</span> <span m="3047940">flat,</span> <span m="3049390">which</span> <span m="3049620">means</span> <span m="3050250">that</span> <span m="3050640">this</span> <span m="3050910">is</span> <span m="3051090">a</span> <span m="3051150">k,</span> <span m="3052470">and</span> <span m="3052830">this</span> <span m="3053070">is</span> <span m="3053250">a</span> <span m="3053340">k,</span> <span m="3054870">and</span> <span m="3055170">this</span> <span m="3055350">is</span> <span m="3055500">a</span> <span m="3055560">k</span> <span m="3055740">plus</span> <span m="3056040">1,</span> <span m="3056490">and</span> <span m="3056610">this</span> <span m="3056760">is</span> <span m="3056880">a</span> <span m="3056940">k</span> <span m="3057150">plus</span> <span m="3057390">2.</span> <span m="3058570">But</span> <span m="3058680">still,</span> <span m="3059010">all</span> <span m="3059220">the</span> <span m="3059310">nodes</span> <span m="3059610">are</span> <span m="3059700">balanced--</span> <span m="3060810">height</span> <span m="3061080">balanced.</span> <span m="3061410">They're</span> <span m="3061530">still</span> <span m="3061740">plus</span> <span m="3061980">or</span> <span m="3062070">minus</span> <span m="3062370">1.</span> <span m="3063090">So</span> <span m="3063300">those</span> <span m="3063510">are</span> <span m="3063600">the</span> <span m="3063690">easy</span> <span m="3063930">cases.</span></p>
<p><span m="3064440">Unfortunately,</span> <span m="3065130">there</span> <span m="3065250">is</span> <span m="3065400">a</span> <span m="3065460">hard</span> <span m="3065670">case--</span> <span m="3067240">case</span> <span m="3067710">three.</span> <span m="3068280">But</span> <span m="3068490">there's</span> <span m="3068640">only</span> <span m="3068850">one,</span> <span m="3069990">and</span> <span m="3070260">it's</span> <span m="3070380">not</span> <span m="3070560">that</span> <span m="3070710">much</span> <span m="3070920">harder.</span> <span m="3076320">So</span> <span m="3076690">it's</span> <span m="3076860">when</span> <span m="3077160">skew</span> <span m="3077700">of</span> <span m="3077970">y</span> <span m="3078450">is</span> <span m="3078750">minus</span> <span m="3079140">1.</span> <span m="3081780">In</span> <span m="3082020">this</span> <span m="3082200">case,</span> <span m="3082720">we</span> <span m="3082800">need</span> <span m="3082950">to</span> <span m="3083070">look</span> <span m="3083250">at</span> <span m="3083340">the</span> <span m="3083430">left</span> <span m="3083820">child</span> <span m="3084210">of</span> <span m="3084330">y.</span> <span m="3088590">And</span> <span m="3088980">to</span> <span m="3089220">be</span> <span m="3089490">alphabetical,</span> <span m="3090450">I'm</span> <span m="3090600">going</span> <span m="3090720">to</span> <span m="3090870">rename</span> <span m="3091260">this</span> <span m="3091410">to</span> <span m="3091530">z.</span> <span m="3094470">So</span> <span m="3094650">this</span> <span m="3094830">one,</span> <span m="3094980">again,</span> <span m="3095190">is</span> <span m="3095370">double</span> <span m="3095760">right</span> <span m="3096030">arrow.</span> <span m="3096780">This</span> <span m="3097050">one</span> <span m="3097200">is</span> <span m="3097320">now</span> <span m="3097620">left</span> <span m="3098040">arrow.</span> <span m="3099540">And</span> <span m="3099930">this</span> <span m="3100170">is</span> <span m="3100450">letter</span> <span m="3100710">y.</span></p>
<p><span m="3101910">And</span> <span m="3102180">so</span> <span m="3102390">we</span> <span m="3102540">have</span> <span m="3102930">A,</span> <span m="3104280">B,</span> <span m="3105822">C,</span> <span m="3106764">and</span> <span m="3107235">D</span> <span m="3108180">potential</span> <span m="3108840">subtrees</span> <span m="3109500">hanging</span> <span m="3109770">off</span> <span m="3109950">of</span> <span m="3110040">them.</span> <span m="3110550">And</span> <span m="3110790">I'm</span> <span m="3110850">going</span> <span m="3110970">to</span> <span m="3111030">label</span> <span m="3112020">the</span> <span m="3112200">heights</span> <span m="3112560">of</span> <span m="3112680">these</span> <span m="3112890">things.</span> <span m="3114310">These</span> <span m="3114480">are</span> <span m="3114600">each</span> <span m="3114900">k</span> <span m="3115110">minus</span> <span m="3115440">1</span> <span m="3115800">or</span> <span m="3116805">k</span> <span m="3117240">minus</span> <span m="3117630">2.</span> <span m="3119010">This</span> <span m="3119310">one's</span> <span m="3119580">k</span> <span m="3119760">minus</span> <span m="3120090">1.</span> <span m="3120420">And</span> <span m="3120540">now,</span> <span m="3120720">compute</span> <span m="3121110">the</span> <span m="3121260">inside.</span> <span m="3121770">So</span> <span m="3122400">this</span> <span m="3122730">is</span> <span m="3122940">going</span> <span m="3123060">to</span> <span m="3123180">height</span> <span m="3123630">k</span> <span m="3124110">for</span> <span m="3124290">this</span> <span m="3124500">to</span> <span m="3124620">be</span> <span m="3125520">left</span> <span m="3125940">leaning.</span> <span m="3126690">So</span> <span m="3126870">this</span> <span m="3127050">is</span> <span m="3127200">k</span> <span m="3127380">plus</span> <span m="3127620">1,</span> <span m="3128730">and</span> <span m="3129000">this</span> <span m="3129180">is</span> <span m="3129300">k</span> <span m="3129870">plus</span> <span m="3130380">2.</span></p>
<p><span m="3131520">But</span> <span m="3131670">the</span> <span m="3131730">problem</span> <span m="3132060">is</span> <span m="3132240">this</span> <span m="3132450">is</span> <span m="3132600">2</span> <span m="3132840">higher</span> <span m="3133230">than</span> <span m="3133410">this.</span> <span m="3133680">The</span> <span m="3133800">height</span> <span m="3134010">of</span> <span m="3134100">z</span> <span m="3134430">is</span> <span m="3134580">2</span> <span m="3134790">higher</span> <span m="3135090">than</span> <span m="3135270">the</span> <span m="3135360">height</span> <span m="3135600">of</span> <span m="3135750">A.</span> <span m="3137370">This</span> <span m="3137520">case,</span> <span m="3137890">if</span> <span m="3137940">I</span> <span m="3138060">do</span> <span m="3138270">this</span> <span m="3138420">rotation,</span> <span m="3138990">things</span> <span m="3139260">get</span> <span m="3139560">worse,</span> <span m="3139890">actually.</span> <span m="3140910">I'll</span> <span m="3141270">just</span> <span m="3141480">tell</span> <span m="3141750">you</span> <span m="3141990">the</span> <span m="3142290">right</span> <span m="3142710">thing</span> <span m="3142920">to</span> <span m="3143040">do</span> <span m="3144600">is--</span> <span m="3146610">this</span> <span m="3146820">is</span> <span m="3146940">the</span> <span m="3147060">one</span> <span m="3147300">thing</span> <span m="3147480">you</span> <span m="3147600">need</span> <span m="3147780">to</span> <span m="3147930">memorize.</span> <span m="3161700">And</span> <span m="3162170">let</span> <span m="3162290">me</span> <span m="3162410">draw</span> <span m="3162800">the</span> <span m="3162920">results.</span> <span m="3163860">You</span> <span m="3163970">can</span> <span m="3164120">also</span> <span m="3164330">just</span> <span m="3164450">think</span> <span m="3164660">of</span> <span m="3164780">it</span> <span m="3164840">as</span> <span m="3164960">redrawing</span> <span m="3165380">the</span> <span m="3165470">tree</span> <span m="3165710">like</span> <span m="3165920">this.</span> <span m="3167300">But</span> <span m="3168050">it's</span> <span m="3168290">easier</span> <span m="3168650">from</span> <span m="3168800">an</span> <span m="3168860">analysis</span> <span m="3169430">perspective</span> <span m="3169940">to</span> <span m="3170030">think</span> <span m="3170240">about</span> <span m="3170480">it</span> <span m="3170570">as</span> <span m="3170690">two</span> <span m="3170840">rotations.</span> <span m="3171680">Then</span> <span m="3171920">we</span> <span m="3172010">can</span> <span m="3172130">just</span> <span m="3172370">reduce.</span></p>
<p><span m="3172940">As</span> <span m="3173060">long</span> <span m="3173210">as</span> <span m="3173270">we</span> <span m="3173360">know how</span> <span m="3173450">rotations</span> <span m="3173960">work,</span> <span m="3174800">then</span> <span m="3175010">we</span> <span m="3175130">know</span> <span m="3175370">that this</span> <span m="3175550">thing</span> <span m="3175700">works--</span> <span m="3176460">"works"</span> <span m="3176840">meaning</span> <span m="3177500">it</span> <span m="3177680">preserves</span> <span m="3178100">traversal</span> <span m="3178520">order</span> <span m="3179060">and</span> <span m="3179360">we</span> <span m="3179480">can</span> <span m="3179630">maintain</span> <span m="3179990">all</span> <span m="3180080">the</span> <span m="3180200">augmentations.</span> <span m="3181160">So</span> <span m="3181340">now,</span> <span m="3181460">if</span> <span m="3181550">I</span> <span m="3181610">copy</span> <span m="3181970">over</span> <span m="3182630">these</span> <span m="3182870">labels--</span> <span m="3183250">the</span> <span m="3183630">height</span> <span m="3183920">labels--</span> <span m="3184340">I have</span> <span m="3184520">k</span> <span m="3184730">minus</span> <span m="3185030">1.</span> <span m="3185390">I</span> <span m="3185510">have,</span> <span m="3185750">for</span> <span m="3185870">these</span> <span m="3186080">two</span> <span m="3186200">guys,</span> <span m="3186500">k</span> <span m="3186710">minus</span> <span m="3187010">1</span> <span m="3187340">or</span> <span m="3187670">k</span> <span m="3187880">minus</span> <span m="3188240">2.</span> <span m="3188600">The</span> <span m="3188900">biggest</span> <span m="3189320">one</span> <span m="3189650">is k</span> <span m="3190100">minus</span> <span m="3190400">1.</span> <span m="3191100">This</span> <span m="3191330">is</span> <span m="3191450">k</span> <span m="3191600">minus</span> <span m="3192350">1.</span> <span m="3193190">And</span> <span m="3193430">so</span> <span m="3193610">this</span> <span m="3193790">will</span> <span m="3193880">be</span> <span m="3194060">k.</span> <span m="3195410">This</span> <span m="3195710">will</span> <span m="3195830">be</span> <span m="3196100">k.</span> <span m="3197450">This</span> <span m="3197660">will</span> <span m="3197750">be</span> <span m="3197870">k</span> <span m="3198080">plus</span> <span m="3198350">1.</span> <span m="3199070">And</span> <span m="3199280">lo and</span> <span m="3199520">behold,</span> <span m="3200070">we</span> <span m="3200170">have</span> <span m="3200240">a</span> <span m="3200330">nice,</span> <span m="3200990">height</span> <span m="3201290">balanced</span> <span m="3201710">tree</span> <span m="3202490">in</span> <span m="3202760">all</span> <span m="3203000">three</span> <span m="3203240">cases</span> <span m="3204470">for</span> <span m="3204860">this</span> <span m="3205040">one</span> <span m="3205280">node.</span></p>
<p><span m="3205760">Now,</span> <span m="3205970">this</span> <span m="3206120">was</span> <span m="3206270">the</span> <span m="3206360">lowest</span> <span m="3206750">node.</span> <span m="3207020">Once</span> <span m="3207200">we</span> <span m="3207350">update</span> <span m="3207710">this</span> <span m="3207920">one,</span> <span m="3208430">it</span> <span m="3208640">could</span> <span m="3208880">be</span> <span m="3209090">that</span> <span m="3210290">we</span> <span m="3210560">changed</span> <span m="3211190">the</span> <span m="3211310">height</span> <span m="3211580">of</span> <span m="3211730">the</span> <span m="3211820">root.</span> <span m="3212090">Before</span> <span m="3212480">it</span> <span m="3212570">was</span> <span m="3212700">k</span> <span m="3212960">plus</span> <span m="3213350">2,</span> <span m="3214100">now</span> <span m="3214370">it's</span> <span m="3214490">k</span> <span m="3214700">plus</span> <span m="3214970">1.</span> <span m="3215750">Or</span> <span m="3215930">sometimes,</span> <span m="3216320">we</span> <span m="3216470">keep</span> <span m="3216710">it</span> <span m="3216800">the</span> <span m="3216890">same,</span> <span m="3217250">like</span> <span m="3217520">over</span> <span m="3217910">in</span> <span m="3218060">this</span> <span m="3218270">case.</span></p>
<p><span m="3219780">And</span> <span m="3219890">so</span> <span m="3220070">now,</span> <span m="3220250">we</span> <span m="3220340">have</span> <span m="3220430">to</span> <span m="3220490">check</span> <span m="3220700">the</span> <span m="3220790">parent.</span> <span m="3221150">Maybe</span> <span m="3221390">the</span> <span m="3221480">parent</span> <span m="3221900">is</span> <span m="3222020">out</span> <span m="3222140">of</span> <span m="3222200">balance.</span> <span m="3222740">And</span> <span m="3223050">we</span> <span m="3223280">just</span> <span m="3223460">keep</span> <span m="3223730">walking</span> <span m="3224090">up</span> <span m="3224300">the</span> <span m="3224390">node,</span> <span m="3224720">and</span> <span m="3224930">also</span> <span m="3225380">maintain</span> <span m="3225860">all</span> <span m="3226040">the</span> <span m="3226130">augmentations</span> <span m="3226760">as</span> <span m="3226910">we</span> <span m="3227030">go.</span> <span m="3227660">Then,</span> <span m="3227900">we'll</span> <span m="3228020">keep</span> <span m="3228200">track</span> <span m="3228440">of</span> <span m="3228560">height</span> <span m="3228830">and</span> <span m="3229070">subtree</span> <span m="3229460">size</span> <span m="3229790">if</span> <span m="3229910">we</span> <span m="3230030">want</span> <span m="3230240">them,</span> <span m="3230360">or</span> <span m="3230450">any</span> <span m="3230660">other</span> <span m="3230870">augmentations.</span> <span m="3231980">And</span> <span m="3232280">after</span> <span m="3232760">order</span> <span m="3233050">h</span> <span m="3233270">operations,</span> <span m="3234200">we</span> <span m="3234410">will</span> <span m="3234500">have</span> <span m="3234650">restored</span> <span m="3234905">height</span> <span m="3235430">balanced</span> <span m="3235730">property,</span> <span m="3236220">which</span> <span m="3236300">means</span> <span m="3236600">all</span> <span m="3237050">the</span> <span m="3237170">way</span> <span m="3237320">through,</span> <span m="3238010">h</span> <span m="3238310">equals</span> <span m="3238550">order</span> <span m="3238760">log</span> <span m="3239000">n.</span> <span m="3239280">And</span> <span m="3239300">so</span> <span m="3239480">all</span> <span m="3239720">of</span> <span m="3239810">our</span> <span m="3239900">operations</span> <span m="3240410">now</span> <span m="3240570">are</span> <span m="3240650">magically</span> <span m="3241220">order</span> <span m="3241490">log</span> <span m="3241700">n.</span></p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.006S20/MIT6_006S20_02_27_Lecture_7_300k.mp4">MP4 - 121MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/lecture-videos/lecture-7-binary-trees-part-2-avl/U1JYwHcFfso.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","00");googletag.pubads().set("CRS_END","6");googletag.pubads().set("SESSION","S");googletag.pubads().set("YEAR","20");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
