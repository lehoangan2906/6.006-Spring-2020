<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 8: Binary Heaps | Lecture Videos | Introduction to Algorithms | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-006-introduction-to-algorithms-spring-2020" name="WT.cg_n">
    <meta content="Lecture 8: Binary Heaps" name="WT.cg_s">
    <meta content="" name="Description">
    <meta content="Demaine, Erik" name="Author">
    <meta content="Ku, Jason" name="Author">
    <meta content="Solomon, Justin" name="Author">
    <meta content="6.006,data structure,sorting,hashing,binary trees,breadth-first search,depth-first search,weighted shortest path,Bellman-Ford,Dijkstra,dynamic programming,recursion,complexity,algorithms,computational programs,analysis,proofs,Algorithms and Data Structures,Theory of Computation" name="keywords">
    <meta content="6.006 Introduction to Algorithms | Lecture 8: Binary Heaps" name="Search_Display">
    <meta content="Algorithms and Data Structures" itemprop="about">
    <meta content="Theory of Computation" itemprop="about">
    <meta content="Computation" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-8-binary-heaps/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Introduction to Algorithms</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/lecture-videos/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 8: Binary Heaps
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 8: Binary Heaps
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/lecture-videos/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/quizzes/index.htm">
		                  Quizzes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/practice-problems/index.htm">
		                  Practice Problems  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/assignments/index.htm">
		                  Assignments  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/resource-index/index.htm">
		                  Resource Index  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-8-binary-heaps/Xnpo1atN-Iw.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://archive.org/download/MIT6.006S20/MIT6_006S20_03_03_Lecture_8_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/Xnpo1atN-Iw', 'youtube', '/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-8-binary-heaps', 'https://img.youtube.com/vi/Xnpo1atN-Iw/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-006-introduction-to-algorithms-spring-2020/lecture-videos/lecture-8-binary-heaps/Xnpo1atN-Iw.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 6476787, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/lecture-videos/problem-session-4/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/lecture-videos/lecture-9-breadth-first-search/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p>Prof. Demaine discusses priority queue interfaces and sorting algorithms. Algorithms include AVL sort for set AVL trees, selection sort for arrays, insertion sort for sorted arrays, and heap sort for binary heaps.</p>
<p><strong>Instructor:</strong> Erik Demaine</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-1-algorithms-and-computation/index.htm">
<img src="https://img.youtube.com/vi/ZA-tUyM_y7s/default.jpg" title="Lecture 1: Algorithms and Computation" alt="Lecture 1: Algorithms and Computation">
<p>Lecture 1: Algorithms and C...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-2-data-structures-and-dynamic-arrays/index.htm">
<img src="https://img.youtube.com/vi/CHhwJjR0mZA/default.jpg" title="Lecture 2: Data Structures and Dynamic Arrays" alt="Lecture 2: Data Structures and Dynamic Arrays">
<p>Lecture 2: Data Structures ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-1/index.htm">
<img src="https://img.youtube.com/vi/IPSaG9RRc-k/default.jpg" title="Problem Session 1" alt="Problem Session 1">
<p>Problem Session 1</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-3-sets-and-sorting/index.htm">
<img src="https://img.youtube.com/vi/oS9aPzUNG-s/default.jpg" title="Lecture 3: Sets and Sorting" alt="Lecture 3: Sets and Sorting">
<p>Lecture 3: Sets and Sorting</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-4-hashing/index.htm">
<img src="https://img.youtube.com/vi/Nu8YGneFCWE/default.jpg" title="Lecture 4: Hashing" alt="Lecture 4: Hashing">
<p>Lecture 4: Hashing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-2/index.htm">
<img src="https://img.youtube.com/vi/KlQiwkhLBg0/default.jpg" title="Problem Session 2" alt="Problem Session 2">
<p>Problem Session 2</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-5-linear-sorting/index.htm">
<img src="https://img.youtube.com/vi/yndgIDO0zQQ/default.jpg" title="Lecture 5: Linear Sorting" alt="Lecture 5: Linear Sorting">
<p>Lecture 5: Linear Sorting</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-3/index.htm">
<img src="https://img.youtube.com/vi/g0bXSXuLVb0/default.jpg" title="Problem Session 3" alt="Problem Session 3">
<p>Problem Session 3</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-6-binary-trees-part-1/index.htm">
<img src="https://img.youtube.com/vi/76dhtgZt38A/default.jpg" title="Lecture 6: Binary Trees, Part 1" alt="Lecture 6: Binary Trees, Part 1">
<p>Lecture 6: Binary Trees, Pa...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-7-binary-trees-part-2-avl/index.htm">
<img src="https://img.youtube.com/vi/U1JYwHcFfso/default.jpg" title="Lecture 7: Binary Trees, Part 2: AVL" alt="Lecture 7: Binary Trees, Part 2: AVL">
<p>Lecture 7: Binary Trees, Pa...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-4/index.htm">
<img src="https://img.youtube.com/vi/MAyraVVYB64/default.jpg" title="Problem Session 4" alt="Problem Session 4">
<p>Problem Session 4</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/Xnpo1atN-Iw/default.jpg" title="Lecture 8: Binary Heaps" alt="Lecture 8: Binary Heaps">
<p>Lecture 8: Binary Heaps</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-9-breadth-first-search/index.htm">
<img src="https://img.youtube.com/vi/oFVYVzlvk9c/default.jpg" title="Lecture 9: Breadth-First Search" alt="Lecture 9: Breadth-First Search">
<p>Lecture 9: Breadth-First Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-1-review/index.htm">
<img src="https://img.youtube.com/vi/e98MPnMHLxE/default.jpg" title="Quiz 1 Review" alt="Quiz 1 Review">
<p>Quiz 1 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-10-depth-first-search/index.htm">
<img src="https://img.youtube.com/vi/IBfWDYSffUU/default.jpg" title="Lecture 10: Depth-First Search" alt="Lecture 10: Depth-First Search">
<p>Lecture 10: Depth-First Search</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-11-weighted-shortest-paths/index.htm">
<img src="https://img.youtube.com/vi/5cF5Bgv59Sc/default.jpg" title="Lecture 11: Weighted Shortest Paths" alt="Lecture 11: Weighted Shortest Paths">
<p>Lecture 11: Weighted Shorte...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-5/index.htm">
<img src="https://img.youtube.com/vi/ZLdooNwP7Pw/default.jpg" title="Problem Session 5" alt="Problem Session 5">
<p>Problem Session 5</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-12-bellman-ford/index.htm">
<img src="https://img.youtube.com/vi/f9cVS_URPc0/default.jpg" title="Lecture 12: Bellman-Ford" alt="Lecture 12: Bellman-Ford">
<p>Lecture 12: Bellman-Ford</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-6/index.htm">
<img src="https://img.youtube.com/vi/kshe8d8rxHo/default.jpg" title="Problem Session 6" alt="Problem Session 6">
<p>Problem Session 6</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-13-dijkstra/index.htm">
<img src="https://img.youtube.com/vi/NSHizBK9JD8/default.jpg" title="Lecture 13: Dijkstra" alt="Lecture 13: Dijkstra">
<p>Lecture 13: Dijkstra</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-7/index.htm">
<img src="https://img.youtube.com/vi/WO6vQJ6Rhm8/default.jpg" title="Problem Session 7" alt="Problem Session 7">
<p>Problem Session 7</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-14-apsp-and-johnson/index.htm">
<img src="https://img.youtube.com/vi/EmSmaW-ud6A/default.jpg" title="Lecture 14: APSP and Johnson" alt="Lecture 14: APSP and Johnson">
<p>Lecture 14: APSP and Johnson</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-2-review/index.htm">
<img src="https://img.youtube.com/vi/vCIa2h1C9UQ/default.jpg" title="Quiz 2 Review" alt="Quiz 2 Review">
<p>Quiz 2 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-15-dynamic-programming-part-1-srtbot-fib-dags-bowling/index.htm">
<img src="https://img.youtube.com/vi/r4-cftqTcdI/default.jpg" title="Lecture 15: Dynamic Programming, Part 1: SRTBOT, Fib, DAGs, Bowling" alt="Lecture 15: Dynamic Programming, Part 1: SRTBOT, Fib, DAGs, Bowling">
<p>Lecture 15: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-16-dynamic-programming-part-2-lcs-lis-coins/index.htm">
<img src="https://img.youtube.com/vi/KLBCUx1is2c/default.jpg" title="Lecture 16: Dynamic Programming, Part 2: LCS, LIS, Coins" alt="Lecture 16: Dynamic Programming, Part 2: LCS, LIS, Coins">
<p>Lecture 16: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/problem-session-8/index.htm">
<img src="https://img.youtube.com/vi/l_A-ig1n8CM/default.jpg" title="Problem Session 8" alt="Problem Session 8">
<p>Problem Session 8</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-17-dynamic-programming-part-3-apsp-parens-piano/index.htm">
<img src="https://img.youtube.com/vi/TDo3r5M1LNo/default.jpg" title="Lecture 17: Dynamic Programming, Part 3: APSP, Parens, Piano" alt="Lecture 17: Dynamic Programming, Part 3: APSP, Parens, Piano">
<p>Lecture 17: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-18-dynamic-programming-part-4-rods-subset-sum-pseudopolynomial/index.htm">
<img src="https://img.youtube.com/vi/i9OAOk0CUQE/default.jpg" title="Lecture 18: Dynamic Programming, Part 4: Rods, Subset Sum, Pseudopolynomial" alt="Lecture 18: Dynamic Programming, Part 4: Rods, Subset Sum, Pseudopolynomial">
<p>Lecture 18: Dynamic Program...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-19-complexity/index.htm">
<img src="https://img.youtube.com/vi/JbafQJx1CIA/default.jpg" title="Lecture 19: Complexity" alt="Lecture 19: Complexity">
<p>Lecture 19: Complexity</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/quiz-3-review/index.htm">
<img src="https://img.youtube.com/vi/wEKFGdo4Sck/default.jpg" title="Quiz 3 Review" alt="Quiz 3 Review">
<p>Quiz 3 Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-20-course-review/index.htm">
<img src="https://img.youtube.com/vi/2NMtS1ecb3o/default.jpg" title="Lecture 20: Course Review" alt="Lecture 20: Course Review">
<p>Lecture 20: Course Review</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/lecture-videos/lecture-21-algorithms2014next-steps/index.htm">
<img src="https://img.youtube.com/vi/4nXw-f6NJ9s/default.jpg" title="Lecture 21: Algorithms—Next Steps" alt="Lecture 21: Algorithms—Next Steps">
<p>Lecture 21: Algorithms—Ne...</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/lecture-videos/lecture-8-binary-heaps/Xnpo1atN-Iw.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="491">[SQUEAKING]</span> <span m="982">[RUSTLING]</span> <span m="1473">[CLICKING]</span></p>
<p><span m="12580">ERIK DEMAINE:</span> <span m="12630">All</span> <span m="12680">right,</span> <span m="12790">welcome</span> <span m="13120">back</span> <span m="13330">to</span> <span m="13630">006</span> <span m="14290">Data</span> <span m="14620">Structures.</span> <span m="15970">Today,</span> <span m="16420">we're</span> <span m="16600">going</span> <span m="16720">to</span> <span m="16810">cover</span> <span m="17620">a</span> <span m="18490">different</span> <span m="18970">kind</span> <span m="19330">of</span> <span m="19570">tree-like</span> <span m="20530">data</span> <span m="20770">structure</span> <span m="21160">called</span> <span m="21430">a</span> <span m="21880">heap--</span> <span m="22150">a binary</span> <span m="22540">heap.</span> <span m="22910">It's</span> <span m="23020">going</span> <span m="23170">to</span> <span m="23260">let</span> <span m="23440">us</span> <span m="23530">solve</span> <span m="24280">sorting</span> <span m="24670">problem</span> <span m="25180">in</span> <span m="25390">a</span> <span m="25450">new</span> <span m="25630">way.</span> <span m="26710">Let</span> <span m="26890">me</span> <span m="27010">first</span> <span m="27400">remind</span> <span m="27850">you</span> <span m="28840">of</span> <span m="29320">a</span> <span m="29860">portion--</span> <span m="30650">the</span> <span m="30760">problem</span> <span m="31030">we're</span> <span m="31120">going</span> <span m="31240">to</span> <span m="31300">be</span> <span m="31420">solving</span> <span m="31750">today</span> <span m="32020">is</span> <span m="32170">called</span> <span m="32409">priority</span> <span m="32950">queue.</span> <span m="33760">This</span> <span m="33910">is</span> <span m="34030">the</span> <span m="34150">interface.</span> <span m="34820">We'll</span> <span m="34840">see</span> <span m="35200">several</span> <span m="35560">data</span> <span m="35740">structures,</span> <span m="36220">but</span> <span m="36400">one</span> <span m="36580">main</span> <span m="36790">data</span> <span m="37000">structure</span> <span m="37360">for</span> <span m="37600">today.</span></p>
<p><span m="40070">And</span> <span m="40300">this</span> <span m="40510">is</span> <span m="40690">a</span> <span m="40870">subset</span> <span m="41650">of</span> <span m="43390">the</span> <span m="43750">set</span> <span m="44020">interface.</span> <span m="47230">And</span> <span m="47530">subsets</span> <span m="47950">are</span> <span m="48040">interesting</span> <span m="48490">because,</span> <span m="48820">potentially,</span> <span m="49300">we</span> <span m="49420">can</span> <span m="49600">solve</span> <span m="49840">them</span> <span m="49990">better,</span> <span m="50500">faster,</span> <span m="51100">simpler,</span> <span m="51670">something.</span> <span m="53750">And</span> <span m="54310">so</span> <span m="55840">you'll</span> <span m="56110">recognize--</span> <span m="57100">you</span> <span m="57280">should</span> <span m="57430">recognize</span> <span m="57880">all</span> <span m="58120">of</span> <span m="58210">these</span> <span m="58390">operations,</span> <span m="59110">except</span> <span m="59440">we</span> <span m="60040">didn't</span> <span m="60250">normally</span> <span m="60670">highlight</span> <span m="61300">the</span> <span m="61480">max</span> <span m="61870">operation.</span> <span m="62930">So</span> <span m="63070">here,</span> <span m="63190">we're</span> <span m="63310">interested</span> <span m="63760">in</span> <span m="63970">storing</span> <span m="64480">a</span> <span m="64599">bunch</span> <span m="64840">of</span> <span m="64959">items.</span> <span m="66190">They</span> <span m="66400">have</span> <span m="66640">keys</span> <span m="68110">which</span> <span m="68320">we</span> <span m="68440">think</span> <span m="68650">of</span> <span m="68800">as</span> <span m="68950">priorities.</span> <span m="70060">And</span> <span m="70270">we</span> <span m="70390">want</span> <span m="70600">to</span> <span m="70720">be</span> <span m="70900">able</span> <span m="71170">to</span> <span m="71500">identify</span> <span m="72160">the</span> <span m="72340">maximum</span> <span m="72850">priority</span> <span m="73840">item</span> <span m="74530">in</span> <span m="74800">our</span> <span m="74950">set</span> <span m="75820">and</span> <span m="76120">remove</span> <span m="76450">it.</span></p>
<p><span m="77350">And</span> <span m="77650">so</span> <span m="77920">there's</span> <span m="78100">lots</span> <span m="78310">of</span> <span m="78370">motivations</span> <span m="78850">for</span> <span m="78970">this.</span> <span m="79250">Maybe</span> <span m="79370">you</span> <span m="79420">have</span> <span m="79540">a</span> <span m="79570">router,</span> <span m="79960">packets</span> <span m="80440">going</span> <span m="80710">into</span> <span m="80920">the</span> <span m="80980">router.</span> <span m="81370">They</span> <span m="81490">have</span> <span m="81610">different</span> <span m="81880">priorities</span> <span m="82360">assigned</span> <span m="82660">to</span> <span m="82780">them.</span> <span m="83060">You</span> <span m="83160">want</span> <span m="83170">to</span> <span m="83260">route</span> <span m="83470">the</span> <span m="83590">highest</span> <span m="83860">priority</span> <span m="84310">first.</span> <span m="85090">Or</span> <span m="85420">you</span> <span m="85570">have</span> <span m="85840">processes</span> <span m="86470">on</span> <span m="86620">your</span> <span m="86770">computer</span> <span m="87970">trying</span> <span m="88360">to</span> <span m="88480">run</span> <span m="88750">on</span> <span m="89500">your</span> <span m="90430">single</span> <span m="90820">threaded--</span> <span m="91690">single</span> <span m="92050">core,</span> <span m="92620">and</span> <span m="92890">you've</span> <span m="93010">got</span> <span m="93130">to</span> <span m="93190">choose</span> <span m="93430">which</span> <span m="93610">one</span> <span m="93760">to</span> <span m="93850">run</span> <span m="94270">next.</span> <span m="94850">And</span> <span m="94870">you</span> <span m="94990">usually</span> <span m="95440">run</span> <span m="95680">higher</span> <span m="95950">priority</span> <span m="96400">processes</span> <span m="96970">first.</span> <span m="97840">Or</span> <span m="98350">you're</span> <span m="98530">trying</span> <span m="98830">to</span> <span m="98950">simulate</span> <span m="100780">a</span> <span m="101050">system</span> <span m="101830">where</span> <span m="102040">events</span> <span m="102400">happen</span> <span m="102730">at</span> <span m="102820">different</span> <span m="103090">times,</span> <span m="103600">and</span> <span m="103780">you</span> <span m="103870">want</span> <span m="104080">to</span> <span m="104200">process</span> <span m="104800">the</span> <span m="104980">next</span> <span m="105310">event</span> <span m="105940">ordered</span> <span m="106330">by</span> <span m="106510">time.</span></p>
<p><span m="106990">All</span> <span m="107230">of</span> <span m="107320">these</span> <span m="107500">are</span> <span m="107560">examples</span> <span m="108070">of</span> <span m="108850">the</span> <span m="109120">priority</span> <span m="109510">queue</span> <span m="109900">interface.</span> <span m="110470">We'll</span> <span m="110680">even</span> <span m="110920">see</span> <span m="111130">applications</span> <span m="111700">within</span> <span m="111970">this</span> <span m="112150">class</span> <span m="112420">when</span> <span m="112540">we</span> <span m="112600">get</span> <span m="112720">to</span> <span m="112810">graph</span> <span m="113080">algorithms.</span> <span m="114160">But</span> <span m="114310">the</span> <span m="115030">main</span> <span m="115270">two</span> <span m="115480">things</span> <span m="115720">we</span> <span m="115840">want</span> <span m="115990">to</span> <span m="116050">be</span> <span m="116110">able</span> <span m="116290">to</span> <span m="116350">support</span> <span m="116740">are</span> <span m="116860">inserting</span> <span m="117340">an</span> <span m="117430">item,</span> <span m="117730">which</span> <span m="118000">includes</span> <span m="118450">a</span> <span m="118510">key,</span> <span m="119140">and</span> <span m="119410">leading</span> <span m="119860">the</span> <span m="119950">maximum</span> <span m="120460">item,</span> <span m="120820">and</span> <span m="121060">also</span> <span m="121330">returning</span> <span m="121810">it</span> <span m="121930">at</span> <span m="122050">the</span> <span m="122140">same</span> <span m="122380">time.</span> <span m="123670">We'll</span> <span m="123940">also</span> <span m="124240">talk</span> <span m="124570">some</span> <span m="124960">about</span> <span m="125740">being</span> <span m="126040">able</span> <span m="126250">to</span> <span m="126550">build</span> <span m="126940">the</span> <span m="127030">structure</span> <span m="127600">faster</span> <span m="128139">than</span> <span m="128320">just</span> <span m="128530">inserting</span> <span m="128949">it.</span> <span m="129169">But</span> <span m="129190">of</span> <span m="129280">course,</span> <span m="129560">we</span> <span m="129580">could</span> <span m="129729">implement</span> <span m="130539">build</span> <span m="130930">by</span> <span m="131200">starting</span> <span m="131650">empty</span> <span m="132220">and</span> <span m="132490">repeatedly</span> <span m="133060">inserting.</span> <span m="134260">And</span> <span m="134770">also</span> <span m="135310">the</span> <span m="135550">complexity</span> <span m="136120">of</span> <span m="136450">just</span> <span m="136690">finding</span> <span m="137140">the</span> <span m="137200">max</span> <span m="137500">without</span> <span m="137860">deleting</span> <span m="138250">it,</span> <span m="138670">this</span> <span m="139000">you</span> <span m="139120">could</span> <span m="139420">simulate</span> <span m="139960">with</span> <span m="140110">these</span> <span m="140290">two</span> <span m="140410">operations</span> <span m="140920">by</span> <span m="141100">deleting</span> <span m="141460">the</span> <span m="141550">max</span> <span m="141880">and</span> <span m="142000">then</span> <span m="142150">reinserting</span> <span m="142690">it,</span> <span m="144190">which</span> <span m="144850">works.</span> <span m="145930">But</span> <span m="146260">often,</span> <span m="146500">we</span> <span m="146620">can</span> <span m="146770">do</span> <span m="146890">faster.</span></p>
<p><span m="148360">But</span> <span m="148510">the</span> <span m="148660">two</span> <span m="149020">key,</span> <span m="149290">main</span> <span m="149590">operations</span> <span m="150610">are</span> <span m="150850">insert</span> <span m="151600">and</span> <span m="151810">delete</span> <span m="152080">max.</span> <span m="152470">And</span> <span m="152650">we're</span> <span m="152770">going</span> <span m="152950">to</span> <span m="153070">see</span> <span m="153940">a</span> <span m="154450">few</span> <span m="154810">data</span> <span m="155050">structures</span> <span m="155560">to</span> <span m="155680">do</span> <span m="155860">this.</span> <span m="157180">Any</span> <span m="157480">suggestions</span> <span m="158740">among</span> <span m="159160">the</span> <span m="159220">data</span> <span m="159370">structures</span> <span m="159760">we've</span> <span m="159880">seen</span> <span m="160060">in</span> <span m="160120">this</span> <span m="160270">class?</span> <span m="160760">What</span> <span m="160900">should</span> <span m="161110">we</span> <span m="162160">use</span> <span m="162640">to</span> <span m="162760">solve</span> <span m="164170">priority</span> <span m="164470">queue</span> <span m="164620">interface?</span> <span m="173840">Many</span> <span m="174140">possible</span> <span m="174500">answers.</span></p>
<p><span m="177890">AUDIENCE:</span> <span m="178127">Sequence</span> <span m="178365">AVL?</span></p>
<p><span m="178840">ERIK DEMAINE:</span> <span m="178982">Sequence</span> <span m="179410">AVL?</span> <span m="179710">Ooh,</span> <span m="180010">that's</span> <span m="180250">interesting!</span> <span m="181540">Sequence</span> <span m="181990">AVL</span> <span m="182290">is</span> <span m="182500">a</span> <span m="182560">good</span> <span m="182740">answer,</span> <span m="183190">but</span> <span m="183970">maybe</span> <span m="184300">the</span> <span m="184930">fancier</span> <span m="185560">version.</span> <span m="187030">Yeah?</span></p>
<p><span m="187830">AUDIENCE:</span> <span m="188065">Set</span> <span m="188300">AVL?</span></p>
<p><span m="188770">ERIK DEMAINE:</span> <span m="188980">Set</span> <span m="189190">AVL</span> <span m="189730">sounds</span> <span m="190120">good.</span> <span m="190960">Set</span> <span m="191310">AVL</span> <span m="191530">supports</span> <span m="192160">these</span> <span m="192430">operations</span> <span m="192940">and</span> <span m="193180">many</span> <span m="193420">more.</span> <span m="194090">All</span> <span m="194410">in</span> <span m="194620">log n</span> <span m="195010">time</span> <span m="195340">except</span> <span m="195640">for</span> <span m="195790">build,</span> <span m="196120">which</span> <span m="196330">takes</span> <span m="197260">n</span> <span m="197530">log</span> <span m="197770">n</span> <span m="197920">time</span> <span m="198190">because</span> <span m="198370">you</span> <span m="198460">have</span> <span m="198610">to</span> <span m="198730">sort</span> <span m="199000">first.</span> <span m="200980">So</span> <span m="201220">set</span> <span m="201460">AVL</span> <span m="201970">a</span> <span m="202030">good</span> <span m="202720">way</span> <span m="202810">to</span> <span m="202900">do</span> <span m="203020">this.</span> <span m="203530">We'll</span> <span m="203680">come</span> <span m="203860">back</span> <span m="204100">to</span> <span m="204220">your</span> <span m="204400">sequence</span> <span m="204790">AVL</span> <span m="205510">idea</span> <span m="205930">later.</span> <span m="207580">This</span> <span m="207950">gets</span> <span m="208570">log</span> <span m="209070">n</span> <span m="210100">for</span> <span m="210280">operation.</span> <span m="211750">Great.</span> <span m="212150">I</span> <span m="212170">mean,</span> <span m="212350">this</span> <span m="212560">is--</span> <span m="213310">set</span> <span m="213610">AVL</span> <span m="213940">is</span> <span m="214090">our</span> <span m="214210">most</span> <span m="214450">powerful</span> <span m="214780">data</span> <span m="214960">structure.</span> <span m="215370">It</span> <span m="215470">does</span> <span m="215500">all</span> <span m="215650">the</span> <span m="215770">operations</span> <span m="216250">we</span> <span m="216340">care</span> <span m="216520">about</span> <span m="217720">on</span> <span m="217960">the</span> <span m="218020">set</span> <span m="218260">side.</span> <span m="218590">And</span> <span m="218680">the</span> <span m="218740">sequence</span> <span m="219070">AVL</span> <span m="219370">does</span> <span m="219550">all</span> <span m="219700">the</span> <span m="219790">operations</span> <span m="220240">on</span> <span m="220330">the</span> <span m="220390">sequence</span> <span m="220690">side.</span></p>
<p><span m="220840">But</span> <span m="220960">note</span> <span m="221170">that</span> <span m="221290">this</span> <span m="221500">is</span> <span m="221650">a</span> <span m="221740">set,</span> <span m="222070">not</span> <span m="222280">a</span> <span m="222310">sequence.</span> <span m="223090">We</span> <span m="223270">care</span> <span m="223450">about</span> <span m="223660">keys.</span> <span m="224530">There</span> <span m="224740">are</span> <span m="224800">hacks</span> <span m="225070">to</span> <span m="225130">get</span> <span m="225280">around</span> <span m="225520">that</span> <span m="225700">with</span> <span m="225820">sequence</span> <span m="226180">AVLs,</span> <span m="226600">but</span> <span m="227170">let's</span> <span m="227380">do</span> <span m="227530">that</span> <span m="227710">later.</span></p>
<p><span m="230420">So</span> <span m="230530">great,</span> <span m="230740">if</span> <span m="230920">we</span> <span m="231640">wanted</span> <span m="232000">to,</span> <span m="232300">for</span> <span m="232420">example,</span> <span m="232880">speed</span> <span m="233110">up</span> <span m="233290">find_max</span> <span m="234250">in</span> <span m="234520">a</span> <span m="234610">set</span> <span m="234880">AVL.</span> <span m="235840">We</span> <span m="236140">could</span> <span m="236410">add</span> <span m="237100">augmentation.</span> <span m="238420">We</span> <span m="238660">could--</span> <span m="241690">remember</span> <span m="242050">subtree</span> <span m="242770">property</span> <span m="243640">augmentations?</span> <span m="245410">We</span> <span m="245620">can</span> <span m="246250">use</span> <span m="246550">that</span> <span m="246730">to</span> <span m="246850">get</span> <span m="247030">constant</span> <span m="247510">time</span> <span m="248290">find_max</span> <span m="250600">by</span> <span m="250810">storing</span> <span m="251350">in</span> <span m="251530">every</span> <span m="251770">node</span> <span m="252460">the</span> <span m="252700">maximum</span> <span m="253570">key</span> <span m="253900">item</span> <span m="254260">within</span> <span m="254560">the</span> <span m="254650">subtree.</span> <span m="255550">And</span> <span m="255730">that's</span> <span m="255880">a</span> <span m="255940">subtree</span> <span m="256300">property.</span> <span m="256850">It's</span> <span m="256950">one</span> <span m="256990">we</span> <span m="257079">mentioned</span> <span m="257410">last</span> <span m="258190">class.</span> <span m="258740">So</span> <span m="259269">we</span> <span m="259450">could</span> <span m="259630">even</span> <span m="259899">improve</span> <span m="260200">that</span> <span m="260380">to</span> <span m="260500">cut</span> <span m="260780">some</span> <span m="261060">time.</span> <span m="261279">Great.</span></p>
<p><span m="262690">So</span> <span m="263050">we're</span> <span m="263170">done.</span> <span m="263530">End of</span> <span m="263740">lecture.</span> <span m="264025">[CHUCKLES]</span> <span m="265060">In</span> <span m="265240">some</span> <span m="265450">sense,</span> <span m="265840">that's</span> <span m="266200">true.</span> <span m="267040">But</span> <span m="267250">what</span> <span m="267370">we're</span> <span m="267460">going</span> <span m="267580">to</span> <span m="267670">see</span> <span m="267970">today</span> <span m="268540">is</span> <span m="268930">another</span> <span m="269320">data</span> <span m="269530">structure</span> <span m="269860">called</span> <span m="270020">a</span> <span m="270070">binary</span> <span m="270430">heap,</span> <span m="270800">which</span> <span m="270940">is,</span> <span m="271060">in</span> <span m="271150">some</span> <span m="271360">sense,</span> <span m="271690">a</span> <span m="271750">simplification</span> <span m="272830">of</span> <span m="273700">set</span> <span m="274030">AVL.</span> <span m="274780">It</span> <span m="275020">achieves</span> <span m="275830">basically</span> <span m="276340">the</span> <span m="276430">same</span> <span m="276730">time</span> <span m="277030">bounds.</span> <span m="277480">Build</span> <span m="277810">will</span> <span m="277930">be</span> <span m="278140">faster</span> <span m="279490">by</span> <span m="279640">a</span> <span m="279700">log</span> <span m="279940">factor.</span></p>
<p><span m="281240">But</span> <span m="281920">that's</span> <span m="282190">not</span> <span m="282880">the</span> <span m="283030">main</span> <span m="283240">reason</span> <span m="283510">we</span> <span m="283600">care</span> <span m="283780">about</span> <span m="283990">them.</span> <span m="284680">The</span> <span m="284830">main</span> <span m="285040">advantage</span> <span m="285460">is</span> <span m="285610">that</span> <span m="285730">they're</span> <span m="285880">simpler</span> <span m="286960">and</span> <span m="287320">they</span> <span m="287530">give</span> <span m="287830">us</span> <span m="288940">an</span> <span m="289240">in-place</span> <span m="289810">sorting</span> <span m="290140">algorithm.</span> <span m="294220">So</span> <span m="295120">I</span> <span m="295330">have</span> <span m="295750">up</span> <span m="296020">here</span> <span m="297190">three</span> <span m="297460">of</span> <span m="297550">the</span> <span m="297640">operations</span> <span m="298150">I've</span> <span m="298300">been</span> <span m="298390">talking</span> <span m="298660">about--</span> <span m="298840">build,</span> <span m="299200">insert,</span> <span m="299650">and</span> <span m="299800">delete_max.</span> <span m="301120">So</span> <span m="301270">we</span> <span m="301360">have</span> <span m="301480">set</span> <span m="301690">AVL</span> <span m="302560">trees</span> <span m="302950">there--</span> <span m="303250">n</span> <span m="303430">log</span> <span m="303640">n</span> <span m="303820">build,</span> <span m="304390">log</span> <span m="304660">n</span> <span m="304780">insert,</span> <span m="305470">log</span> <span m="305680">n</span> <span m="305830">delete.</span></p>
<p><span m="307180">So</span> <span m="307420">along</span> <span m="307840">the</span> <span m="307930">way</span> <span m="308170">to</span> <span m="308590">our</span> <span m="309580">heap,</span> <span m="310000">I</span> <span m="310180">want</span> <span m="310330">to</span> <span m="310390">mention</span> <span m="310750">two</span> <span m="311020">other</span> <span m="312010">data</span> <span m="312310">structures.</span> <span m="313670">One</span> <span m="314080">is</span> <span m="315420">a</span> <span m="315760">dynamic</span> <span m="316360">but</span> <span m="316570">unsorted</span> <span m="317110">array.</span> <span m="318010">And</span> <span m="318310">the</span> <span m="318430">other</span> <span m="318730">is</span> <span m="319030">a</span> <span m="319150">dynamic</span> <span m="319630">sorted</span> <span m="319990">array.</span> <span m="325850">These</span> <span m="326180">are</span> <span m="326570">simpler</span> <span m="326990">data</span> <span m="327170">structures</span> <span m="327530">we've</span> <span m="327650">talked</span> <span m="327890">about</span> <span m="328220">many</span> <span m="328490">times</span> <span m="328760">before.</span> <span m="329300">And</span> <span m="329570">they're</span> <span m="329690">useful</span> <span m="330080">kind</span> <span m="330290">of</span> <span m="330350">motivations</span> <span m="331580">for</span> <span m="331790">getting</span> <span m="332000">started,</span> <span m="332300">because</span> <span m="332780">a</span> <span m="333065">heap</span> <span m="333680">is</span> <span m="333980">going</span> <span m="334190">to</span> <span m="334280">be</span> <span m="334430">built</span> <span m="334760">on</span> <span m="334940">top</span> <span m="335300">of</span> <span m="336020">arrays</span> <span m="336770">instead</span> <span m="337250">of--</span> <span m="338060">well, it's</span> <span m="338360">sort</span> <span m="338570">of</span> <span m="338690">a</span> <span m="338750">fusion</span> <span m="339230">between</span> <span m="339560">arrays</span> <span m="340040">and</span> <span m="340190">trees.</span></p>
<p><span m="342720">So</span> <span m="344580">if</span> <span m="344850">I</span> <span m="344910">have</span> <span m="345030">an</span> <span m="345120">unsorted</span> <span m="345690">array,</span> <span m="346410">this</span> <span m="346620">is</span> <span m="346740">very</span> <span m="347040">easy</span> <span m="347400">to</span> <span m="347580">insert</span> <span m="348030">into,</span> <span m="348660">right?</span> <span m="349320">I</span> <span m="349500">just</span> <span m="350310">append</span> <span m="350910">to</span> <span m="351090">the</span> <span m="351210">end.</span> <span m="351580">This</span> <span m="351630">is</span> <span m="351690">what</span> <span m="351840">we</span> <span m="351930">called</span> <span m="352290">insert</span> <span m="352770">last.</span> <span m="353650">So</span> <span m="353880">insert</span> <span m="354420">is</span> <span m="354660">fast,</span> <span m="356820">constant</span> <span m="357270">amortized.</span> <span m="358750">We</span> <span m="358890">might</span> <span m="359070">have</span> <span m="359160">to</span> <span m="359280">resize</span> <span m="359700">the</span> <span m="359790">array,</span> <span m="360180">but</span> <span m="360630">so</span> <span m="360860">that's</span> <span m="361020">the</span> <span m="361110">amortized</span> <span m="361560">part.</span></p>
<p><span m="362520">But</span> <span m="362700">delete</span> <span m="363000">max</span> <span m="363420">is</span> <span m="363630">slow.</span> <span m="363990">In an</span> <span m="364110">unsorted</span> <span m="364560">array,</span> <span m="364830">I</span> <span m="364890">don't</span> <span m="365070">know</span> <span m="365190">where</span> <span m="365280">the</span> <span m="365370">maximum</span> <span m="365790">is.</span> <span m="365910">So</span> <span m="366030">I</span> <span m="366120">have</span> <span m="366270">to</span> <span m="366360">scan</span> <span m="366780">through</span> <span m="367080">the</span> <span m="367170">whole</span> <span m="367410">array.</span> <span m="371240">So</span> <span m="371410">I</span> <span m="371500">scan</span> <span m="371920">through</span> <span m="372100">the</span> <span m="372190">array,</span> <span m="372520">identify</span> <span m="372865">that</span> <span m="373210">the</span> <span m="373330">max</span> <span m="373690">is</span> <span m="373750">somewhere</span> <span m="374050">in</span> <span m="374140">the</span> <span m="374200">middle,</span> <span m="375380">and</span> <span m="375550">then,</span> <span m="375700">if</span> <span m="375850">I</span> <span m="375940">want</span> <span m="376120">to</span> <span m="376240">delete</span> <span m="376720">it--</span> <span m="382780">I</span> <span m="383020">want</span> <span m="383170">to</span> <span m="383230">delete</span> <span m="383560">that</span> <span m="383710">maximum</span> <span m="384130">element,</span> <span m="384520">well,</span> <span m="384700">in</span> <span m="384790">a</span> <span m="384970">dynamic</span> <span m="385420">array,</span> <span m="385630">all</span> <span m="385750">I</span> <span m="385810">can</span> <span m="385990">really</span> <span m="386230">do</span> <span m="386350">is</span> <span m="386470">delete</span> <span m="386770">the</span> <span m="386860">last</span> <span m="387250">element</span> <span m="387940">efficiently.</span></p>
<p><span m="388940">So</span> <span m="389200">I</span> <span m="389380">could,</span> <span m="389690">for</span> <span m="389710">example,</span> <span m="390100">swap</span> <span m="390610">it</span> <span m="390820">with</span> <span m="391120">the</span> <span m="391810">last</span> <span m="392800">element.</span> <span m="393870">So</span> <span m="393970">I</span> <span m="394060">take</span> <span m="394270">this</span> <span m="394450">element</span> <span m="394750">and</span> <span m="394840">put</span> <span m="395020">it</span> <span m="395110">here,</span> <span m="395720">and</span> <span m="395890">then</span> <span m="396940">delete</span> <span m="397330">the</span> <span m="397420">last</span> <span m="397720">element</span> <span m="398080">in</span> <span m="398230">that</span> <span m="398380">array,</span> <span m="399320">which</span> <span m="399490">is</span> <span m="399610">pop</span> <span m="400000">in</span> <span m="400180">Python</span> <span m="400900">or</span> <span m="401080">delete_last</span> <span m="401800">in</span> <span m="401950">our</span> <span m="402520">world.</span> <span m="403640">So</span> <span m="403810">overall,</span> <span m="404170">this</span> <span m="404410">is</span> <span m="405640">linear</span> <span m="406000">time,</span> <span m="407990">which</span> <span m="408070">is</span> <span m="408160">bad.</span> <span m="410320">But</span> <span m="410560">I</span> <span m="410650">wanted</span> <span m="410860">to</span> <span m="410950">highlight</span> <span m="411280">exactly</span> <span m="411670">how</span> <span m="411760">it's</span> <span m="411910">done</span> <span m="412150">for</span> <span m="412330">a</span> <span m="412360">reason</span> <span m="413020">we'll</span> <span m="413140">get</span> <span m="413320">to</span> <span m="413440">in</span> <span m="413500">a</span> <span m="413560">moment.</span></p>
<p><span m="414220">A</span> <span m="414550">sorted</span> <span m="414970">array</span> <span m="415240">is</span> <span m="415330">sort</span> <span m="415480">of</span> <span m="415600">the</span> <span m="415660">reverse.</span> <span m="416200">It's</span> <span m="416410">very</span> <span m="416680">easy</span> <span m="416980">to</span> <span m="417070">find</span> <span m="417310">the</span> <span m="417400">max.</span> <span m="418180">Where</span> <span m="418450">is</span> <span m="418600">it?</span> <span m="421110">At</span> <span m="421380">the</span> <span m="421500">end.</span> <span m="422580">delete_max,</span> <span m="423780">the</span> <span m="423900">maximum</span> <span m="424320">element</span> <span m="424650">is</span> <span m="424770">always</span> <span m="425010">the</span> <span m="425100">last</span> <span m="425670">element</span> <span m="426210">in</span> <span m="426420">a</span> <span m="427020">increasing</span> <span m="427650">sorted</span> <span m="427860">array.</span> <span m="431440">I</span> <span m="431610">guess</span> <span m="431790">that's</span> <span m="431970">constant</span> <span m="432480">amortized,</span> <span m="433260">because</span> <span m="433740">then</span> <span m="433950">I</span> <span m="434040">have</span> <span m="434160">to</span> <span m="434280">delete</span> <span m="434580">it,</span> <span m="434670">which</span> <span m="434850">may</span> <span m="435110">incur</span> <span m="435570">resizing.</span></p>
<p><span m="438030">Insert,</span> <span m="439230">though,</span> <span m="439560">is</span> <span m="439680">going</span> <span m="439890">to</span> <span m="440010">be</span> <span m="440130">linear,</span> <span m="441630">because</span> <span m="443220">maybe</span> <span m="443550">I</span> <span m="443610">can</span> <span m="443760">binary</span> <span m="444150">search</span> <span m="444420">to</span> <span m="444510">find</span> <span m="445680">where</span> <span m="445920">the</span> <span m="446220">added</span> <span m="446610">item</span> <span m="446880">belongs.</span> <span m="448200">Let's</span> <span m="448440">say</span> <span m="448770">I</span> <span m="449550">just</span> <span m="450000">added</span> <span m="452560">this</span> <span m="452830">item</span> <span m="453190">here.</span> <span m="455470">I</span> <span m="455680">could</span> <span m="455830">binary</span> <span m="456070">search</span> <span m="456280">to</span> <span m="456370">find</span> <span m="456700">it,</span> <span m="456820">but</span> <span m="456970">then</span> <span m="457120">I'm</span> <span m="457180">going</span> <span m="457300">to</span> <span m="457360">have</span> <span m="457510">to</span> <span m="457600">do</span> <span m="457870">a</span> <span m="457960">big</span> <span m="458170">shift.</span> <span m="458590">So</span> <span m="458770">I</span> <span m="458890">might</span> <span m="459070">as</span> <span m="459190">well</span> <span m="459280">just</span> <span m="459820">swap</span> <span m="460390">repeatedly</span> <span m="461590">until</span> <span m="462130">I</span> <span m="462250">find</span> <span m="462730">the</span> <span m="462880">position</span> <span m="463450">where</span> <span m="464050">the</span> <span m="464410">added</span> <span m="464830">item</span> <span m="465730">x</span> <span m="466810">belongs.</span> <span m="467560">And</span> <span m="467740">now</span> <span m="467890">I've</span> <span m="468010">restored</span> <span m="468460">sorted</span> <span m="468820">order.</span> <span m="469330">That</span> <span m="469600">takes</span> <span m="469840">linear</span> <span m="470140">time,</span> <span m="471350">which</span> <span m="471400">is</span> <span m="471490">bad.</span></p>
<p><span m="472300">And</span> <span m="472480">what</span> <span m="472630">we</span> <span m="472750">want</span> <span m="473050">is</span> <span m="473200">somehow</span> <span m="473620">the</span> <span m="473740">best</span> <span m="474100">of</span> <span m="474250">these</span> <span m="474460">two</span> <span m="474700">worlds.</span> <span m="476110">Insert</span> <span m="476395">is</span> <span m="476680">fast for</span> <span m="476890">array.</span> <span m="479470">Delete</span> <span m="479860">is</span> <span m="480040">fast for a</span> <span m="480460">sorted</span> <span m="480820">array.</span> <span m="481750">We</span> <span m="481990">can't</span> <span m="482230">get</span> <span m="482440">constant</span> <span m="482830">time</span> <span m="483040">for</span> <span m="483160">both.</span> <span m="483460">But</span> <span m="483610">we</span> <span m="483730">can</span> <span m="483910">get</span> <span m="484060">log</span> <span m="484300">n</span> <span m="484420">time</span> <span m="484630">for</span> <span m="484750">both.</span> <span m="484960">We</span> <span m="485110">already</span> <span m="485500">know</span> <span m="485710">how</span> <span m="486340">with</span> <span m="486910">set</span> <span m="487180">AVL</span> <span m="487510">trees.</span> <span m="487870">But</span> <span m="488020">we're</span> <span m="488140">going</span> <span m="488260">to</span> <span m="488320">see</span> <span m="488410">a</span> <span m="488470">different</span> <span m="488740">way</span> <span m="488860">to</span> <span m="488950">do</span> <span m="489130">it</span> <span m="489220">today.</span></p>
<p><span m="490870">And</span> <span m="491260">the</span> <span m="491380">main</span> <span m="491620">motivation</span> <span m="493450">for</span> <span m="493780">a</span> <span m="493930">different</span> <span m="494320">way</span> <span m="494470">to</span> <span m="494560">do</span> <span m="494740">this</span> <span m="496780">is</span> <span m="497110">sorting.</span> <span m="498670">So</span> <span m="498880">I</span> <span m="498970">want</span> <span m="499120">to</span> <span m="499180">define</span> <span m="500050">a</span> <span m="500320">priority</span> <span m="500860">queue</span> <span m="501070">sort.</span> <span m="509280">So</span> <span m="509550">given</span> <span m="509970">any</span> <span m="511110">data</span> <span m="511410">structure</span> <span m="511860">that</span> <span m="512010">implements</span> <span m="512520">a</span> <span m="512549">priority</span> <span m="512940">queue</span> <span m="513120">interface,</span> <span m="513630">in</span> <span m="513720">particular</span> <span m="514260">insert</span> <span m="514950">and</span> <span m="515159">delete_max,</span> <span m="516419">I</span> <span m="516659">can</span> <span m="516840">make</span> <span m="517049">a</span> <span m="517110">sorting</span> <span m="517440">algorithm.</span> <span m="518220">What</span> <span m="518400">do</span> <span m="518520">I</span> <span m="518610">do?</span> <span m="519270">Insert</span> <span m="519750">all</span> <span m="519870">the</span> <span m="519990">items,</span> <span m="520860">delete</span> <span m="521220">all</span> <span m="521340">the</span> <span m="521429">items.</span> <span m="522270">But</span> <span m="522510">because</span> <span m="523080">when</span> <span m="523289">I</span> <span m="523350">delete</span> <span m="523679">them</span> <span m="523919">they</span> <span m="524070">come</span> <span m="524340">out</span> <span m="524580">largest</span> <span m="525060">first,</span> <span m="525990">I</span> <span m="526200">get</span> <span m="526380">them</span> <span m="526530">in</span> <span m="526650">reverse</span> <span m="526960">sorted</span> <span m="527280">order.</span> <span m="527610">Then</span> <span m="527850">I</span> <span m="527910">could</span> <span m="528060">reverse</span> <span m="528420">in linear</span> <span m="528780">time</span> <span m="529470">and</span> <span m="529800">I've</span> <span m="529920">sorted</span> <span m="530370">my</span> <span m="530670">items.</span></p>
<p><span m="531840">So</span> <span m="532080">we</span> <span m="532230">can</span> <span m="533910">insert</span> <span m="536010">(x)</span> <span m="536520">for</span> <span m="537960">x</span> <span m="538300">in</span> <span m="538747">A,</span> <span m="539641">or</span> <span m="540870">(build(A)),</span> <span m="544740">and</span> <span m="545040">then</span> <span m="546960">repeatedly</span> <span m="548940">delete_max.</span> <span m="557170">How</span> <span m="557370">much</span> <span m="557580">time</span> <span m="557820">does</span> <span m="557940">this</span> <span m="558090">algorithm</span> <span m="558480">take?</span> <span m="559520">I'm</span> <span m="559740">going</span> <span m="559860">to</span> <span m="560070">introduce</span> <span m="560460">some</span> <span m="560580">notation</span> <span m="561030">here.</span> <span m="561270">It</span> <span m="561390">takes</span> <span m="561990">however</span> <span m="562470">long</span> <span m="562740">it</span> <span m="562830">takes</span> <span m="563070">to</span> <span m="563160">build</span> <span m="563520">n</span> <span m="563700">items,</span> <span m="565080">call</span> <span m="565330">that</span> <span m="565480">T sub</span> <span m="565890">build</span> <span m="568230">(n)</span> <span m="569160">plus--</span> <span m="572280">sorry--</span> <span m="575910">plus</span> <span m="576200">n</span> <span m="580260">times</span> <span m="580680">the</span> <span m="580800">time</span> <span m="581160">to</span> <span m="581280">do</span> <span m="581430">a</span> <span m="581460">delete_max.</span> <span m="585510">Or</span> <span m="586620">we</span> <span m="586830">can</span> <span m="587010">write</span> <span m="587250">this</span> <span m="587580">as</span> <span m="587950">n</span> <span m="588210">times</span> <span m="589480">time</span> <span m="589710">to</span> <span m="589800">do</span> <span m="589890">an</span> <span m="589990">insert,</span> <span m="591900">plus</span> <span m="592470">time</span> <span m="592800">to</span> <span m="592890">do a</span> <span m="593070">delete_max.</span></p>
<p><span m="598350">So</span> <span m="598470">I'm</span> <span m="598590">using</span> <span m="598830">these</span> <span m="599010">T</span> <span m="599250">functions</span> <span m="599760">to</span> <span m="599880">just</span> <span m="600150">abstract</span> <span m="601410">what</span> <span m="601590">are</span> <span m="601680">the</span> <span m="601740">running</span> <span m="602070">times</span> <span m="602700">provided</span> <span m="603270">by</span> <span m="603600">my</span> <span m="604020">data</span> <span m="604290">structure</span> <span m="604650">that</span> <span m="604770">implements</span> <span m="605200">this</span> <span m="605340">interface.</span> <span m="606210">Interface</span> <span m="606700">says</span> <span m="606900">what's</span> <span m="607140">correct</span> <span m="607620">is,</span> <span m="607830">and</span> <span m="607980">these</span> <span m="608130">T</span> <span m="608310">functions</span> <span m="608940">give</span> <span m="609150">me</span> <span m="609330">my</span> <span m="609510">performance</span> <span m="610020">bounds.</span> <span m="610990">So</span> <span m="611070">if</span> <span m="611160">I</span> <span m="611250">plug</span> <span m="611640">in</span> <span m="611880">each</span> <span m="612210">of</span> <span m="612330">these</span> <span m="612630">data</span> <span m="612870">structures,</span> <span m="613860">I</span> <span m="614100">get</span> <span m="614790">a</span> <span m="614970">sorting</span> <span m="615300">algorithm.</span> <span m="616560">I</span> <span m="616770">get</span> <span m="617010">AVL</span> <span m="617470">sort,</span> <span m="617730">I</span> <span m="617850">get</span> <span m="618150">array</span> <span m="618270">sort,</span> <span m="618840">I</span> <span m="618930">get</span> <span m="619200">assorted</span> <span m="619470">array</span> <span m="619650">sort.</span> <span m="620280">What</span> <span m="620520">do</span> <span m="620640">those</span> <span m="621120">look</span> <span m="621420">like?</span> <span m="621630">It</span> <span m="621720">turns</span> <span m="622020">out</span> <span m="622140">many</span> <span m="622380">of</span> <span m="622470">these</span> <span m="622710">are</span> <span m="622860">familiar.</span></p>
<p><span m="626180">So</span> <span m="626800">set</span> <span m="627040">AVLs</span> <span m="627670">take</span> <span m="628120">log</span> <span m="628450">n</span> <span m="628570">per</span> <span m="628930">operation.</span> <span m="629530">So</span> <span m="629770">we</span> <span m="629890">get</span> <span m="630340">an n</span> <span m="630760">log</span> <span m="630970">n</span> <span m="631390">sorting</span> <span m="631780">algorithm</span> <span m="632560">out</span> <span m="632860">of</span> <span m="632950">them,</span> <span m="633320">which</span> <span m="633490">is</span> <span m="634120">insert</span> <span m="634600">all</span> <span m="634750">of</span> <span m="634840">the</span> <span m="634960">items</span> <span m="635410">into</span> <span m="635740">the</span> <span m="635860">AVL</span> <span m="636190">tree.</span> <span m="636580">I</span> <span m="636790">don't</span> <span m="637000">want</span> <span m="637120">to</span> <span m="637180">use</span> <span m="637390">AVL</span> <span m="637810">build</span> <span m="638140">because</span> <span m="638350">that</span> <span m="638500">uses</span> <span m="639010">sort,</span> <span m="639470">and not</span> <span m="639930">allowed to</span> <span m="640390">sort</span> <span m="640690">in</span> <span m="640780">order</span> <span m="640930">to</span> <span m="641020">implement</span> <span m="641400">sort.</span> <span m="642220">But</span> <span m="642400">we</span> <span m="642520">saw</span> <span m="642730">how</span> <span m="642850">to</span> <span m="642970">insert</span> <span m="643270">into</span> <span m="643450">an</span> <span m="643540">AVL</span> <span m="643810">tree</span> <span m="643990">and</span> <span m="644080">keep</span> <span m="644320">the</span> <span m="644410">thing</span> <span m="644650">balanced.</span> <span m="645880">So</span> <span m="646090">that</span> <span m="646210">takes</span> <span m="646410">log</span> <span m="646660">n</span> <span m="646810">each.</span> <span m="647350">And</span> <span m="647590">then</span> <span m="647830">we</span> <span m="647980">can</span> <span m="648730">find</span> <span m="649120">the</span> <span m="649210">max,</span> <span m="649540">delete</span> <span m="649870">it,</span> <span m="650020">rebalance,</span> <span m="650800">and</span> <span m="651040">so</span> <span m="651220">on.</span> <span m="651430">Total</span> <span m="651730">time</span> <span m="652000">will</span> <span m="652120">be</span> <span m="652240">n log</span> <span m="652510">n.</span></p>
<p><span m="652780">This</span> <span m="652960">is</span> <span m="653080">an</span> <span m="653170">algorithm</span> <span m="653530">we</span> <span m="653620">call</span> <span m="653830">AVL</span> <span m="654250">sort.</span> <span m="655600">It's</span> <span m="655810">a</span> <span m="655870">bit</span> <span m="656020">complicated,</span> <span m="656650">because</span> <span m="656920">AVL</span> <span m="657260">trees</span> <span m="657550">are</span> <span m="657670">complicated.</span> <span m="658630">But</span> <span m="659500">it</span> <span m="659710">gives</span> <span m="659920">us</span> <span m="660070">optimal</span> <span m="660850">comparison</span> <span m="661440">bound</span> <span m="661780">and</span> <span m="661960">log</span> <span m="662200">n.</span></p>
<p><span m="664150">Now,</span> <span m="666250">what</span> <span m="666520">about</span> <span m="667420">array</span> <span m="667750">sort?</span> <span m="668200">So</span> <span m="668440">suppose</span> <span m="668890">I</span> <span m="669070">use</span> <span m="669940">an</span> <span m="670330">unsorted</span> <span m="670930">array.</span> <span m="673310">I</span> <span m="673520">insert</span> <span m="673910">the</span> <span m="674060">item.</span> <span m="674580">So</span> <span m="674720">if</span> <span m="674870">I</span> <span m="674990">insert</span> <span m="675290">the</span> <span m="675380">items--</span> <span m="676200">so</span> <span m="676250">I'm</span> <span m="676340">doing</span> <span m="676520">all</span> <span m="676700">the</span> <span m="676790">insertions</span> <span m="677240">here</span> <span m="677390">before</span> <span m="677690">all</span> <span m="677780">the</span> <span m="677870">deletions.</span> <span m="678540">So</span> <span m="678590">what's</span> <span m="678830">going</span> <span m="678950">to</span> <span m="679010">happen</span> <span m="679250">is</span> <span m="679340">I</span> <span m="679400">just</span> <span m="679550">insert</span> <span m="679910">the</span> <span m="680000">items</span> <span m="680330">in</span> <span m="680510">the</span> <span m="680600">original</span> <span m="681020">array</span> <span m="681290">order.</span> <span m="681780">In</span> <span m="681880">other</span> <span m="681920">words,</span> <span m="682170">I</span> <span m="682270">just</span> <span m="682310">take</span> <span m="682550">the</span> <span m="682670">array.</span> <span m="683720">And</span> <span m="683990">then</span> <span m="684710">what</span> <span m="684950">I</span> <span m="685040">do</span> <span m="685640">is</span> <span m="686030">repeatedly</span> <span m="686870">extract</span> <span m="687380">the</span> <span m="687470">maximum</span> <span m="687950">item</span> <span m="690460">by</span> <span m="690940">searching</span> <span m="691390">for</span> <span m="691630">it,</span> <span m="692680">moving</span> <span m="693070">it</span> <span m="693160">to</span> <span m="693310">the</span> <span m="693430">end</span> <span m="693550">of</span> <span m="693610">the</span> <span m="693700">array,</span> <span m="694570">and</span> <span m="694810">then</span> <span m="695020">repeating</span> <span m="695470">that</span> <span m="695620">process.</span></p>
<p><span m="696190">That sound</span> <span m="696370">familiar?</span> <span m="698530">That's</span> <span m="698750">selection</span> <span m="699220">sort</span> <span m="700330">from</span> <span m="700570">lecture</span> <span m="701470">three.</span> <span m="703960">So</span> <span m="704200">this--</span> <span m="705100">arrays</span> <span m="706570">give</span> <span m="706870">us</span> <span m="707000">selection</span> <span m="707440">sort.</span> <span m="713260">This</span> <span m="713500">is</span> <span m="713620">a</span> <span m="713710">new</span> <span m="713950">way</span> <span m="714130">to</span> <span m="714220">think</span> <span m="714400">about</span> <span m="714730">what</span> <span m="714880">we</span> <span m="715000">were</span> <span m="715090">doing</span> <span m="715640">way</span> <span m="715870">back</span> <span m="716080">then.</span></p>
<p><span m="717070">With</span> <span m="717220">a</span> <span m="717310">sorted</span> <span m="717670">array,</span> <span m="720400">what</span> <span m="720610">are</span> <span m="720670">we</span> <span m="720790">doing?</span> <span m="721360">We</span> <span m="721660">insert</span> <span m="722110">all</span> <span m="722260">the</span> <span m="722380">items.</span> <span m="722980">That's</span> <span m="723250">actually</span> <span m="723550">where</span> <span m="723820">all</span> <span m="724030">the</span> <span m="724150">work</span> <span m="724390">happens,</span> <span m="724780">because</span> <span m="724930">we</span> <span m="725050">maintain</span> <span m="725560">the</span> <span m="725620">sorted</span> <span m="725920">array.</span> <span m="726490">So</span> <span m="726700">we</span> <span m="726820">start</span> <span m="727060">with</span> <span m="727180">an</span> <span m="727300">empty</span> <span m="727600">array.</span> <span m="727870">It's</span> <span m="728020">sorted.</span> <span m="728590">We</span> <span m="728830">add</span> <span m="729040">an</span> <span m="729130">item.</span> <span m="729460">OK,</span> <span m="729730">it's still</span> <span m="729970">sorted.</span> <span m="730270">We</span> <span m="730390">add</span> <span m="730540">a</span> <span m="730600">second</span> <span m="730900">item,</span> <span m="731140">and</span> <span m="731260">we</span> <span m="731350">swap</span> <span m="731710">if</span> <span m="731860">we</span> <span m="732010">need</span> <span m="732160">to</span> <span m="732580">in</span> <span m="732820">order</span> <span m="732970">to</span> <span m="733060">sort.</span> <span m="733390">In</span> <span m="733570">general,</span> <span m="733870">when</span> <span m="733960">we</span> <span m="734080">add</span> <span m="734350">an</span> <span m="734470">item,</span> <span m="734980">we</span> <span m="735190">swap</span> <span m="735610">it</span> <span m="735820">to</span> <span m="735970">the</span> <span m="736090">left</span> <span m="736420">until</span> <span m="736660">it's</span> <span m="736780">sorted</span> <span m="737080">again.</span> <span m="737530">That</span> <span m="737830">is</span> <span m="738970">insertion</span> <span m="739540">sort.</span></p>
<p><span m="746080">Kind</span> <span m="746290">of</span> <span m="746350">cool,</span> <span m="747020">this</span> <span m="747190">is</span> <span m="747370">a</span> <span m="747490">unifying</span> <span m="748000">framework</span> <span m="748540">for</span> <span m="748870">three</span> <span m="750280">sorting</span> <span m="750670">algorithms</span> <span m="751120">that</span> <span m="751270">we</span> <span m="751480">saw</span> <span m="751750">before.</span> <span m="752290">We</span> <span m="752410">didn't</span> <span m="752980">actually</span> <span m="753340">talk</span> <span m="753550">about</span> <span m="753730">AVL</span> <span m="754000">sort</span> <span m="754360">last</span> <span m="754570">time,</span> <span m="754880">but</span> <span m="754930">it</span> <span m="755020">was</span> <span m="755170">in</span> <span m="755260">the</span> <span m="755320">notes.</span> <span m="756190">And</span> <span m="756430">so</span> <span m="756670">that</span> <span m="756970">is</span> <span m="757360">the</span> <span m="757480">right</span> <span m="757780">part</span> <span m="758080">of</span> <span m="758170">this</span> <span m="758320">table.</span></p>
<p><span m="759110">So</span> <span m="759220">of</span> <span m="759310">course,</span> <span m="760540">these</span> <span m="760780">array</span> <span m="761020">data</span> <span m="761200">structures</span> <span m="761560">are</span> <span m="761680">not</span> <span m="761860">efficient.</span> <span m="762430">They</span> <span m="762640">take</span> <span m="762850">linear</span> <span m="763150">time</span> <span m="763750">for</span> <span m="763900">some</span> <span m="764080">of</span> <span m="764140">the</span> <span m="764230">operations.</span> <span m="764710">So</span> <span m="764830">the</span> <span m="764920">sorting</span> <span m="765230">algorithms</span> <span m="765580">are</span> <span m="765640">not</span> <span m="765820">efficient.</span> <span m="766570">But</span> <span m="766810">they're</span> <span m="766960">ones</span> <span m="767140">we've</span> <span m="767260">seen</span> <span m="767440">before,</span> <span m="767870">so</span> <span m="767890">it's</span> <span m="768010">neat</span> <span m="768160">to</span> <span m="768280">see</span> <span m="768460">how</span> <span m="768610">they</span> <span m="768760">fit</span> <span m="768940">in</span> <span m="769060">here.</span></p>
<p><span m="770020">They</span> <span m="770230">had</span> <span m="770410">the--</span> <span m="770830">selection</span> <span m="771250">sort</span> <span m="771400">and</span> <span m="771460">insertion</span> <span m="771730">sort</span> <span m="772060">had</span> <span m="772210">the</span> <span m="772300">advantage</span> <span m="772690">that</span> <span m="772810">they</span> <span m="772960">were</span> <span m="773140">in</span> <span m="773320">place.</span> <span m="773800">You</span> <span m="773890">just</span> <span m="774070">needed</span> <span m="774310">a</span> <span m="774370">constant</span> <span m="774820">number</span> <span m="775180">of</span> <span m="775360">pointers</span> <span m="775900">or</span> <span m="776020">indices</span> <span m="777490">beyond</span> <span m="778090">the</span> <span m="778240">array</span> <span m="778480">itself.</span> <span m="779540">So</span> <span m="779650">they're</span> <span m="779800">very</span> <span m="780010">space</span> <span m="780340">efficient.</span> <span m="781070">So</span> <span m="781180">that</span> <span m="781330">was</span> <span m="781450">a</span> <span m="781510">plus</span> <span m="781930">for</span> <span m="782080">them.</span> <span m="782650">But</span> <span m="782860">they</span> <span m="782950">take</span> <span m="783130">n</span> <span m="783250">squared</span> <span m="783490">time,</span> <span m="783790">so</span> <span m="783910">you</span> <span m="784030">should</span> <span m="784180">never</span> <span m="784390">use</span> <span m="784600">them,</span> <span m="785410">except</span> <span m="785680">for</span> <span m="786010">n,</span> <span m="786160">at</span> <span m="786250">most,</span> <span m="786640">100</span> <span m="787090">or</span> <span m="787150">something.</span></p>
<p><span m="789310">AVL</span> <span m="789940">tree</span> <span m="790300">sort</span> <span m="791020">is</span> <span m="791320">great</span> <span m="791720">and</span> <span m="791890">then</span> <span m="792010">it</span> <span m="792100">gets</span> <span m="792310">n</span> <span m="792430">log</span> <span m="792640">n</span> <span m="792760">time,</span> <span m="793700">probably</span> <span m="794410">more</span> <span m="794740">complicated</span> <span m="795340">than</span> <span m="795470">merge sort</span> <span m="795880">and</span> <span m="795970">you</span> <span m="796060">could</span> <span m="796180">stick</span> <span m="796420">to</span> <span m="796510">merge</span> <span m="796750">sort.</span> <span m="797660">But</span> <span m="797710">neither</span> <span m="798040">merge sort</span> <span m="798440">nor</span> <span m="799040">set</span> <span m="799260">AVL</span> <span m="799360">tree</span> <span m="799780">sort</span> <span m="800710">are</span> <span m="800920">in</span> <span m="801070">place.</span> <span m="801950">And</span> <span m="802180">so</span> <span m="802870">the</span> <span m="803050">goal</span> <span m="803380">of</span> <span m="803530">today</span> <span m="804370">is</span> <span m="804670">to</span> <span m="804760">get</span> <span m="804910">the</span> <span m="805000">best</span> <span m="805300">of</span> <span m="805420">all</span> <span m="805570">those</span> <span m="805780">worlds</span> <span m="806110">in</span> <span m="806320">sorting</span> <span m="806770">to</span> <span m="806890">get</span> <span m="807040">n</span> <span m="807220">log</span> <span m="807430">n</span> <span m="807550">comparisons,</span> <span m="807970">which</span> <span m="808390">is</span> <span m="808810">optimal</span> <span m="809260">in</span> <span m="809350">the</span> <span m="809440">comparison</span> <span m="809920">model,</span> <span m="810910">but</span> <span m="811150">get</span> <span m="811390">it</span> <span m="811540">to</span> <span m="811750">be</span> <span m="811930">in</span> <span m="812140">place.</span> <span m="813460">And</span> <span m="813670">that's</span> <span m="813880">what</span> <span m="814000">we're</span> <span m="814120">going</span> <span m="814240">to</span> <span m="814330">get</span> <span m="814600">with</span> <span m="814930">binary</span> <span m="815320">heaps.</span></p>
<p><span m="818750">We're</span> <span m="818930">going</span> <span m="819080">to</span> <span m="819230">design</span> <span m="819710">a</span> <span m="819770">data</span> <span m="820010">structure</span> <span m="820970">that</span> <span m="821240">happens</span> <span m="821600">to</span> <span m="821690">build</span> <span m="821960">a</span> <span m="822020">little</span> <span m="822200">bit</span> <span m="822320">faster--</span> <span m="822710">as</span> <span m="822830">I</span> <span m="822890">mentioned,</span> <span m="823220">linear</span> <span m="823520">time</span> <span m="823760">building.</span> <span m="825470">So</span> <span m="825740">it's</span> <span m="825890">not</span> <span m="826220">representing</span> <span m="826850">a</span> <span m="826880">sorted</span> <span m="827240">order</span> <span m="827510">in</span> <span m="827630">the</span> <span m="827720">same</span> <span m="827990">way</span> <span m="828110">that</span> <span m="828380">AVL</span> <span m="828560">trees</span> <span m="828860">are.</span> <span m="829880">But</span> <span m="830120">it</span> <span m="830210">will</span> <span m="830390">be</span> <span m="830540">kind</span> <span m="830810">of</span> <span m="830900">tree-based.</span> <span m="831410">It</span> <span m="831470">will</span> <span m="831620">also</span> <span m="831950">be</span> <span m="832290">array-based.</span> <span m="833750">We're</span> <span m="833930">going</span> <span m="834050">to</span> <span m="834110">get</span> <span m="834320">logarithmic</span> <span m="835010">time</span> <span m="835310">for</span> <span m="835430">insert</span> <span m="835850">and</span> <span m="836000">delete_max.</span> <span m="836270">It</span> <span m="836870">happens</span> <span m="837200">to</span> <span m="837290">be</span> <span m="837380">amortized,</span> <span m="837860">because</span> <span m="838010">we</span> <span m="838130">use</span> <span m="838310">arrays.</span></p>
<p><span m="840230">But</span> <span m="840830">the</span> <span m="841010">key</span> <span m="841190">thing</span> <span m="841460">is</span> <span m="841640">that</span> <span m="841790">it's</span> <span m="841970">an</span> <span m="842090">in-place</span> <span m="842690">data</span> <span m="843170">structure.</span> <span m="844010">It</span> <span m="844250">only</span> <span m="845120">consists</span> <span m="845600">of</span> <span m="845720">an</span> <span m="845810">array</span> <span m="846110">of</span> <span m="846230">the</span> <span m="846320">items.</span> <span m="847970">And</span> <span m="848270">so,</span> <span m="848480">when</span> <span m="848660">we</span> <span m="848750">plug</span> <span m="849020">it</span> <span m="849110">into</span> <span m="849320">our</span> <span m="849380">sorting</span> <span m="849710">algorithm--</span> <span m="851120">priority</span> <span m="851570">queue</span> <span m="851780">sort</span> <span m="852050">or</span> <span m="852140">generic</span> <span m="852560">sorting</span> <span m="852860">algorithm--</span> <span m="853460">not</span> <span m="853760">only</span> <span m="854060">do</span> <span m="854210">we</span> <span m="854330">get</span> <span m="854570">n log</span> <span m="854930">n</span> <span m="855050">performance,</span> <span m="855650">but</span> <span m="855830">we</span> <span m="855980">also</span> <span m="856280">get</span> <span m="856490">an</span> <span m="856580">in-place</span> <span m="857690">sorting</span> <span m="858140">algorithm.</span> <span m="858530">This</span> <span m="858620">will</span> <span m="858710">be</span> <span m="858830">our</span> <span m="858920">first</span> <span m="859760">and</span> <span m="860030">only--</span> <span m="860510">to this</span> <span m="860750">class--</span> <span m="861510">n</span> <span m="861620">log</span> <span m="861840">n</span> <span m="862195">in-place</span> <span m="862820">sorting</span> <span m="863120">algorithm.</span> <span m="864570">Cool.</span></p>
<p><span m="867250">That's</span> <span m="867610">the</span> <span m="867700">goal.</span> <span m="869890">Let's</span> <span m="870750">do</span> <span m="871020">it.</span> <span m="871300">So</span> <span m="872790">what</span> <span m="873150">we're</span> <span m="873330">going</span> <span m="873630">to</span> <span m="873750">do,</span> <span m="875460">because</span> <span m="875850">we're</span> <span m="876000">in</span> <span m="876120">place,</span> <span m="876420">basically</span> <span m="876870">we</span> <span m="877020">have</span> <span m="877320">to</span> <span m="877410">have</span> <span m="877590">an</span> <span m="877680">array</span> <span m="878580">storing</span> <span m="879000">our</span> <span m="879100">end</span> <span m="879270">items.</span> <span m="879690">That's</span> <span m="879930">sort</span> <span m="880110">of</span> <span m="880200">the</span> <span m="880290">definition</span> <span m="880980">of</span> <span m="881130">in-place,</span> <span m="881580">just</span> <span m="881940">using</span> <span m="882600">n</span> <span m="882960">slots</span> <span m="883200">of</span> <span m="883290">memory</span> <span m="884070">exactly</span> <span m="884820">the</span> <span m="884940">size</span> <span m="885480">of</span> <span m="886110">the</span> <span m="886260">number</span> <span m="886470">of</span> <span m="886560">items</span> <span m="886950">in</span> <span m="887070">our</span> <span m="887160">structure.</span> <span m="888120">But</span> <span m="888390">we're</span> <span m="888480">obviously</span> <span m="888750">not</span> <span m="888900">going</span> <span m="889020">to</span> <span m="889080">use</span> <span m="889260">a</span> <span m="889320">regular</span> <span m="889710">unsorted</span> <span m="890100">array</span> <span m="890460">or a</span> <span m="890730">regular</span> <span m="891330">sorted</span> <span m="891780">array.</span></p>
<p><span m="893130">We're</span> <span m="893340">going</span> <span m="893460">to</span> <span m="893550">use</span> <span m="893730">array</span> <span m="894030">just</span> <span m="894270">as</span> <span m="894390">sort</span> <span m="894540">of</span> <span m="894630">the</span> <span m="894720">underlying</span> <span m="895380">technology</span> <span m="896160">for</span> <span m="897000">how</span> <span m="897330">things</span> <span m="897570">are</span> <span m="897660">stored.</span> <span m="898050">But</span> <span m="898230">we'd</span> <span m="898380">really</span> <span m="898770">like</span> <span m="899430">logarithmic</span> <span m="900030">performance,</span> <span m="900570">which</span> <span m="900810">should</span> <span m="901170">make</span> <span m="901440">you</span> <span m="901560">think</span> <span m="901890">tree.</span> <span m="902850">Only</span> <span m="903210">way</span> <span m="903330">to</span> <span m="903420">get</span> <span m="903570">a</span> <span m="903630">log</span> <span m="903960">is</span> <span m="904260">the</span> <span m="904350">binary</span> <span m="904680">tree,</span> <span m="904950">more</span> <span m="905160">or</span> <span m="905190">less.</span> <span m="906510">So</span> <span m="909680">somehow,</span> <span m="910640">we</span> <span m="910850">want</span> <span m="911030">to</span> <span m="911090">embed</span> <span m="912110">a</span> <span m="912320">tree</span> <span m="913400">into</span> <span m="913790">an</span> <span m="913860">array.</span> <span m="914740">Let</span> <span m="914970">me</span> <span m="915410">grab</span> <span m="915680">an</span> <span m="915770">example.</span></p>
<p><span m="923960">Let</span> <span m="924200">me</span> <span m="924350">draw</span> <span m="925760">a</span> <span m="926000">tree.</span> <span m="944680">If</span> <span m="944950">I</span> <span m="945040">got</span> <span m="945220">to</span> <span m="945340">choose</span> <span m="945640">any</span> <span m="945880">old</span> <span m="946030">tree</span> <span m="946270">I</span> <span m="946510">want,</span> <span m="947110">I</span> <span m="947350">would</span> <span m="947500">choose</span> <span m="948430">a</span> <span m="948640">tree</span> <span m="948910">that's</span> <span m="949750">basically</span> <span m="950140">perfectly</span> <span m="950680">balanced.</span> <span m="951550">Perfectly</span> <span m="952000">balanced</span> <span m="952390">would</span> <span m="952460">be</span> <span m="952690">like</span> <span m="952870">this,</span> <span m="953830">where--</span> <span m="955120">what's</span> <span m="955330">the</span> <span m="955420">property?</span> <span m="956050">That</span> <span m="956350">I</span> <span m="956470">have</span> <span m="957430">all</span> <span m="957760">of</span> <span m="957880">these</span> <span m="958300">levels--</span> <span m="958900">all</span> <span m="959110">of</span> <span m="959200">these</span> <span m="959380">depths</span> <span m="959830">are</span> <span m="959980">completely</span> <span m="960550">filled</span> <span m="960940">with</span> <span m="961090">nodes.</span> <span m="961810">This</span> <span m="962140">is</span> <span m="962480">depth</span> <span m="962740">0.</span> <span m="965800">Remember,</span> <span m="966250">this</span> <span m="966490">is</span> <span m="966580">depth</span> <span m="966970">1,</span> <span m="967450">this</span> <span m="967705">is</span> <span m="967960">depth</span> <span m="968470">2,</span> <span m="969550">this</span> <span m="969850">is</span> <span m="969910">depth</span> <span m="970270">3.</span> <span m="971340">So</span> <span m="971530">what</span> <span m="971650">I'd</span> <span m="971770">really</span> <span m="972040">like</span> <span m="973210">is</span> <span m="973480">to</span> <span m="973630">have</span> <span m="974950">2</span> <span m="975310">to</span> <span m="975430">the</span> <span m="975550">i</span> <span m="975850">nodes</span> <span m="978640">at</span> <span m="978910">depth</span> <span m="979185">i.</span> <span m="980860">That</span> <span m="981070">would</span> <span m="981220">be</span> <span m="981640">a</span> <span m="981760">perfect</span> <span m="983140">binary</span> <span m="983620">tree.</span></p>
<p><span m="985180">But</span> <span m="985720">that</span> <span m="985960">only</span> <span m="986200">works</span> <span m="986410">when</span> <span m="986600">n</span> <span m="986770">is</span> <span m="986920">1</span> <span m="987100">less</span> <span m="987280">than</span> <span m="987400">a</span> <span m="987460">power</span> <span m="987700">of</span> <span m="987820">2,</span> <span m="988240">right?</span> <span m="989050">I</span> <span m="989170">can't</span> <span m="989440">always</span> <span m="989740">achieve</span> <span m="990340">that</span> <span m="990580">for</span> <span m="990730">any</span> <span m="990970">n.</span> <span m="991630">And</span> <span m="991870">so</span> <span m="992140">the</span> <span m="992260">next</span> <span m="992530">best</span> <span m="992740">thing</span> <span m="992980">I</span> <span m="993070">could</span> <span m="993220">hope</span> <span m="993400">for</span> <span m="994090">is</span> <span m="995170">2</span> <span m="995470">to the</span> <span m="995590">i</span> <span m="995800">at</span> <span m="995890">nodes</span> <span m="996190">at</span> <span m="996250">depth</span> <span m="996520">i</span> <span m="996850">until</span> <span m="997270">the</span> <span m="997390">very</span> <span m="997690">last</span> <span m="998140">i--</span> <span m="998440">the</span> <span m="998590">largest</span> <span m="999070">depth.</span> <span m="1000340">And</span> <span m="1000685">in</span> <span m="1001030">that</span> <span m="1001600">level,</span> <span m="1002080">I'm</span> <span m="1002260">still</span> <span m="1002680">going</span> <span m="1002830">to</span> <span m="1002890">restrict</span> <span m="1003280">things.</span> <span m="1003640">I'm</span> <span m="1003790">going</span> <span m="1003970">to</span> <span m="1004360">force</span> <span m="1004720">all</span> <span m="1004990">of</span> <span m="1005110">the</span> <span m="1005170">nodes</span> <span m="1005410">to</span> <span m="1005500">be</span> <span m="1005680">as</span> <span m="1005830">far</span> <span m="1006130">left</span> <span m="1006430">as</span> <span m="1006550">possible.</span> <span m="1008950">So</span> <span m="1009160">I</span> <span m="1009280">want</span> <span m="1009400">to</span> <span m="1009490">say,</span> <span m="1009880">except</span> <span m="1013150">at</span> <span m="1013450">max</span> <span m="1013810">depth</span> <span m="1018240">where</span> <span m="1021350">nodes</span> <span m="1022950">are--</span> <span m="1023550">I'll</span> <span m="1023700">call</span> <span m="1023880">them</span> <span m="1024060">left</span> <span m="1024300">justified.</span> <span m="1030660">And</span> <span m="1030869">these</span> <span m="1031020">two</span> <span m="1031170">properties</span> <span m="1031680">together</span> <span m="1032640">is</span> <span m="1032970">what</span> <span m="1033150">I</span> <span m="1033240">call</span> <span m="1033480">a</span> <span m="1033569">complete</span> <span m="1034589">binary</span> <span m="1034950">tree.</span></p>
<p><span m="1047839">Why</span> <span m="1048140">is</span> <span m="1048260">this</span> <span m="1048440">interesting?</span> <span m="1049580">Because</span> <span m="1050270">I</span> <span m="1050450">claim</span> <span m="1050780">I</span> <span m="1050870">can</span> <span m="1051050">represent</span> <span m="1051980">a</span> <span m="1052160">tree</span> <span m="1052400">like</span> <span m="1052640">this</span> <span m="1053390">as</span> <span m="1053690">an</span> <span m="1053810">array.</span> <span m="1055400">I've</span> <span m="1055670">narrowed</span> <span m="1056060">things</span> <span m="1056330">down</span> <span m="1056630">enough</span> <span m="1057980">that</span> <span m="1058370">I</span> <span m="1058550">can</span> <span m="1058760">draw</span> <span m="1059060">an</span> <span m="1059150">array</span> <span m="1059450">down</span> <span m="1059720">here.</span> <span m="1061440">And</span> <span m="1061640">what</span> <span m="1061760">I'm</span> <span m="1061880">going</span> <span m="1062060">to</span> <span m="1062150">do</span> <span m="1062450">is</span> <span m="1062570">write</span> <span m="1062900">these</span> <span m="1063170">nodes</span> <span m="1063560">in</span> <span m="1063800">depth</span> <span m="1064220">order.</span></p>
<p><span m="1065250">So</span> <span m="1065540">I write</span> <span m="1065780">A</span> <span m="1065960">first,</span> <span m="1066440">because</span> <span m="1066620">that's</span> <span m="1066830">step</span> <span m="1067100">0.</span> <span m="1067910">Then</span> <span m="1068270">B,</span> <span m="1068450">C,</span> <span m="1068840">that's</span> <span m="1069050">step</span> <span m="1069380">1.</span> <span m="1070850">Then,</span> <span m="1071945">well,</span> <span m="1072350">they're</span> <span m="1072470">alphabetical.</span> <span m="1073140">I</span> <span m="1073400">made it</span> <span m="1073640">that</span> <span m="1073880">way.</span> <span m="1074880">D,</span> <span m="1075230">E,</span> <span m="1075525">F,</span> <span m="1075820">G</span> <span m="1076700">is</span> <span m="1077210">depth</span> <span m="1077570">2.</span> <span m="1078680">And</span> <span m="1079040">then</span> <span m="1079280">H, I,</span> <span m="1079640">J</span> <span m="1080000">is</span> <span m="1080180">step</span> <span m="1080450">3.</span> <span m="1083150">This</span> <span m="1083360">is</span> <span m="1083510">very</span> <span m="1083900">different</span> <span m="1084260">from</span> <span m="1084680">traversal</span> <span m="1085190">order</span> <span m="1085520">of</span> <span m="1085640">a</span> <span m="1085700">tree.</span> <span m="1086210">Traversal</span> <span m="1086600">order</span> <span m="1086810">would</span> <span m="1086930">have</span> <span m="1087050">been</span> <span m="1087260">H,</span> <span m="1087600">D,</span> <span m="1087940">I,</span> <span m="1088280">B,</span> <span m="1088720">J, E,</span> <span m="1089160">A,</span> <span m="1089600">F,</span> <span m="1090050">C,</span> <span m="1090500">G,</span> <span m="1091400">OK?</span> <span m="1091790">But</span> <span m="1092210">this</span> <span m="1092480">is</span> <span m="1092780">what</span> <span m="1092990">we</span> <span m="1093200">might</span> <span m="1093380">call</span> <span m="1093620">depth</span> <span m="1093980">order,</span> <span m="1095330">do</span> <span m="1095510">the</span> <span m="1095570">lowest</span> <span m="1095930">depth</span> <span m="1096170">nodes</span> <span m="1096440">first--</span> <span m="1097670">very</span> <span m="1097970">different</span> <span m="1098240">way</span> <span m="1098330">to</span> <span m="1098450">lay</span> <span m="1098600">things</span> <span m="1098870">out</span> <span m="1099920">or</span> <span m="1100100">to</span> <span m="1100820">linearize</span> <span m="1101840">our</span> <span m="1102020">data.</span> <span m="1104440">And</span> <span m="1104760">this</span> <span m="1104940">is</span> <span m="1105090">what</span> <span m="1105690">a</span> <span m="1105990">heap</span> <span m="1106290">is</span> <span m="1106410">going</span> <span m="1106560">to</span> <span m="1106650">look</span> <span m="1106830">like.</span></p>
<p><span m="1107260">So</span> <span m="1107730">the</span> <span m="1107910">cool</span> <span m="1108180">thing</span> <span m="1108450">is,</span> <span m="1109200">between</span> <span m="1112050">complete</span> <span m="1112860">binary</span> <span m="1113310">trees</span> <span m="1114060">and</span> <span m="1114330">arrays</span> <span m="1115320">is</span> <span m="1115590">a</span> <span m="1115650">bijection.</span> <span m="1116400">For</span> <span m="1116610">every</span> <span m="1116910">array,</span> <span m="1117510">there's</span> <span m="1117780">a</span> <span m="1117870">unique</span> <span m="1118410">complete</span> <span m="1118800">binary</span> <span m="1119190">tree.</span> <span m="1119760">And</span> <span m="1119910">for</span> <span m="1120060">every</span> <span m="1120240">complete</span> <span m="1120540">binary</span> <span m="1120840">tree,</span> <span m="1121320">there's</span> <span m="1121560">a</span> <span m="1121620">unique</span> <span m="1121950">array.</span> <span m="1123340">Why?</span> <span m="1123880">Because</span> <span m="1124390">the</span> <span m="1124480">complete</span> <span m="1125500">constraint</span> <span m="1126160">forces</span> <span m="1126700">everything--</span> <span m="1127750">forces</span> <span m="1128140">my</span> <span m="1128290">hand.</span> <span m="1128660">There's</span> <span m="1128770">only--</span> <span m="1129310">if</span> <span m="1129580">I</span> <span m="1129670">give</span> <span m="1129880">you</span> <span m="1130000">a</span> <span m="1130060">number</span> <span m="1130360">n,</span> <span m="1130870">there</span> <span m="1131080">is</span> <span m="1131230">one</span> <span m="1131620">tree</span> <span m="1131890">shape</span> <span m="1132430">of</span> <span m="1132700">size</span> <span m="1133030">n,</span> <span m="1133570">right?</span></p>
<p><span m="1133810">You</span> <span m="1133900">just</span> <span m="1134080">fill</span> <span m="1134350">in</span> <span m="1134470">the</span> <span m="1134560">nodes</span> <span m="1136120">top</span> <span m="1136390">down</span> <span m="1136690">until</span> <span m="1136960">you</span> <span m="1137050">get</span> <span m="1137170">to</span> <span m="1137260">the</span> <span m="1137320">last</span> <span m="1137560">level.</span> <span m="1137960">And</span> <span m="1138060">then</span> <span m="1138070">you</span> <span m="1138160">have</span> <span m="1138280">to</span> <span m="1138370">fill</span> <span m="1138550">them</span> <span m="1138700">in</span> <span m="1138790">left</span> <span m="1139010">to</span> <span m="1139120">right.</span> <span m="1139420">It's</span> <span m="1139870">what</span> <span m="1140080">you</span> <span m="1140170">might</span> <span m="1140350">call</span> <span m="1140890">reading</span> <span m="1141310">order</span> <span m="1142360">for</span> <span m="1142690">writing</span> <span m="1142990">down</span> <span m="1143170">nodes.</span> <span m="1143830">And</span> <span m="1144130">the</span> <span m="1144220">array</span> <span m="1144970">is</span> <span m="1145180">telling</span> <span m="1145540">you</span> <span m="1145870">which</span> <span m="1146170">keys</span> <span m="1146410">go</span> <span m="1146590">where.</span> <span m="1147070">This</span> <span m="1147370">is</span> <span m="1147520">the</span> <span m="1147610">first</span> <span m="1147880">node</span> <span m="1148090">you</span> <span m="1148180">write</span> <span m="1148330">down</span> <span m="1148600">at</span> <span m="1148690">the</span> <span m="1148780">root,</span> <span m="1149210">this</span> <span m="1149440">is</span> <span m="1149590">the</span> <span m="1149710">next</span> <span m="1149980">node</span> <span m="1150220">you</span> <span m="1150280">write</span> <span m="1150490">down</span> <span m="1150790">at</span> <span m="1150970">the</span> <span m="1151060">left</span> <span m="1151300">child</span> <span m="1151540">of</span> <span m="1151600">the</span> <span m="1151690">root,</span> <span m="1152050">and</span> <span m="1152290">so</span> <span m="1152500">on.</span> <span m="1153670">So</span> <span m="1153820">here</span> <span m="1154030">we</span> <span m="1154150">have</span> <span m="1154450">a</span> <span m="1154510">binary</span> <span m="1154870">tree</span> <span m="1155650">represented</span> <span m="1156280">as</span> <span m="1156400">an</span> <span m="1156490">array,</span> <span m="1156820">or</span> <span m="1157660">array</span> <span m="1157990">representing</span> <span m="1158560">a</span> <span m="1158620">binary</span> <span m="1158980">tree.</span></p>
<p><span m="1159280">The</span> <span m="1159650">very</span> <span m="1160030">specific</span> <span m="1160540">binary</span> <span m="1160840">tree,</span> <span m="1161660">it</span> <span m="1161830">has</span> <span m="1162190">a</span> <span m="1162460">clear</span> <span m="1163180">advantage,</span> <span m="1163810">which</span> <span m="1163990">is</span> <span m="1164140">it</span> <span m="1164260">is</span> <span m="1164410">guaranteed</span> <span m="1165070">balance.</span> <span m="1165580">No</span> <span m="1165820">rotations</span> <span m="1166420">necessary</span> <span m="1167050">in</span> <span m="1167170">heaps,</span> <span m="1167500">because</span> <span m="1168250">complete</span> <span m="1168580">binary</span> <span m="1168820">trees</span> <span m="1169060">are</span> <span m="1169180">always</span> <span m="1169480">balanced.</span> <span m="1169840">In</span> <span m="1169930">fact,</span> <span m="1170170">they</span> <span m="1170320">have</span> <span m="1170560">the</span> <span m="1170680">best</span> <span m="1170980">height</span> <span m="1171250">they</span> <span m="1171460">possibly</span> <span m="1172000">could,</span> <span m="1173770">which</span> <span m="1174070">is</span> <span m="1174400">ceiling</span> <span m="1174850">of</span> <span m="1174940">log</span> <span m="1175240">n.</span> <span m="1179560">Balanced,</span> <span m="1180070">remember,</span> <span m="1180430">just</span> <span m="1180610">meant</span> <span m="1180790">you were</span> <span m="1181000">big</span> <span m="1181100">O</span> <span m="1181360">of</span> <span m="1181480">log</span> <span m="1181750">n.</span> <span m="1182290">This</span> <span m="1182590">is</span> <span m="1182950">1</span> <span m="1183460">times</span> <span m="1183880">log</span> <span m="1184180">n.</span> <span m="1184330">So</span> <span m="1184510">it's</span> <span m="1184630">the</span> <span m="1184720">best</span> <span m="1186100">level</span> <span m="1186400">of</span> <span m="1186460">balance</span> <span m="1186790">you</span> <span m="1186880">could</span> <span m="1187000">hope</span> <span m="1187150">for.</span></p>
<p><span m="1187900">So</span> <span m="1188110">somehow,</span> <span m="1189520">I</span> <span m="1189820">claim,</span> <span m="1190330">we</span> <span m="1190540">can</span> <span m="1190750">maintain</span> <span m="1191320">a</span> <span m="1191410">complete</span> <span m="1191830">binary</span> <span m="1192190">tree</span> <span m="1192910">for</span> <span m="1193180">solving</span> <span m="1193540">priority</span> <span m="1193930">queues.</span> <span m="1194260">This</span> <span m="1194410">would</span> <span m="1194560">not</span> <span m="1194800">be</span> <span m="1194920">possible</span> <span m="1195370">if</span> <span m="1195460">you</span> <span m="1195520">were</span> <span m="1195610">trying</span> <span m="1195820">to</span> <span m="1195880">solve</span> <span m="1196180">the</span> <span m="1196270">whole</span> <span m="1196540">set</span> <span m="1196810">interface.</span> <span m="1197620">And</span> <span m="1197860">that's</span> <span m="1198040">kind</span> <span m="1198190">of</span> <span m="1198250">the</span> <span m="1198340">cool</span> <span m="1198550">thing</span> <span m="1198730">about</span> <span m="1198940">heaps,</span> <span m="1199660">is</span> <span m="1199880">that</span> <span m="1199990">by</span> <span m="1200110">just</span> <span m="1200380">focusing</span> <span m="1200890">on</span> <span m="1201040">the</span> <span m="1201160">subset</span> <span m="1201640">of</span> <span m="1201730">the</span> <span m="1201820">set</span> <span m="1202060">interface,</span> <span m="1203030">we</span> <span m="1203200">can</span> <span m="1204340">do</span> <span m="1204610">more.</span> <span m="1205030">We</span> <span m="1205210">can</span> <span m="1205480">maintain</span> <span m="1205870">this</span> <span m="1206020">very</span> <span m="1206350">strong</span> <span m="1206650">property.</span></p>
<p><span m="1207620">And</span> <span m="1207880">because</span> <span m="1208270">we</span> <span m="1208360">have</span> <span m="1208480">this</span> <span m="1208630">very</span> <span m="1208780">strong</span> <span m="1209020">property,</span> <span m="1209410">we</span> <span m="1209530">don't</span> <span m="1209710">even</span> <span m="1209920">need</span> <span m="1210040">to</span> <span m="1210130">store</span> <span m="1210430">this</span> <span m="1210610">tree.</span> <span m="1210850">We're</span> <span m="1211000">not</span> <span m="1211180">going</span> <span m="1211300">to</span> <span m="1211390">store</span> <span m="1211690">left</span> <span m="1211930">and</span> <span m="1212050">right</span> <span m="1212200">pointers</span> <span m="1213130">and</span> <span m="1213370">parent</span> <span m="1213610">pointers,</span> <span m="1214270">we're</span> <span m="1214450">just</span> <span m="1214630">going</span> <span m="1214750">to</span> <span m="1214840">store</span> <span m="1215080">the</span> <span m="1215200">array.</span> <span m="1216620">This</span> <span m="1216790">is</span> <span m="1216940">what</span> <span m="1217210">we</span> <span m="1217540">call</span> <span m="1218200">an</span> <span m="1218440">implicit</span> <span m="1218950">data</span> <span m="1219160">structure,</span> <span m="1228630">which</span> <span m="1228960">basically</span> <span m="1229470">means</span> <span m="1229800">no</span> <span m="1230040">pointers,</span> <span m="1233400">just</span> <span m="1233730">an</span> <span m="1233850">array</span> <span m="1237540">of</span> <span m="1237930">the</span> <span m="1238050">n</span> <span m="1238260">items.</span></p>
<p><span m="1244080">How</span> <span m="1244350">are</span> <span m="1244410">we</span> <span m="1244500">going</span> <span m="1244710">to</span> <span m="1244770">get</span> <span m="1244920">away</span> <span m="1245160">without</span> <span m="1245430">storing</span> <span m="1245730">pointers?</span> <span m="1246630">I'd</span> <span m="1246900">still</span> <span m="1247200">like</span> <span m="1247440">to</span> <span m="1247560">treat</span> <span m="1247950">it</span> <span m="1248070">like</span> <span m="1248280">a</span> <span m="1248310">tree.</span> <span m="1248790">I'd</span> <span m="1248970">still</span> <span m="1249240">like</span> <span m="1249420">to</span> <span m="1249540">know</span> <span m="1250290">the</span> <span m="1250530">left</span> <span m="1250830">child</span> <span m="1251250">of</span> <span m="1251370">B</span> <span m="1251670">is</span> <span m="1251910">D</span> <span m="1252150">and</span> <span m="1252300">the</span> <span m="1252390">right</span> <span m="1252620">child</span> <span m="1253030">B</span> <span m="1253320">is</span> <span m="1253560">E.</span> <span m="1254340">We'll</span> <span m="1254490">see</span> <span m="1254670">why</span> <span m="1254910">in</span> <span m="1255000">a</span> <span m="1255060">moment.</span> <span m="1256350">Well,</span> <span m="1256530">we</span> <span m="1256650">can</span> <span m="1256830">do</span> <span m="1257010">this</span> <span m="1257310">with</span> <span m="1260040">index</span> <span m="1260610">arithmetic.</span> <span m="1261990">So</span> <span m="1264230">maybe</span> <span m="1264620">I</span> <span m="1264740">should</span> <span m="1265190">add</span> <span m="1265340">some</span> <span m="1265500">labels</span> <span m="1265940">before</span> <span m="1266150">I</span> <span m="1266210">get</span> <span m="1266390">there.</span></p>
<p><span m="1271420">So</span> <span m="1271620">this</span> <span m="1271770">array</span> <span m="1272310">naturally</span> <span m="1272820">has</span> <span m="1273180">indices.</span> <span m="1274170">This</span> <span m="1274380">is</span> <span m="1274530">index</span> <span m="1274890">0.</span> <span m="1276630">This</span> <span m="1276810">is</span> <span m="1276900">index</span> <span m="1277200">1,</span> <span m="1277530">index</span> <span m="1277920">2,</span> <span m="1278280">index</span> <span m="1278670">3,</span> <span m="1279240">index</span> <span m="1279690">4,</span> <span m="1280180">index</span> <span m="1280470">5,</span> <span m="1280890">index</span> <span m="1281220">6,</span> <span m="1281580">7,</span> <span m="1282360">8,</span> <span m="1283320">9,</span> <span m="1283740">because</span> <span m="1284070">there</span> <span m="1284160">are</span> <span m="1284220">10</span> <span m="1285360">items,</span> <span m="1286010">0 through</span> <span m="1286260">9.</span> <span m="1287610">And</span> <span m="1288060">I</span> <span m="1288120">can</span> <span m="1288270">apply</span> <span m="1288540">those</span> <span m="1288720">labels</span> <span m="1289050">up</span> <span m="1289200">here,</span> <span m="1289440">too.</span> <span m="1289650">These</span> <span m="1289830">are</span> <span m="1289920">the</span> <span m="1290010">same</span> <span m="1290280">nodes,</span> <span m="1290700">so</span> <span m="1290820">0,</span> <span m="1291450">1,</span> <span m="1292170">2.</span> <span m="1292590">This</span> <span m="1292770">is</span> <span m="1292920">just</span> <span m="1293430">a</span> <span m="1293520">depth</span> <span m="1293910">order.</span></p>
<p><span m="1296880">But</span> <span m="1297060">once</span> <span m="1297240">I</span> <span m="1297330">have</span> <span m="1297480">this</span> <span m="1297630">labeling,</span> <span m="1298080">it's</span> <span m="1298200">going</span> <span m="1298320">to</span> <span m="1298380">be</span> <span m="1298470">a</span> <span m="1298530">lot</span> <span m="1298680">easier</span> <span m="1298920">to</span> <span m="1299010">figure</span> <span m="1299280">things</span> <span m="1299520">out.</span> <span m="1300130">So</span> <span m="1300210">if</span> <span m="1300330">I</span> <span m="1300420">wanted</span> <span m="1300660">to</span> <span m="1300750">know</span> <span m="1300900">the</span> <span m="1300990">left</span> <span m="1301230">child</span> <span m="1301530">of</span> <span m="1301590">B</span> <span m="1302160">is</span> <span m="1302460">D,</span> <span m="1302790">somehow,</span> <span m="1303390">given</span> <span m="1303720">the</span> <span m="1303810">number</span> <span m="1304140">1,</span> <span m="1304980">I</span> <span m="1305220">want</span> <span m="1305400">to</span> <span m="1305490">compute</span> <span m="1305910">the</span> <span m="1306000">number</span> <span m="1306270">3.</span> <span m="1308596">Add</span> <span m="1309080">2,</span> <span m="1311090">there</span> <span m="1311330">are</span> <span m="1311390">all</span> <span m="1311510">sorts--</span> <span m="1311780">multiply</span> <span m="1312200">by</span> <span m="1312350">3,</span> <span m="1312770">there</span> <span m="1312890">are</span> <span m="1312920">all</span> <span m="1313040">sorts</span> <span m="1313340">of</span> <span m="1313520">operations</span> <span m="1314030">that</span> <span m="1314150">take</span> <span m="1314360">1</span> <span m="1314630">and</span> <span m="1314720">turn</span> <span m="1314930">it</span> <span m="1315020">into</span> <span m="1315230">3.</span> <span m="1315770">But</span> <span m="1316010">there's</span> <span m="1316160">only</span> <span m="1316370">one</span> <span m="1316670">that's</span> <span m="1316850">going</span> <span m="1316970">to</span> <span m="1317060">work</span> <span m="1317330">in</span> <span m="1317510">all</span> <span m="1317690">cases.</span></p>
<p><span m="1318590">And</span> <span m="1318890">the</span> <span m="1318980">intuition</span> <span m="1319430">here</span> <span m="1319640">is,</span> <span m="1319850">well,</span> <span m="1320210">I</span> <span m="1320330">have</span> <span m="1320510">to</span> <span m="1320720">2</span> <span m="1320840">the</span> <span m="1320940">i</span> <span m="1321140">nodes</span> <span m="1321350">at</span> <span m="1321530">level</span> <span m="1321800">i.</span> <span m="1322265">If</span> <span m="1322730">I</span> <span m="1322790">want</span> <span m="1322970">to</span> <span m="1323030">go</span> <span m="1323150">to</span> <span m="1323270">the</span> <span m="1323360">child</span> <span m="1323900">level,</span> <span m="1324530">there's</span> <span m="1324800">2</span> <span m="1324950">to</span> <span m="1325070">the</span> <span m="1325170">i</span> <span m="1325310">plus</span> <span m="1325610">1</span> <span m="1325820">nodes</span> <span m="1326060">down</span> <span m="1326270">there--</span> <span m="1326990">exactly</span> <span m="1327470">double.</span> <span m="1328310">So</span> <span m="1328520">it's</span> <span m="1328580">the</span> <span m="1328670">very</span> <span m="1328850">last</span> <span m="1329090">one,</span> <span m="1329300">but</span> <span m="1329480">that</span> <span m="1329750">won't</span> <span m="1329990">really</span> <span m="1330530">matter.</span> <span m="1330980">If</span> <span m="1331100">there</span> <span m="1331250">is</span> <span m="1331490">a</span> <span m="1331520">left</span> <span m="1331730">child,</span> <span m="1332090">it</span> <span m="1332180">will</span> <span m="1332300">behave</span> <span m="1332570">the</span> <span m="1332660">same.</span></p>
<p><span m="1333350">And</span> <span m="1333560">so,</span> <span m="1333710">intuitively,</span> <span m="1334190">I</span> <span m="1334250">have</span> <span m="1334400">this</span> <span m="1334560">space</span> <span m="1334940">of</span> <span m="1335000">size</span> <span m="1335270">2</span> <span m="1335400">to</span> <span m="1335480">the</span> <span m="1335570">i.</span> <span m="1335810">I have</span> <span m="1335930">to</span> <span m="1336020">expand</span> <span m="1336590">it</span> <span m="1336710">to</span> <span m="1336830">a</span> <span m="1336890">space</span> <span m="1337220">of</span> <span m="1337280">size</span> <span m="1337970">2</span> <span m="1338180">to the i</span> <span m="1338450">plus</span> <span m="1338900">1,</span> <span m="1339350">So</span> <span m="1339800">I</span> <span m="1339890">should</span> <span m="1340100">multiply</span> <span m="1340650">by</span> <span m="1340820">2.</span> <span m="1342580">And</span> <span m="1342700">that's</span> <span m="1342880">almost</span> <span m="1343270">right,</span> <span m="1343870">but</span> <span m="1344140">then</span> <span m="1344320">there's</span> <span m="1344470">some</span> <span m="1345550">constants.</span> <span m="1347110">So</span> <span m="1347230">I'd</span> <span m="1347320">like</span> <span m="1347500">to</span> <span m="1347590">say</span> <span m="1348220">2</span> <span m="1348460">times</span> <span m="1348730">i.</span> <span m="1349450">But</span> <span m="1349720">if</span> <span m="1349870">we</span> <span m="1350140">look</span> <span m="1350350">at</span> <span m="1350470">the</span> <span m="1350830">examples</span> <span m="1351370">here,</span> <span m="1351910">1</span> <span m="1352330">times</span> <span m="1352660">2</span> <span m="1352900">is</span> <span m="1353320">2,</span> <span m="1354160">which</span> <span m="1354430">is</span> <span m="1354520">1</span> <span m="1354700">less</span> <span m="1354880">than</span> <span m="1355000">3.</span> <span m="1356170">2</span> <span m="1356410">times</span> <span m="1356680">2</span> <span m="1356830">is</span> <span m="1356950">4,</span> <span m="1357400">which</span> <span m="1357580">is</span> <span m="1357700">1</span> <span m="1357850">less</span> <span m="1358000">than</span> <span m="1358120">5.</span> <span m="1358420">Hey,</span> <span m="1358900">we</span> <span m="1359060">almost</span> <span m="1359320">got</span> <span m="1359470">it</span> <span m="1359530">right.</span> <span m="1359770">It's just</span> <span m="1359980">off</span> <span m="1360130">by</span> <span m="1360310">1.</span> <span m="1363055">Off</span> <span m="1363550">by</span> <span m="1364570">1</span> <span m="1364990">is--</span> <span m="1365680">index</span> <span m="1366130">errors</span> <span m="1366520">are</span> <span m="1366640">the</span> <span m="1366730">most</span> <span m="1366940">common</span> <span m="1367240">things</span> <span m="1367450">in</span> <span m="1367600">computer</span> <span m="1367900">science.</span></p>
<p><span m="1370840">What</span> <span m="1371050">about</span> <span m="1371230">the</span> <span m="1371320">right</span> <span m="1371500">child?</span> <span m="1373760">If</span> <span m="1374220">the</span> <span m="1374470">left</span> <span m="1374650">child</span> <span m="1374920">is a</span> <span m="1375010">2i</span> <span m="1375340">plus</span> <span m="1375580">1,</span> <span m="1375790">where is</span> <span m="1376000">the</span> <span m="1376090">right</span> <span m="1376270">child?</span> <span m="1379640">I</span> <span m="1379730">hear</span> <span m="1379910">lots</span> <span m="1380090">of</span> <span m="1380150">mumbles.</span> <span m="1380630">2i</span> <span m="1380900">plus</span> <span m="1381140">2--</span> <span m="1383330">one</span> <span m="1383630">more.</span> <span m="1383930">Because</span> <span m="1384290">we're</span> <span m="1384390">writing</span> <span m="1384650">things</span> <span m="1384920">left</span> <span m="1385130">to</span> <span m="1385220">right</span> <span m="1385460">in</span> <span m="1385580">depth</span> <span m="1385820">order,</span> <span m="1386600">the</span> <span m="1386840">right</span> <span m="1387020">child</span> <span m="1387650">is</span> <span m="1388010">the</span> <span m="1388130">right</span> <span m="1388340">sibling</span> <span m="1388940">of</span> <span m="1389060">the</span> <span m="1389150">left</span> <span m="1389330">child.</span> <span m="1389830">So</span> <span m="1389870">it's</span> <span m="1389960">just</span> <span m="1390140">one</span> <span m="1390740">larger,</span> <span m="1391700">OK?</span></p>
<p><span m="1392000">Given</span> <span m="1392300">those</span> <span m="1392570">rules,</span> <span m="1394070">we</span> <span m="1394220">can</span> <span m="1394400">also</span> <span m="1394670">compute</span> <span m="1395060">parent.</span> <span m="1395990">It's</span> <span m="1396230">just</span> <span m="1396770">whatever</span> <span m="1397280">is</span> <span m="1397520">the</span> <span m="1397640">inverse</span> <span m="1398120">of</span> <span m="1398210">both</span> <span m="1398450">of</span> <span m="1398570">these</span> <span m="1398720">functions,</span> <span m="1400700">which</span> <span m="1402050">I</span> <span m="1402290">want</span> <span m="1402500">to</span> <span m="1402590">divide</span> <span m="1403070">by</span> <span m="1403250">2</span> <span m="1403670">at</span> <span m="1403880">some</span> <span m="1404090">point.</span> <span m="1405890">I</span> <span m="1405980">want</span> <span m="1406130">to</span> <span m="1406190">get</span> <span m="1406340">back</span> <span m="1406520">to</span> <span m="1406640">i</span> <span m="1406940">given</span> <span m="1407270">2i</span> <span m="1407540">plus</span> <span m="1407780">1</span> <span m="1407960">or</span> <span m="1408020">given</span> <span m="1408290">2i</span> <span m="1408560">plus</span> <span m="1408800">2.</span> <span m="1409400">And</span> <span m="1409670">so</span> <span m="1412660">if</span> <span m="1413080">I</span> <span m="1413200">subtract</span> <span m="1413770">1</span> <span m="1414190">from</span> <span m="1414430">i,</span> <span m="1415900">then</span> <span m="1416170">I</span> <span m="1416260">either</span> <span m="1416530">get</span> <span m="1416650">2i</span> <span m="1417070">or</span> <span m="1417130">2i</span> <span m="1417400">plus</span> <span m="1417640">1.</span> <span m="1418150">And</span> <span m="1418420">then,</span> <span m="1418630">if</span> <span m="1418750">I</span> <span m="1418870">take</span> <span m="1419230">an</span> <span m="1419410">integer</span> <span m="1419710">division</span> <span m="1420130">by</span> <span m="1420280">2,</span> <span m="1421030">I</span> <span m="1421270">get</span> <span m="1421780">i--</span> <span m="1422680">the</span> <span m="1422800">original</span> <span m="1423200">i.</span> <span m="1423720">Sorry,</span> <span m="1423910">maybe</span> <span m="1424150">I'll</span> <span m="1424270">call</span> <span m="1424450">this</span> <span m="1424630">j</span> <span m="1425020">to</span> <span m="1425650">be</span> <span m="1425830">clearer.</span> <span m="1426790">So</span> <span m="1427000">j</span> <span m="1427450">is</span> <span m="1427780">the</span> <span m="1427870">left</span> <span m="1428170">or</span> <span m="1428290">right</span> <span m="1428500">child.</span> <span m="1429580">Then</span> <span m="1429730">I</span> <span m="1429820">can</span> <span m="1429940">reconstruct</span> <span m="1430540">i,</span> <span m="1431080">which</span> <span m="1431320">was</span> <span m="1431440">the</span> <span m="1431530">parent.</span></p>
<p><span m="1433210">So</span> <span m="1433480">this</span> <span m="1433690">is</span> <span m="1434450">constant</span> <span m="1434890">number</span> <span m="1435140">arithmetic</span> <span m="1435640">operations.</span> <span m="1436160">So</span> <span m="1436300">I</span> <span m="1436450">don't</span> <span m="1436690">have</span> <span m="1436900">to</span> <span m="1437020">store</span> <span m="1437830">left</span> <span m="1438130">and</span> <span m="1438220">right</span> <span m="1438340">pointers.</span> <span m="1438700">I</span> <span m="1438760">can</span> <span m="1438880">just</span> <span m="1439030">compute</span> <span m="1439420">them</span> <span m="1439570">whenever</span> <span m="1439900">I</span> <span m="1439990">need</span> <span m="1440170">them.</span> <span m="1440410">Whenever</span> <span m="1440770">I'm</span> <span m="1440890">at</span> <span m="1441010">some</span> <span m="1441250">node</span> <span m="1441520">like</span> <span m="1441730">E,</span> <span m="1443140">and</span> <span m="1443380">I</span> <span m="1443470">want</span> <span m="1443650">to</span> <span m="1443710">know</span> <span m="1443830">what's its</span> <span m="1444160">left</span> <span m="1444370">child--</span> <span m="1445540">sorry,</span> <span m="1446170">given</span> <span m="1446530">the</span> <span m="1446590">node</span> <span m="1447010">index</span> <span m="1447460">4,</span> <span m="1448390">which</span> <span m="1448630">happens</span> <span m="1448930">to</span> <span m="1449020">contain</span> <span m="1449770">the</span> <span m="1449980">item</span> <span m="1450380">E,</span> <span m="1451210">and</span> <span m="1451390">I</span> <span m="1451450">want</span> <span m="1451600">to</span> <span m="1451660">know</span> <span m="1451780">what's its</span> <span m="1452080">left</span> <span m="1452260">child,</span> <span m="1452620">I just</span> <span m="1452800">multiply</span> <span m="1453160">by</span> <span m="1453280">2</span> <span m="1453460">and</span> <span m="1453550">add</span> <span m="1453670">1.</span> <span m="1453880">I</span> <span m="1453970">get</span> <span m="1454150">9.</span> <span m="1454930">And</span> <span m="1455050">then,</span> <span m="1455170">I</span> <span m="1455260">can</span> <span m="1455410">index</span> <span m="1455890">into</span> <span m="1456130">this</span> <span m="1456280">array</span> <span m="1456520">at</span> <span m="1456610">position</span> <span m="1457030">9.</span></p>
<p><span m="1457360">Because</span> <span m="1457570">I</span> <span m="1457600">don't--</span> <span m="1457870">this</span> <span m="1458110">is</span> <span m="1458230">just</span> <span m="1458440">in</span> <span m="1458560">my</span> <span m="1458710">head,</span> <span m="1459020">remember.</span> <span m="1460630">We're</span> <span m="1460750">just</span> <span m="1460930">thinking</span> <span m="1461380">that</span> <span m="1461500">there's</span> <span m="1461710">a</span> <span m="1461770">tree</span> <span m="1462010">here.</span> <span m="1462770">But</span> <span m="1463000">in</span> <span m="1463210">reality,</span> <span m="1463870">on</span> <span m="1463990">the</span> <span m="1464080">computer,</span> <span m="1464440">there's</span> <span m="1464650">just</span> <span m="1464890">the</span> <span m="1465040">array.</span> <span m="1466340">So</span> <span m="1466570">if</span> <span m="1466690">we</span> <span m="1466810">want</span> <span m="1466960">to</span> <span m="1467050">go</span> <span m="1467320">from</span> <span m="1467590">E</span> <span m="1467920">to</span> <span m="1468070">J,</span> <span m="1468500">we</span> <span m="1468550">can,</span> <span m="1469120">from</span> <span m="1469330">4</span> <span m="1469480">to</span> <span m="1469600">9.</span> <span m="1470530">If</span> <span m="1470710">we</span> <span m="1470860">go</span> <span m="1471280">try</span> <span m="1471550">to</span> <span m="1471640">go</span> <span m="1471730">to</span> <span m="1471820">the</span> <span m="1471880">right</span> <span m="1472090">child,</span> <span m="1472450">we</span> <span m="1472540">multiply</span> <span m="1472970">by</span> <span m="1473110">2.</span> <span m="1473620">8</span> <span m="1474010">add</span> <span m="1474280">2--</span> <span m="1474760">10.</span> <span m="1475430">And</span> <span m="1475570">we</span> <span m="1475660">see,</span> <span m="1475810">oh,</span> <span m="1476020">10</span> <span m="1476380">is</span> <span m="1476500">beyond</span> <span m="1476860">the</span> <span m="1476980">end</span> <span m="1477100">of</span> <span m="1477190">the</span> <span m="1477310">array.</span> <span m="1477820">But</span> <span m="1478210">our array</span> <span m="1478420">stores</span> <span m="1478720">its</span> <span m="1478840">size,</span> <span m="1479300">so</span> <span m="1479410">we</span> <span m="1479590">realize,</span> <span m="1480110">oh,</span> <span m="1480190">E</span> <span m="1480280">does</span> <span m="1480460">not</span> <span m="1480640">have</span> <span m="1480790">a</span> <span m="1480850">right</span> <span m="1481030">child.</span> <span m="1482110">This</span> <span m="1482290">is</span> <span m="1482380">something</span> <span m="1482650">you</span> <span m="1482770">can</span> <span m="1482920">only</span> <span m="1483340">do</span> <span m="1483580">in</span> <span m="1483670">a</span> <span m="1483730">complete</span> <span m="1484060">binary</span> <span m="1484390">tree.</span> <span m="1485050">In</span> <span m="1485230">a</span> <span m="1485290">general</span> <span m="1485590">binary</span> <span m="1485920">tree</span> <span m="1486200">you</span> <span m="1486310">don't</span> <span m="1486490">have</span> <span m="1486730">these</span> <span m="1486880">nice</span> <span m="1487060">properties.</span></p>
<p><span m="1489650">Cool,</span> <span m="1491480">so</span> <span m="1491810">this</span> <span m="1491990">is</span> <span m="1492110">basically</span> <span m="1493370">a</span> <span m="1493580">heap.</span> <span m="1493970">I</span> <span m="1494120">just</span> <span m="1494300">need</span> <span m="1494480">to</span> <span m="1494570">add</span> <span m="1494900">one</span> <span m="1495170">more</span> <span m="1495440">property,</span> <span m="1498380">naturally</span> <span m="1498950">called</span> <span m="1499250">the heap</span> <span m="1499510">property.</span> <span m="1504880">So</span> <span m="1507600">there</span> <span m="1507840">are</span> <span m="1508110">multiple</span> <span m="1508590">types</span> <span m="1508980">of</span> <span m="1509100">heaps.</span> <span m="1509520">This type</span> <span m="1509730">of</span> <span m="1510135">heap</span> <span m="1510540">is</span> <span m="1510660">called</span> <span m="1510840">a</span> <span m="1510900">binary</span> <span m="1511260">heap.</span> <span m="1511890">We</span> <span m="1512070">will</span> <span m="1512220">talk</span> <span m="1512430">about</span> <span m="1512610">others</span> <span m="1512940">in</span> <span m="1513090">future</span> <span m="1513420">lectures.</span> <span m="1514430">I'm going to</span> <span m="1514900">call it</span> <span m="1515370">Q.</span> <span m="1527456">Explicit</span> <span m="1528080">thing--</span> <span m="1528690">this</span> <span m="1528960">is</span> <span m="1529140">an</span> <span m="1529260">array</span> <span m="1530610">representing</span> <span m="1532470">a</span> <span m="1532710">complete</span> <span m="1533070">binary</span> <span m="1533370">tree,</span> <span m="1547913">called</span> <span m="1548400">the</span> <span m="1548680">array</span> <span m="1548920">Q.</span> <span m="1549760">And</span> <span m="1550330">we</span> <span m="1550540">want</span> <span m="1551950">every</span> <span m="1552370">node</span> <span m="1556540">to</span> <span m="1557010">satisfy</span> <span m="1562270">the</span> <span m="1563020">so-called</span> <span m="1563710">max-heap</span> <span m="1565040">property,</span> <span m="1576890">which</span> <span m="1577090">says</span> <span m="1578720">Q[i]</span> <span m="1580150">is</span> <span m="1580480">greater than</span> <span m="1580770">or</span> <span m="1580840">equal</span> <span m="1581050">to</span> <span m="1581320">Q[j]</span> <span m="1584290">for</span> <span m="1584680">both</span> <span m="1585040">children</span> <span m="1586750">left</span> <span m="1587140">of i</span> <span m="1588730">and</span> <span m="1589300">right</span> <span m="1589540">of i.</span></p>
<p><span m="1597160">So</span> <span m="1599170">we</span> <span m="1599410">have</span> <span m="1599530">a</span> <span m="1599640">node</span> <span m="1600560">i.</span> <span m="1601690">And</span> <span m="1602680">it</span> <span m="1603010">has</span> <span m="1603250">two</span> <span m="1603400">children--</span> <span m="1604750">2i</span> <span m="1605110">plus</span> <span m="1605350">1</span> <span m="1605710">and</span> <span m="1605980">2i</span> <span m="1606250">plus</span> <span m="1606520">2.</span> <span m="1608290">These</span> <span m="1608590">are</span> <span m="1608980">two</span> <span m="1609430">values</span> <span m="1609910">of</span> <span m="1610030">j.</span> <span m="1613360">What</span> <span m="1613600">we</span> <span m="1613690">want</span> <span m="1614020">is</span> <span m="1614410">a</span> <span m="1615280">greater</span> <span m="1615700">than</span> <span m="1615820">or</span> <span m="1615970">equal</span> <span m="1616180">to</span> <span m="1617140">relation</span> <span m="1617620">here</span> <span m="1618310">and</span> <span m="1618580">here.</span> <span m="1620180">So</span> <span m="1620260">this node</span> <span m="1620640">should</span> <span m="1620800">be</span> <span m="1620890">bigger</span> <span m="1621190">than</span> <span m="1621340">both</span> <span m="1621580">this</span> <span m="1621760">one</span> <span m="1621940">and</span> <span m="1622030">this</span> <span m="1622180">one.</span> <span m="1622520">Which</span> <span m="1622840">of</span> <span m="1622930">these</span> <span m="1623140">is</span> <span m="1623260">larger?</span> <span m="1623890">We</span> <span m="1624100">don't</span> <span m="1624280">know,</span> <span m="1624610">and</span> <span m="1624850">we</span> <span m="1624970">don't</span> <span m="1625150">care--</span> <span m="1626230">very</span> <span m="1626620">different</span> <span m="1627100">from</span> <span m="1627520">binary</span> <span m="1627820">search</span> <span m="1628060">trees</span> <span m="1628360">or</span> <span m="1628450">set</span> <span m="1629050">binary</span> <span m="1629470">trees,</span> <span m="1629830">where</span> <span m="1630010">we</span> <span m="1630100">said</span> <span m="1630730">these</span> <span m="1631000">guys</span> <span m="1631240">were</span> <span m="1631360">less</span> <span m="1631540">than</span> <span m="1631640">or</span> <span m="1631740">equal</span> <span m="1631790">to</span> <span m="1632110">this</span> <span m="1632470">one,</span> <span m="1633040">this</span> <span m="1633370">one</span> <span m="1633550">was</span> <span m="1633670">less than or equal</span> <span m="1634030">to</span> <span m="1634150">all</span> <span m="1634390">the</span> <span m="1634510">nodes</span> <span m="1634750">in</span> <span m="1634840">the</span> <span m="1634930">subtree</span> <span m="1635320">here.</span> <span m="1635530">We're</span> <span m="1635620">just</span> <span m="1635830">locally</span> <span m="1636250">saying,</span> <span m="1636820">this</span> <span m="1637060">node</span> <span m="1637240">is</span> <span m="1637360">greater than</span> <span m="1637610">or</span> <span m="1637710">equal</span> <span m="1637840">to</span> <span m="1638200">this</span> <span m="1638380">node</span> <span m="1638890">and</span> <span m="1639250">this</span> <span m="1639430">node.</span> <span m="1640000">So</span> <span m="1640540">the</span> <span m="1640690">biggest</span> <span m="1641080">is</span> <span m="1641200">at</span> <span m="1641350">the</span> <span m="1641410">top.</span></p>
<p><span m="1646270">So</span> <span m="1646510">one</span> <span m="1646900">nice</span> <span m="1648160">lemma</span> <span m="1648730">about</span> <span m="1650290">these</span> <span m="1650560">heaps--</span> <span m="1650890">this</span> <span m="1651040">is</span> <span m="1651250">weird.</span> <span m="1654010">Let</span> <span m="1654220">me</span> <span m="1654340">give</span> <span m="1654490">you</span> <span m="1654580">some</span> <span m="1654790">more</span> <span m="1654940">intuition.</span> <span m="1656590">If</span> <span m="1656920">you</span> <span m="1657130">are</span> <span m="1657400">a</span> <span m="1657490">binary</span> <span m="1657850">heap,</span> <span m="1658090">if</span> <span m="1658210">you</span> <span m="1658300">satisfy</span> <span m="1658660">this</span> <span m="1658810">max-heap</span> <span m="1659230">property</span> <span m="1659680">everywhere,</span> <span m="1660580">then</span> <span m="1660850">in</span> <span m="1660940">fact,</span> <span m="1661360">you</span> <span m="1661570">learn</span> <span m="1661960">that</span> <span m="1663220">every</span> <span m="1663520">node</span> <span m="1663760">i</span> <span m="1664750">is</span> <span m="1665020">greater</span> <span m="1665320">than</span> <span m="1665530">or</span> <span m="1665650">equal</span> <span m="1665950">to</span> <span m="1666670">all</span> <span m="1667090">nodes</span> <span m="1667510">in</span> <span m="1667660">its</span> <span m="1667780">subtree.</span> <span m="1668320">These</span> <span m="1668560">are</span> <span m="1668650">what</span> <span m="1668800">we</span> <span m="1668980">call</span> <span m="1669320">descendants</span> <span m="1673850">in</span> <span m="1674420">subtree</span> <span m="1675260">of</span> <span m="1675500">i.</span></p>
<p><span m="1680750">Let</span> <span m="1680860">me</span> <span m="1682150">look</span> <span m="1682420">at</span> <span m="1682510">this</span> <span m="1682690">example.</span> <span m="1683390">So</span> <span m="1683440">I</span> <span m="1683500">haven't</span> <span m="1683770">written</span> <span m="1683980">any</span> <span m="1684160">numbers</span> <span m="1684520">here.</span> <span m="1685180">You</span> <span m="1685300">can</span> <span m="1685450">imagine.</span> <span m="1686650">So</span> <span m="1686890">A</span> <span m="1687220">here</span> <span m="1688270">is</span> <span m="1688540">greater than or</span> <span m="1688930">equal</span> <span m="1689140">to</span> <span m="1689230">both</span> <span m="1689530">B</span> <span m="1689740">and</span> <span m="1689890">C,</span> <span m="1690880">and</span> <span m="1691150">B</span> <span m="1691360">is</span> <span m="1691510">greater than or</span> <span m="1691750">equal</span> <span m="1691930">to</span> <span m="1692030">D and</span> <span m="1692385">E,</span> <span m="1692950">and</span> <span m="1693190">C</span> <span m="1693430">is</span> <span m="1693550">greater than or equal</span> <span m="1693970">to</span> <span m="1694060">F and</span> <span m="1694300">G,</span> <span m="1694800">D</span> <span m="1695300">is</span> <span m="1695380">greater than or</span> <span m="1695560">equal</span> <span m="1695770">to</span> <span m="1695850">H and</span> <span m="1696130">I,</span> <span m="1696340">and</span> <span m="1696460">E</span> <span m="1696610">is</span> <span m="1696730">greater than or</span> <span m="1696970">equal</span> <span m="1697180">to</span> <span m="1697270">J.</span> <span m="1697660">That</span> <span m="1697930">would</span> <span m="1698050">make</span> <span m="1698320">this</span> <span m="1698530">structure</span> <span m="1699070">a</span> <span m="1699190">heap,</span> <span m="1700030">not</span> <span m="1700270">just</span> <span m="1700480">a</span> <span m="1700510">complete</span> <span m="1700840">binary</span> <span m="1701170">tree.</span></p>
<p><span m="1703660">So</span> <span m="1703800">what</span> <span m="1703950">does</span> <span m="1704130">that</span> <span m="1704250">imply?</span> <span m="1704640">It</span> <span m="1704730">implies</span> <span m="1705210">that</span> <span m="1705390">A</span> <span m="1705690">must</span> <span m="1705960">be</span> <span m="1706080">the</span> <span m="1706200">maximum.</span> <span m="1707380">So</span> <span m="1707430">you</span> <span m="1707520">look</span> <span m="1707700">at</span> <span m="1707790">any</span> <span m="1708030">node</span> <span m="1708270">here,</span> <span m="1708480">like</span> <span m="1708660">J,</span> <span m="1709830">A</span> <span m="1710220">is</span> <span m="1710370">greater than or equal</span> <span m="1710790">to</span> <span m="1710910">B</span> <span m="1711240">is</span> <span m="1711360">greater</span> <span m="1711620">than or equal</span> <span m="1711850">to</span> <span m="1711960">E</span> <span m="1712260">is</span> <span m="1712410">greater</span> <span m="1712620">than</span> <span m="1712740">or</span> <span m="1712840">equal</span> <span m="1712950">to</span> <span m="1713040">J.</span> <span m="1714410">And</span> <span m="1714680">in</span> <span m="1714770">general,</span> <span m="1715260">what</span> <span m="1715280">we're</span> <span m="1715400">saying</span> <span m="1715790">is</span> <span m="1716030">that</span> <span m="1716360">A</span> <span m="1716660">is</span> <span m="1716780">greater than or equal</span> <span m="1717260">to</span> <span m="1717620">all</span> <span m="1717860">nodes</span> <span m="1718100">in</span> <span m="1718190">the</span> <span m="1718250">tree.</span> <span m="1718730">B</span> <span m="1718970">is</span> <span m="1719120">greater</span> <span m="1719330">than</span> <span m="1719420">or</span> <span m="1719520">equal</span> <span m="1719660">to</span> <span m="1719780">all</span> <span m="1719990">nodes</span> <span m="1720260">in</span> <span m="1720410">its</span> <span m="1720620">subtree</span> <span m="1721190">down</span> <span m="1721460">here.</span> <span m="1722340">C</span> <span m="1722660">is</span> <span m="1722780">greater than or equal</span> <span m="1723200">to</span> <span m="1723290">all</span> <span m="1723440">nodes</span> <span m="1723680">in</span> <span m="1723770">its</span> <span m="1723890">subtree.</span></p>
<p><span m="1724760">That's</span> <span m="1725150">what</span> <span m="1725300">this</span> <span m="1725450">lemma is</span> <span m="1725780">saying.</span> <span m="1727220">You</span> <span m="1727400">can</span> <span m="1728060">prove</span> <span m="1728390">this</span> <span m="1728600">lemma</span> <span m="1728870">by</span> <span m="1729020">induction.</span> <span m="1730790">But</span> <span m="1731120">it's</span> <span m="1732020">really</span> <span m="1732350">simple.</span> <span m="1735280">If</span> <span m="1735550">you</span> <span m="1735640">have</span> <span m="1735880">two</span> <span m="1736060">nodes,</span> <span m="1736300">i and</span> <span m="1736570">j,</span> <span m="1736900">and</span> <span m="1737080">j</span> <span m="1737320">is</span> <span m="1737410">somewhere</span> <span m="1737830">in</span> <span m="1737950">the</span> <span m="1738040">subtree,</span> <span m="1738760">that</span> <span m="1739000">means</span> <span m="1739270">there's</span> <span m="1739450">some</span> <span m="1739870">downward</span> <span m="1740410">path</span> <span m="1741580">from</span> <span m="1742030">i</span> <span m="1742960">to</span> <span m="1743140">j.</span> <span m="1743770">And</span> <span m="1744010">you</span> <span m="1744100">know</span> <span m="1744370">that,</span> <span m="1744790">for</span> <span m="1744970">every</span> <span m="1745270">edge</span> <span m="1745510">we</span> <span m="1745630">traverse</span> <span m="1746080">on</span> <span m="1746200">a</span> <span m="1746260">downward</span> <span m="1746560">path,</span> <span m="1747520">our</span> <span m="1747700">key</span> <span m="1748060">is</span> <span m="1748270">going</span> <span m="1748630">down</span> <span m="1749650">non-strictly.</span></p>
<p><span m="1750280">So</span> <span m="1750730">every</span> <span m="1751030">child</span> <span m="1751480">is</span> <span m="1751600">less</span> <span m="1751870">than</span> <span m="1751970">or</span> <span m="1752070">equal</span> <span m="1752170">to</span> <span m="1752230">its</span> <span m="1752350">parent.</span> <span m="1752730">i</span> <span m="1753180">is</span> <span m="1753400">greater than or equal</span> <span m="1753760">to</span> <span m="1753890">this,</span> <span m="1754150">is</span> <span m="1754270">greater than or</span> <span m="1754420">equal to</span> <span m="1754820">this,</span> <span m="1754960">is</span> <span m="1755050">greater than or equal</span> <span m="1755230">to</span> <span m="1755540">this,</span> <span m="1755620">is</span> <span m="1755710">greater than or</span> <span m="1755950">equal</span> <span m="1756150">to</span> <span m="1756250">j,</span> <span m="1757600">OK?</span> <span m="1757900">So</span> <span m="1758170">by</span> <span m="1759520">transitivity</span> <span m="1760420">of</span> <span m="1760600">less</span> <span m="1760780">than</span> <span m="1760900">or</span> <span m="1761020">equal</span> <span m="1761230">to,</span> <span m="1761470">you know</span> <span m="1761730">that</span> <span m="1762090">i</span> <span m="1762450">is,</span> <span m="1762790">in</span> <span m="1762880">fact,</span> <span m="1763300">greater</span> <span m="1763630">than</span> <span m="1763780">or equal to</span> <span m="1764050">j.</span> <span m="1764710">Or</span> <span m="1764890">sorry,</span> <span m="1765100">the</span> <span m="1765190">key</span> <span m="1765610">in</span> <span m="1765880">i</span> <span m="1766450">is</span> <span m="1766750">greater</span> <span m="1766960">than</span> <span m="1767080">or</span> <span m="1767180">equal</span> <span m="1767290">to</span> <span m="1767500">the</span> <span m="1767590">key</span> <span m="1767900">in</span> <span m="1768130">j.</span> <span m="1768940">This</span> <span m="1769210">is</span> <span m="1769360">what</span> <span m="1769510">we're</span> <span m="1769630">calling</span> <span m="1769900">i,</span> <span m="1770260">the</span> <span m="1770380">index.</span> <span m="1770960">This</span> <span m="1771130">is</span> <span m="1771280">what</span> <span m="1771430">we would</span> <span m="1771580">call</span> <span m="1771790">Q</span> <span m="1772570">of</span> <span m="1772900">i.</span> <span m="1774170">This is</span> <span m="1774640">Index</span> <span m="1775000">j</span> <span m="1776230">Q</span> <span m="1776560">of</span> <span m="1776710">j.</span></p>
<p><span m="1780010">Very</span> <span m="1780430">different</span> <span m="1780790">way</span> <span m="1780940">to</span> <span m="1781060">organize</span> <span m="1783510">keys</span> <span m="1784470">in</span> <span m="1784710">a</span> <span m="1784770">tree,</span> <span m="1786660">but</span> <span m="1787080">as</span> <span m="1787410">you</span> <span m="1787530">might</span> <span m="1787710">imagine,</span> <span m="1788980">this</span> <span m="1789120">is</span> <span m="1789240">going</span> <span m="1789360">to</span> <span m="1789450">be</span> <span m="1789600">good</span> <span m="1789870">for</span> <span m="1790020">priority</span> <span m="1790440">queues.</span> <span m="1790680">Because</span> <span m="1790860">priority</span> <span m="1791190">queues</span> <span m="1791490">just</span> <span m="1791820">need</span> <span m="1792060">to</span> <span m="1792150">find</span> <span m="1792600">the</span> <span m="1792690">maximum</span> <span m="1793230">elements.</span> <span m="1794730">Then</span> <span m="1794910">they</span> <span m="1795000">need</span> <span m="1795120">to</span> <span m="1795240">delete</span> <span m="1795540">it.</span> <span m="1795660">That's</span> <span m="1796050">going</span> <span m="1796170">to</span> <span m="1796230">be</span> <span m="1796350">harder,</span> <span m="1796680">because</span> <span m="1796860">leading</span> <span m="1797190">the</span> <span m="1797250">root</span> <span m="1797520">is,</span> <span m="1797640">like--</span> <span m="1797910">that's</span> <span m="1798180">the</span> <span m="1798360">hardest</span> <span m="1798870">node</span> <span m="1799140">to</span> <span m="1799260">delete,</span> <span m="1799590">intuitively.</span> <span m="1800880">I'd</span> <span m="1801120">really</span> <span m="1801330">prefer</span> <span m="1801630">to</span> <span m="1801720">delete</span> <span m="1801990">leaves.</span></p>
<p><span m="1802950">But</span> <span m="1803580">leading</span> <span m="1804060">leaves</span> <span m="1805230">and</span> <span m="1805500">keeping</span> <span m="1805950">a</span> <span m="1806010">complete</span> <span m="1806370">binary</span> <span m="1806670">tree</span> <span m="1806970">is</span> <span m="1807090">actually</span> <span m="1807390">kind</span> <span m="1807570">of</span> <span m="1807660">hard.</span> <span m="1808470">If</span> <span m="1808590">I</span> <span m="1809010">want</span> <span m="1809280">to</span> <span m="1809340">delete</span> <span m="1809700">H,</span> <span m="1810480">that</span> <span m="1810720">doesn't</span> <span m="1810930">look</span> <span m="1811080">like</span> <span m="1811260">a</span> <span m="1811320">binary</span> <span m="1811680">tree,</span> <span m="1812340">or it</span> <span m="1812580">doesn't</span> <span m="1812760">look</span> <span m="1812910">like</span> <span m="1813060">a</span> <span m="1813120">complete</span> <span m="1813450">binary</span> <span m="1813720">tree</span> <span m="1813870">anymore.</span> <span m="1814170">It's</span> <span m="1814320">not</span> <span m="1814500">left</span> <span m="1814680">justified.</span> <span m="1816600">Similarly,</span> <span m="1817020">if</span> <span m="1817140">I</span> <span m="1817170">want</span> <span m="1817290">to</span> <span m="1817350">delete</span> <span m="1817620">F,</span> <span m="1817890">that's</span> <span m="1818100">bad.</span> <span m="1818430">Because</span> <span m="1818700">now,</span> <span m="1818850">I</span> <span m="1818910">don't</span> <span m="1819120">have</span> <span m="1819330">four</span> <span m="1820290">nodes</span> <span m="1820620">here.</span></p>
<p><span m="1820800">The</span> <span m="1820950">one</span> <span m="1821230">node</span> <span m="1821460">that's</span> <span m="1821580">easy</span> <span m="1821820">to</span> <span m="1821940">delete</span> <span m="1822240">is</span> <span m="1822390">J,</span> <span m="1824650">right?</span> <span m="1824870">If</span> <span m="1824980">I</span> <span m="1825070">remove</span> <span m="1825340">that</span> <span m="1825520">node,</span> <span m="1825890">I</span> <span m="1825990">still</span> <span m="1826060">have</span> <span m="1826240">a</span> <span m="1826300">complete</span> <span m="1826630">tree.</span> <span m="1827380">The</span> <span m="1827530">last</span> <span m="1828010">leaf,</span> <span m="1829000">the</span> <span m="1829180">last</span> <span m="1829600">position</span> <span m="1830230">in</span> <span m="1830530">my</span> <span m="1831160">array,</span> <span m="1831700">is</span> <span m="1831910">the</span> <span m="1832030">one</span> <span m="1832210">that's</span> <span m="1832360">easy</span> <span m="1832540">to</span> <span m="1832660">delete.</span> <span m="1833200">That's</span> <span m="1833470">good,</span> <span m="1833650">because</span> <span m="1833950">arrays</span> <span m="1834280">are</span> <span m="1834370">good</span> <span m="1834550">at</span> <span m="1834640">leading</span> <span m="1835000">the</span> <span m="1835090">last</span> <span m="1835390">item.</span></p>
<p><span m="1836390">But</span> <span m="1837190">what</span> <span m="1837430">I've</span> <span m="1837550">set</span> <span m="1837730">up</span> <span m="1837880">here</span> <span m="1838150">is</span> <span m="1838360">it's</span> <span m="1838480">easy</span> <span m="1838750">to</span> <span m="1838870">find</span> <span m="1839330">the</span> <span m="1839410">max.</span> <span m="1839770">It's</span> <span m="1839920">going</span> <span m="1840040">to</span> <span m="1840100">be</span> <span m="1840250">up</span> <span m="1840430">here</span> <span m="1840640">at</span> <span m="1840760">the</span> <span m="1840850">root.</span> <span m="1841660">Deleting</span> <span m="1842200">it</span> <span m="1842320">is</span> <span m="1842770">annoying.</span> <span m="1843580">I'd</span> <span m="1843850">like</span> <span m="1844030">to</span> <span m="1844120">somehow</span> <span m="1844450">take</span> <span m="1844750">that</span> <span m="1844930">key</span> <span m="1845830">and</span> <span m="1846100">put</span> <span m="1846370">it</span> <span m="1846580">at</span> <span m="1846880">position--</span> <span m="1848200">at</span> <span m="1848470">the</span> <span m="1848560">last</span> <span m="1848860">position</span> <span m="1849340">at</span> <span m="1849460">the</span> <span m="1849550">last</span> <span m="1849850">leaf,</span> <span m="1850540">because</span> <span m="1850780">that's</span> <span m="1851020">the</span> <span m="1851110">one</span> <span m="1851260">that's</span> <span m="1851440">easy</span> <span m="1851710">to</span> <span m="1851860">delete.</span> <span m="1853870">And</span> <span m="1853990">that's</span> <span m="1854200">indeed</span> <span m="1854500">what</span> <span m="1854710">we're</span> <span m="1854890">going</span> <span m="1855100">to</span> <span m="1855690">do</span> <span m="1856090">in</span> <span m="1856300">a</span> <span m="1856420">delete</span> <span m="1857320">algorithm.</span> <span m="1858250">Let</span> <span m="1858400">me</span> <span m="1858610">first</span> <span m="1858865">do</span> <span m="1859120">insert.</span> <span m="1859600">I</span> <span m="1859720">guess</span> <span m="1859900">that's</span> <span m="1860050">a</span> <span m="1860110">little</span> <span m="1860290">simpler,</span> <span m="1865580">kind</span> <span m="1865790">of</span> <span m="1865850">symmetric</span> <span m="1869450">to</span> <span m="1869950">what</span> <span m="1870200">we</span> <span m="1870320">just</span> <span m="1870500">said.</span></p>
<p><span m="1871410">So</span> <span m="1871460">if</span> <span m="1871550">I</span> <span m="1871640">want</span> <span m="1871790">to</span> <span m="1871880">insert</span> <span m="1872390">a</span> <span m="1872450">key</span> <span m="1873650">or</span> <span m="1873800">an</span> <span m="1873920">item</span> <span m="1874280">x</span> <span m="1874670">which</span> <span m="1874970">has</span> <span m="1875150">some</span> <span m="1875330">key,</span> <span m="1877130">again,</span> <span m="1878210">the</span> <span m="1878510">only</span> <span m="1878870">thing</span> <span m="1879140">I</span> <span m="1879260">really</span> <span m="1879530">can</span> <span m="1879710">do</span> <span m="1880130">in</span> <span m="1880310">an</span> <span m="1880430">array--</span> <span m="1881210">if</span> <span m="1881300">I</span> <span m="1881390">want</span> <span m="1881510">to</span> <span m="1881600">add</span> <span m="1881810">a</span> <span m="1881870">new</span> <span m="1882050">item,</span> <span m="1882350">it</span> <span m="1882440">has</span> <span m="1882650">to</span> <span m="1882740">go</span> <span m="1882920">at</span> <span m="1883010">the</span> <span m="1883130">end.</span> <span m="1883580">The</span> <span m="1883790">only</span> <span m="1884060">thing</span> <span m="1884210">we</span> <span m="1884330">know</span> <span m="1884450">how</span> <span m="1884540">to</span> <span m="1884660">do</span> <span m="1884840">is</span> <span m="1884990">insert</span> <span m="1885320">at</span> <span m="1885410">the</span> <span m="1885530">end</span> <span m="1885740">of</span> <span m="1885860">an</span> <span m="1885950">array.</span> <span m="1886650">This</span> <span m="1886730">is</span> <span m="1886850">what</span> <span m="1887000">we</span> <span m="1887120">called</span> <span m="1887390">insert_last.</span> <span m="1894050">this?</span> <span m="1894320">Corresponds</span> <span m="1895040">to</span> <span m="1895280">adding</span> <span m="1896570">a</span> <span m="1896870">node</span> <span m="1897320">containing</span> <span m="1897890">x--</span> <span m="1899270">the</span> <span m="1899450">item</span> <span m="1899750">x--</span> <span m="1900935">in</span> <span m="1901310">the</span> <span m="1901410">very</span> <span m="1901700">last</span> <span m="1902060">level</span> <span m="1902660">of</span> <span m="1902960">the</span> <span m="1903830">complete</span> <span m="1904190">binary</span> <span m="1904520">tree.</span> <span m="1904880">Either</span> <span m="1905210">it</span> <span m="1905270">goes</span> <span m="1905480">to</span> <span m="1905600">the</span> <span m="1905690">right</span> <span m="1905960">of</span> <span m="1906080">all</span> <span m="1906170">the</span> <span m="1906260">existing</span> <span m="1906590">nodes,</span> <span m="1906830">or</span> <span m="1906960">starts</span> <span m="1907220">a</span> <span m="1907280">new</span> <span m="1907460">level.</span> <span m="1908150">But</span> <span m="1908330">it's</span> <span m="1908510">always</span> <span m="1908690">going</span> <span m="1908810">to</span> <span m="1908870">be</span> <span m="1908990">the</span> <span m="1909110">last</span> <span m="1909470">leaf.</span> <span m="1910310">After</span> <span m="1910670">we</span> <span m="1910760">do</span> <span m="1910880">the</span> <span m="1910970">insertion,</span> <span m="1911450">it</span> <span m="1911540">will</span> <span m="1911660">be</span> <span m="1911780">at</span> <span m="1911870">position</span> <span m="1912800">size</span> <span m="1913130">of</span> <span m="1913250">Q</span> <span m="1913400">minus</span> <span m="1913700">1.</span></p>
<p><span m="1917805">This</span> <span m="1918070">is</span> <span m="1918330">probably</span> <span m="1918720">not</span> <span m="1918930">enough,</span> <span m="1919290">though.</span> <span m="1919830">We</span> <span m="1920010">just</span> <span m="1920190">inserted</span> <span m="1920520">an</span> <span m="1920640">arbitrary</span> <span m="1921120">item</span> <span m="1921420">in</span> <span m="1921510">a</span> <span m="1921570">leaf.</span> <span m="1921840">And</span> <span m="1921930">now,</span> <span m="1922170">it</span> <span m="1922260">may</span> <span m="1922380">not</span> <span m="1922560">satisfy</span> <span m="1923040">the</span> <span m="1923130">max-heap</span> <span m="1923490">property</span> <span m="1923940">anymore.</span> <span m="1924890">So</span> <span m="1924990">let's</span> <span m="1925200">just</span> <span m="1925440">check</span> <span m="1925800">if</span> <span m="1925950">it</span> <span m="1926040">does,</span> <span m="1926430">and</span> <span m="1926550">if</span> <span m="1926670">it</span> <span m="1926730">doesn't,</span> <span m="1927420">fix</span> <span m="1927720">it.</span> <span m="1928110">That's</span> <span m="1928380">what</span> <span m="1928500">we</span> <span m="1928620">know</span> <span m="1928740">how</span> <span m="1928800">to</span> <span m="1928920">do.</span> <span m="1930490">But</span> <span m="1930630">this</span> <span m="1930780">time,</span> <span m="1931380">we're</span> <span m="1931620">not</span> <span m="1931800">even</span> <span m="1932010">going</span> <span m="1932220">to</span> <span m="1932340">need</span> <span m="1941180">rotations,</span> <span m="1941870">which</span> <span m="1942110">is</span> <span m="1942260">cool.</span></p>
<p><span m="1944220">So</span> <span m="1944360">I'm</span> <span m="1944450">going</span> <span m="1944570">to</span> <span m="1944630">define</span> <span m="1944960">an</span> <span m="1945080">operation</span> <span m="1945500">called</span> <span m="1945710">max_heapify_up.</span> <span m="1949190">This</span> <span m="1949460">will</span> <span m="1949550">make</span> <span m="1949760">things</span> <span m="1950060">more</span> <span m="1950300">like</span> <span m="1950540">a</span> <span m="1950600">max-heap.</span> <span m="1953170">We're</span> <span m="1953300">going</span> <span m="1953420">to</span> <span m="1953480">start</span> <span m="1953930">at</span> <span m="1955310">size</span> <span m="1955700">of</span> <span m="1955820">Q</span> <span m="1956060">minus</span> <span m="1956420">1</span> <span m="1958190">for</span> <span m="1958500">our</span> <span m="1958580">value</span> <span m="1958970">i.</span> <span m="1959810">But</span> <span m="1960050">it's</span> <span m="1960200">going</span> <span m="1960320">to</span> <span m="1960410">be</span> <span m="1960530">recursive,</span> <span m="1962930">so</span> <span m="1963170">what</span> <span m="1963320">we're</span> <span m="1963410">going</span> <span m="1963530">to</span> <span m="1963590">do</span> <span m="1963860">is</span> <span m="1964130">look</span> <span m="1964430">at</span> <span m="1964640">a</span> <span m="1964730">node</span> <span m="1965570">i,</span> <span m="1968480">in</span> <span m="1968570">particular</span> <span m="1969020">the</span> <span m="1969110">one</span> <span m="1969290">that</span> <span m="1969380">just</span> <span m="1969560">got</span> <span m="1969740">inserted.</span> <span m="1970490">And</span> <span m="1970850">where</span> <span m="1971180">could</span> <span m="1971360">it</span> <span m="1971480">violate</span> <span m="1971900">things?</span> <span m="1972230">Well,</span> <span m="1972440">with</span> <span m="1972650">its</span> <span m="1972770">parent,</span> <span m="1976820">because</span> <span m="1977270">we</span> <span m="1977380">have</span> <span m="1977590">no</span> <span m="1977980">idea</span> <span m="1978340">what</span> <span m="1978550">key</span> <span m="1978790">we</span> <span m="1978910">just</span> <span m="1979090">put</span> <span m="1979270">here.</span> <span m="1979750">Maybe</span> <span m="1980170">it's</span> <span m="1980320">less</span> <span m="1980590">than</span> <span m="1980770">our</span> <span m="1980860">parent.</span> <span m="1981220">Then</span> <span m="1981400">we're</span> <span m="1981520">happy.</span> <span m="1982210">But</span> <span m="1982360">if</span> <span m="1982450">it's</span> <span m="1982600">greater</span> <span m="1982930">than</span> <span m="1983080">our</span> <span m="1983170">parent,</span> <span m="1984370">we're</span> <span m="1984610">in</span> <span m="1984700">trouble</span> <span m="1985180">and</span> <span m="1985360">we</span> <span m="1985450">should</span> <span m="1985660">fix</span> <span m="1985930">it.</span></p>
<p><span m="1986950">So</span> <span m="1988840">if</span> <span m="1993850">the</span> <span m="1994090">item</span> <span m="1994600">in</span> <span m="1995050">the</span> <span m="1995140">parent's</span> <span m="1998650">key</span> <span m="1999250">is</span> <span m="1999760">less</span> <span m="2000150">than</span> <span m="2002250">i's</span> <span m="2002700">key--</span> <span m="2005736">ah,</span> <span m="2006180">I</span> <span m="2006330">see</span> <span m="2006510">I</span> <span m="2006600">forgot</span> <span m="2006900">to</span> <span m="2007020">write</span> <span m="2007200">key</span> <span m="2007530">and</span> <span m="2007650">all</span> <span m="2007740">these</span> <span m="2007890">spots.</span> <span m="2008705">This</span> <span m="2009010">should</span> <span m="2009180">be</span> <span m="2009390">dot</span> <span m="2009630">key</span> <span m="2011100">and</span> <span m="2011385">dot</span> <span m="2011670">key,</span> <span m="2012000">because</span> <span m="2012460">Q[i]</span> <span m="2013470">is</span> <span m="2013620">an</span> <span m="2013710">item</span> <span m="2014040">that</span> <span m="2014440">gets</span> <span m="2014840">its</span> <span m="2015030">key.</span> <span m="2017190">So</span> <span m="2017520">this</span> <span m="2017700">is</span> <span m="2017850">the</span> <span m="2018060">bad</span> <span m="2018360">case.</span> <span m="2018660">This</span> <span m="2018840">is</span> <span m="2018960">if</span> <span m="2019080">the</span> <span m="2019170">parent</span> <span m="2019590">is</span> <span m="2019770">smaller</span> <span m="2020400">than</span> <span m="2020580">the</span> <span m="2020670">child.</span> <span m="2021360">We</span> <span m="2021630">wanted</span> <span m="2022050">the</span> <span m="2022230">parent</span> <span m="2022680">to</span> <span m="2022770">always</span> <span m="2023010">be</span> <span m="2023130">greater</span> <span m="2023400">than</span> <span m="2023520">or</span> <span m="2023610">equal</span> <span m="2023880">to</span> <span m="2024030">its</span> <span m="2024180">children.</span> <span m="2025240">So</span> <span m="2025380">in</span> <span m="2025500">that</span> <span m="2025620">case,</span> <span m="2027310">what</span> <span m="2027390">could</span> <span m="2027510">we</span> <span m="2027600">do?</span> <span m="2029310">Swap</span> <span m="2029910">them.</span> <span m="2033690">Let's</span> <span m="2033930">swap</span> <span m="2035220">Q</span> <span m="2035550">parent</span> <span m="2036030">of i--</span> <span m="2038640">excellent,</span> <span m="2039150">more</span> <span m="2039330">chalk--</span> <span m="2041250">with</span> <span m="2041520">Q[i].</span> <span m="2043970">Now</span> <span m="2044240">they're</span> <span m="2044360">in</span> <span m="2044450">the</span> <span m="2044510">right</span> <span m="2044660">order.</span></p>
<p><span m="2046100">Now,</span> <span m="2046280">we</span> <span m="2046400">need</span> <span m="2046520">to</span> <span m="2046610">think</span> <span m="2046790">about</span> <span m="2047060">what</span> <span m="2047210">about</span> <span m="2047480">the</span> <span m="2047750">other</span> <span m="2048050">child</span> <span m="2048650">of</span> <span m="2048860">that</span> <span m="2049040">node?</span> <span m="2050449">And</span> <span m="2050870">what</span> <span m="2051050">about</span> <span m="2051260">its</span> <span m="2051409">parent?</span> <span m="2053040">So</span> <span m="2054139">I</span> <span m="2054320">have</span> <span m="2054560">some</span> <span m="2054860">numbers</span> <span m="2055340">here.</span> <span m="2055889">Let's</span> <span m="2056090">say</span> <span m="2056780">this</span> <span m="2057110">was</span> <span m="2058280">5</span> <span m="2059389">and</span> <span m="2059659">this</span> <span m="2059810">was</span> <span m="2059960">10.</span> <span m="2062120">What</span> <span m="2062330">do</span> <span m="2062480">I</span> <span m="2062600">know</span> <span m="2062840">about</span> <span m="2063139">this</span> <span m="2063320">picture</span> <span m="2063650">before?</span> <span m="2064909">Well,</span> <span m="2066290">I</span> <span m="2066500">know</span> <span m="2066739">that</span> <span m="2067820">10</span> <span m="2068360">is</span> <span m="2068510">this</span> <span m="2068659">newly</span> <span m="2068929">inserted</span> <span m="2069320">item.</span> <span m="2069590">It's</span> <span m="2069739">the</span> <span m="2069889">only</span> <span m="2070190">one</span> <span m="2070400">that</span> <span m="2070550">could</span> <span m="2070790">have</span> <span m="2070940">caused</span> <span m="2071239">violations</span> <span m="2072380">when</span> <span m="2072620">I</span> <span m="2072710">first</span> <span m="2072980">inserted</span> <span m="2073429">it.</span> <span m="2073980">So</span> <span m="2074060">I</span> <span m="2074150">know</span> <span m="2074300">that</span> <span m="2074449">before</span> <span m="2074840">this--</span> <span m="2075199">before</span> <span m="2075679">I</span> <span m="2076429">moved</span> <span m="2076684">10</span> <span m="2076940">around,</span> <span m="2077420">I</span> <span m="2077630">knew</span> <span m="2077810">all</span> <span m="2078050">the</span> <span m="2078139">things</span> <span m="2078770">in</span> <span m="2078980">this</span> <span m="2079130">left</span> <span m="2079340">subtree</span> <span m="2080090">are</span> <span m="2081889">less</span> <span m="2082219">than</span> <span m="2082340">or</span> <span m="2082400">equal</span> <span m="2082550">to</span> <span m="2082639">5,</span> <span m="2083030">and</span> <span m="2083120">everything</span> <span m="2083449">up</span> <span m="2083600">here</span> <span m="2084199">are</span> <span m="2084620">created</span> <span m="2084989">equal</span> <span m="2085190">to</span> <span m="2085280">5.</span></p>
<p><span m="2087560">I</span> <span m="2087830">also</span> <span m="2088190">know</span> <span m="2088429">that</span> <span m="2088610">the</span> <span m="2088690">nodes</span> <span m="2089090">in</span> <span m="2089190">here,</span> <span m="2089790">in</span> <span m="2089900">fact,</span> <span m="2090270">were</span> <span m="2090290">less</span> <span m="2090510">than</span> <span m="2090590">or</span> <span m="2090690">equal</span> <span m="2090770">to</span> <span m="2090860">5.</span> <span m="2091219">Other</span> <span m="2091520">than</span> <span m="2092090">this</span> <span m="2092350">node</span> <span m="2092610">10</span> <span m="2092900">that</span> <span m="2092989">we</span> <span m="2093110">just</span> <span m="2093380">inserted,</span> <span m="2095540">this</span> <span m="2095780">was</span> <span m="2095989">a</span> <span m="2096080">correct</span> <span m="2096620">heap.</span> <span m="2097139">So</span> <span m="2097340">5</span> <span m="2097730">was</span> <span m="2097970">a</span> <span m="2098000">separator</span> <span m="2098570">between--</span> <span m="2099320">things</span> <span m="2099590">above</span> <span m="2100100">it</span> <span m="2100190">on</span> <span m="2100310">the</span> <span m="2100400">ancestor</span> <span m="2100790">chain</span> <span m="2101090">are</span> <span m="2101960">greater than or</span> <span m="2102260">equal</span> <span m="2102440">to</span> <span m="2102500">5,</span> <span m="2102800">and</span> <span m="2102890">things</span> <span m="2103250">in</span> <span m="2103430">its</span> <span m="2103700">subtree</span> <span m="2104180">are</span> <span m="2104270">less than or</span> <span m="2104610">equal</span> <span m="2104810">to</span> <span m="2105020">it.</span> <span m="2106580">So</span> <span m="2106880">after</span> <span m="2107240">I</span> <span m="2107330">do</span> <span m="2107480">this</span> <span m="2107660">swap,</span> <span m="2109130">which</span> <span m="2109310">I'm</span> <span m="2109460">just</span> <span m="2109670">going</span> <span m="2109910">to</span> <span m="2111650">do--</span> <span m="2115280">after</span> <span m="2115650">I</span> <span m="2115730">swap</span> <span m="2116300">the</span> <span m="2116450">items</span> <span m="2116900">5</span> <span m="2117200">and</span> <span m="2117290">10,</span> <span m="2118940">10</span> <span m="2119240">is</span> <span m="2119360">up</span> <span m="2119510">here,</span> <span m="2120230">5</span> <span m="2120560">is</span> <span m="2120680">here.</span> <span m="2121310">And</span> <span m="2121520">now,</span> <span m="2121910">I</span> <span m="2122120">realize,</span> <span m="2122430">OK,</span> <span m="2122690">great,</span> <span m="2122900">this</span> <span m="2123140">edge</span> <span m="2123350">is</span> <span m="2123500">happy,</span> <span m="2124360">because</span> <span m="2124550">now</span> <span m="2124760">10</span> <span m="2125000">is</span> <span m="2125120">greater than</span> <span m="2125360">or</span> <span m="2125460">equal</span> <span m="2125540">to</span> <span m="2125630">5.</span> <span m="2126260">But</span> <span m="2126470">also</span> <span m="2126740">this</span> <span m="2126950">edge</span> <span m="2127130">is</span> <span m="2127250">happy,</span> <span m="2127580">because</span> <span m="2127940">it</span> <span m="2128030">used</span> <span m="2128210">to</span> <span m="2128270">be</span> <span m="2128420">happy,</span> <span m="2128690">and</span> <span m="2128780">we</span> <span m="2128900">only</span> <span m="2129110">made</span> <span m="2129290">its</span> <span m="2129410">parent</span> <span m="2129740">larger.</span></p>
<p><span m="2131600">Now</span> <span m="2131840">this</span> <span m="2132080">edge</span> <span m="2133040">maybe</span> <span m="2133470">is</span> <span m="2133700">bad.</span> <span m="2134670">And</span> <span m="2134810">so</span> <span m="2135020">we</span> <span m="2135140">need</span> <span m="2135260">to</span> <span m="2135410">recurse--</span> <span m="2139140">recurse</span> <span m="2140700">on</span> <span m="2141240">the</span> <span m="2141330">parent.</span> <span m="2145070">But</span> <span m="2145250">that's</span> <span m="2145430">it.</span> <span m="2146470">So</span> <span m="2146630">we</span> <span m="2146750">fixed</span> <span m="2147080">this</span> <span m="2147260">one</span> <span m="2147470">edge.</span> <span m="2147950">Initially,</span> <span m="2148460">this</span> <span m="2148640">happens</span> <span m="2149000">way</span> <span m="2149090">down</span> <span m="2149270">at</span> <span m="2149360">the</span> <span m="2149450">leaf.</span> <span m="2149720">But</span> <span m="2149900">in</span> <span m="2150020">general,</span> <span m="2150740">we're</span> <span m="2151130">taking</span> <span m="2151520">our</span> <span m="2151640">item</span> <span m="2152150">that</span> <span m="2152330">we</span> <span m="2152480">inserted,</span> <span m="2153500">which</span> <span m="2153770">is</span> <span m="2153920">x,</span> <span m="2154760">and</span> <span m="2155060">it</span> <span m="2155150">starts</span> <span m="2155480">at</span> <span m="2155600">the</span> <span m="2155690">last</span> <span m="2156050">leaf,</span> <span m="2156350">and</span> <span m="2156470">it</span> <span m="2156620">may</span> <span m="2156800">be</span> <span m="2156920">bubbles</span> <span m="2157340">up</span> <span m="2157490">for</span> <span m="2157640">a</span> <span m="2157700">while.</span> <span m="2158150">And maybe</span> <span m="2158420">it</span> <span m="2158480">gets</span> <span m="2158630">all</span> <span m="2158780">the</span> <span m="2158840">way</span> <span m="2158930">to</span> <span m="2159050">the</span> <span m="2159140">root</span> <span m="2159320">if</span> <span m="2159440">we</span> <span m="2159530">inserted</span> <span m="2159950">a</span> <span m="2159980">new</span> <span m="2160130">maximum</span> <span m="2160580">item.</span> <span m="2161660">But</span> <span m="2161900">in</span> <span m="2161990">each</span> <span m="2162140">step,</span> <span m="2162380">it</span> <span m="2162440">goes</span> <span m="2162680">up</span> <span m="2162830">one.</span></p>
<p><span m="2163610">And</span> <span m="2163820">so</span> <span m="2164000">the</span> <span m="2164090">running</span> <span m="2164360">time</span> <span m="2164720">of</span> <span m="2165200">all</span> <span m="2165440">this</span> <span m="2165650">stuff</span> <span m="2166730">is</span> <span m="2167150">the</span> <span m="2167240">height</span> <span m="2167450">of</span> <span m="2167540">the</span> <span m="2167600">tree,</span> <span m="2168690">which</span> <span m="2168950">is</span> <span m="2169100">log</span> <span m="2169520">n.</span> <span m="2172520">And</span> <span m="2172850">because</span> <span m="2173150">there's</span> <span m="2173330">only</span> <span m="2173510">this</span> <span m="2173660">one</span> <span m="2173900">item</span> <span m="2174140">that</span> <span m="2174260">could</span> <span m="2174380">potentially</span> <span m="2174770">be</span> <span m="2174890">wrong,</span> <span m="2175130">if</span> <span m="2175220">it</span> <span m="2175310">ever</span> <span m="2175490">stops</span> <span m="2175880">moving,</span> <span m="2176270">we've</span> <span m="2176570">just</span> <span m="2176840">checked</span> <span m="2177290">that</span> <span m="2177470">it</span> <span m="2177530">satisfies</span> <span m="2178190">the</span> <span m="2178280">max-heap</span> <span m="2178640">property.</span> <span m="2179990">If</span> <span m="2180230">it</span> <span m="2180290">gets</span> <span m="2180470">to</span> <span m="2180590">the</span> <span m="2180650">root,</span> <span m="2181010">you</span> <span m="2181220">can</span> <span m="2181370">also</span> <span m="2181610">check</span> <span m="2181850">it</span> <span m="2181940">satisfies</span> <span m="2182480">the</span> <span m="2182750">max-heap</span> <span m="2183080">property.</span> <span m="2183610">So</span> <span m="2183680">there's</span> <span m="2183860">a</span> <span m="2183890">base</span> <span m="2184100">case</span> <span m="2184310">I</span> <span m="2184370">didn't</span> <span m="2184640">write</span> <span m="2184850">here,</span> <span m="2185160">which</span> <span m="2185240">is</span> <span m="2185750">if</span> <span m="2186170">i</span> <span m="2186450">equals</span> <span m="2186710">0,</span> <span m="2187130">we're</span> <span m="2187250">at</span> <span m="2187370">the</span> <span m="2187430">root,</span> <span m="2188300">we're</span> <span m="2188450">done.</span> <span m="2190760">And</span> <span m="2191030">then</span> <span m="2191150">you</span> <span m="2191270">can</span> <span m="2191390">prove</span> <span m="2191600">this</span> <span m="2191810">correct</span> <span m="2192230">by</span> <span m="2192560">induction.</span></p>
<p><span m="2194700">There's</span> <span m="2194880">just</span> <span m="2195030">one</span> <span m="2195330">item</span> <span m="2195600">that's</span> <span m="2195750">in</span> <span m="2195840">the</span> <span m="2195900">wrong</span> <span m="2196110">spot,</span> <span m="2196380">initially.</span> <span m="2196830">And</span> <span m="2196920">we</span> <span m="2197040">put</span> <span m="2197220">it</span> <span m="2197340">into</span> <span m="2197760">a</span> <span m="2197910">right</span> <span m="2198150">spot.</span> <span m="2198480">There</span> <span m="2198580">are</span> <span m="2198600">many</span> <span m="2198780">places</span> <span m="2199140">it</span> <span m="2199200">could</span> <span m="2199350">go,</span> <span m="2200760">but</span> <span m="2201030">we</span> <span m="2201150">will</span> <span m="2201270">move</span> <span m="2201450">it</span> <span m="2201510">to</span> <span m="2201900">the,</span> <span m="2202770">I</span> <span m="2203010">guess,</span> <span m="2203190">unique</span> <span m="2203580">ancestor</span> <span m="2204150">position</span> <span m="2204660">that</span> <span m="2204810">is</span> <span m="2204990">correct--</span> <span m="2206040">that</span> <span m="2206280">satisfies</span> <span m="2206940">max-heap</span> <span m="2207300">property,</span> <span m="2208240">OK?</span> <span m="2208500">So</span> <span m="2208680">that's</span> <span m="2208980">insert.</span> <span m="2210180">Delete</span> <span m="2210660">is</span> <span m="2210870">going</span> <span m="2211110">to</span> <span m="2211260">be</span> <span m="2213300">almost</span> <span m="2213750">the</span> <span m="2213840">same,</span> <span m="2221980">delete_min,</span> <span m="2222550">that</span> <span m="2222700">is--</span> <span m="2234010">sorry,</span> <span m="2234220">delete_max,</span> <span m="2234940">thank</span> <span m="2235210">you.</span> <span m="2237370">You</span> <span m="2237610">can</span> <span m="2237760">of</span> <span m="2237850">course</span> <span m="2238120">define</span> <span m="2238450">all</span> <span m="2238660">of</span> <span m="2238780">these</span> <span m="2238930">things</span> <span m="2239140">for</span> <span m="2239260">min</span> <span m="2239470">instead</span> <span m="2239740">of</span> <span m="2239800">max.</span> <span m="2240130">Everything</span> <span m="2240490">works</span> <span m="2240670">the</span> <span m="2240730">same.</span> <span m="2241360">I</span> <span m="2241540">just</span> <span m="2241720">have</span> <span m="2241840">a</span> <span m="2241900">hard</span> <span m="2242080">time</span> <span m="2242680">remembering</span> <span m="2243160">which</span> <span m="2243310">one</span> <span m="2243460">we're</span> <span m="2243550">doing.</span> <span m="2245320">Just</span> <span m="2245560">don't</span> <span m="2245800">switch</span> <span m="2246370">you</span> <span m="2246520">can't</span> <span m="2246730">use</span> <span m="2246880">a</span> <span m="2246940">max-heap</span> <span m="2247390">to</span> <span m="2247510">do</span> <span m="2247690">delete_min.</span> <span m="2248260">You</span> <span m="2248380">can't</span> <span m="2248560">use</span> <span m="2248710">a min-heap</span> <span m="2249060">to</span> <span m="2249160">do</span> <span m="2249370">delete_max,</span> <span m="2249970">but</span> <span m="2251230">you</span> <span m="2251350">can</span> <span m="2251500">use</span> <span m="2251620">a</span> <span m="2251740">min-heap</span> <span m="2251980">to</span> <span m="2252070">do</span> <span m="2252190">delete_min.</span> <span m="2252790">That's</span> <span m="2253060">fine.</span></p>
<p><span m="2255200">So</span> <span m="2256090">like</span> <span m="2256420">I</span> <span m="2256540">said,</span> <span m="2257290">the</span> <span m="2258640">only</span> <span m="2259300">node</span> <span m="2259600">we</span> <span m="2259720">really</span> <span m="2259960">know</span> <span m="2260080">how</span> <span m="2260170">to</span> <span m="2260260">delete</span> <span m="2260680">is</span> <span m="2260920">the</span> <span m="2261100">last</span> <span m="2261460">leaf</span> <span m="2261680">on</span> <span m="2261790">the</span> <span m="2261880">last</span> <span m="2262150">level,</span> <span m="2262520">which</span> <span m="2262630">is</span> <span m="2262750">the</span> <span m="2262870">end</span> <span m="2263110">of</span> <span m="2263200">the</span> <span m="2263320">array.</span> <span m="2263920">Because</span> <span m="2264130">that's</span> <span m="2264310">what</span> <span m="2264460">arrays</span> <span m="2264820">can</span> <span m="2265000">delete</span> <span m="2265660">efficiently.</span> <span m="2267550">And</span> <span m="2267820">what</span> <span m="2268120">we</span> <span m="2268210">need</span> <span m="2268390">to</span> <span m="2268530">delete</span> <span m="2268960">is</span> <span m="2269200">the</span> <span m="2269290">root</span> <span m="2269530">item,</span> <span m="2270100">because</span> <span m="2270400">that's</span> <span m="2270640">always</span> <span m="2270880">the</span> <span m="2270970">maximum</span> <span m="2271390">one,</span> <span m="2272140">which</span> <span m="2272380">is</span> <span m="2272470">at</span> <span m="2272590">the</span> <span m="2272680">first</span> <span m="2272950">position</span> <span m="2273310">in</span> <span m="2273430">the</span> <span m="2273520">array.</span> <span m="2274490">So</span> <span m="2274630">what</span> <span m="2274750">do</span> <span m="2274810">we</span> <span m="2274900">do?</span> <span m="2275890">Swap</span> <span m="2276250">them,</span> <span m="2277220">our</span> <span m="2277420">usual</span> <span m="2277840">trick.</span></p>
<p><span m="2280450">I</span> <span m="2280570">think</span> <span m="2280690">the</span> <span m="2280780">cool</span> <span m="2280930">thing</span> <span m="2281140">about</span> <span m="2281380">heaps</span> <span m="2281740">is</span> <span m="2282040">we</span> <span m="2282250">never</span> <span m="2282490">have</span> <span m="2282610">to</span> <span m="2282670">do</span> <span m="2282790">rotations.</span> <span m="2283510">We're</span> <span m="2283690">only</span> <span m="2283990">going</span> <span m="2284110">to</span> <span m="2284170">do</span> <span m="2284290">swaps,</span> <span m="2284800">which</span> <span m="2284980">is</span> <span m="2285070">something</span> <span m="2285370">we</span> <span m="2285430">had</span> <span m="2285550">to</span> <span m="2285610">do</span> <span m="2285760">with</span> <span m="2285820">trees</span> <span m="2286150">also--</span> <span m="2286840">binary</span> <span m="2287230">trees.</span> <span m="2291087">Q[0]</span> <span m="2292840">with</span> <span m="2293830">Q</span> <span m="2294340">of</span> <span m="2295930">the</span> <span m="2296050">last</span> <span m="2296380">item--</span> <span m="2298780">great,</span> <span m="2299110">done.</span> <span m="2299440">Now</span> <span m="2299740">we</span> <span m="2299950">have</span> <span m="2300160">the</span> <span m="2300250">last</span> <span m="2300580">item</span> <span m="2301090">is</span> <span m="2301300">the</span> <span m="2301390">one</span> <span m="2301540">we</span> <span m="2301660">want</span> <span m="2301810">to</span> <span m="2301900">delete.</span> <span m="2302330">So</span> <span m="2302470">we</span> <span m="2302590">do</span> <span m="2302830">delete_last,</span> <span m="2304810">or</span> <span m="2305020">pop</span> <span m="2305410">in</span> <span m="2305530">Python,</span> <span m="2308110">and</span> <span m="2308350">boom,</span> <span m="2308980">we've</span> <span m="2309280">got--</span> <span m="2310420">we've</span> <span m="2310750">now</span> <span m="2310930">deleted</span> <span m="2311380">the</span> <span m="2311530">maximum</span> <span m="2311950">item.</span></p>
<p><span m="2312340">Of</span> <span m="2312490">course,</span> <span m="2313160">we</span> <span m="2313360">may</span> <span m="2313510">have</span> <span m="2313660">also</span> <span m="2313960">messed</span> <span m="2314230">up</span> <span m="2314680">the</span> <span m="2314860">max-heap</span> <span m="2315190">property</span> <span m="2316210">just</span> <span m="2316510">like</span> <span m="2316750">we</span> <span m="2316870">did</span> <span m="2318280">with</span> <span m="2318550">insert.</span> <span m="2320230">So</span> <span m="2320480">with</span> <span m="2320620">insert,</span> <span m="2320980">we</span> <span m="2321100">were</span> <span m="2321220">adding</span> <span m="2321610">a</span> <span m="2321670">last</span> <span m="2321910">leaf.</span> <span m="2323410">Now,</span> <span m="2323830">what</span> <span m="2323980">we're</span> <span m="2324100">doing</span> <span m="2324490">is</span> <span m="2324730">swapping</span> <span m="2325330">the</span> <span m="2325420">last</span> <span m="2325750">leaf</span> <span m="2326050">with</span> <span m="2326320">the--</span> <span m="2326710">I'm</span> <span m="2326950">pointing</span> <span m="2327220">at</span> <span m="2327310">the</span> <span m="2327370">wrong</span> <span m="2327550">picture.</span> <span m="2328300">Let</span> <span m="2328390">me</span> <span m="2328480">go</span> <span m="2328600">back</span> <span m="2328810">to</span> <span m="2328900">this</span> <span m="2329110">tree.</span> <span m="2330610">What</span> <span m="2330880">we</span> <span m="2330970">did</span> <span m="2331150">is</span> <span m="2331270">swap</span> <span m="2332050">item</span> <span m="2332500">J</span> <span m="2333580">with</span> <span m="2333940">A.</span> <span m="2334300">So</span> <span m="2334630">the</span> <span m="2334750">problem</span> <span m="2335140">is</span> <span m="2335320">now--</span> <span m="2335530">and</span> <span m="2335680">then</span> <span m="2335770">we</span> <span m="2335860">deleted</span> <span m="2336250">this</span> <span m="2336430">node.</span></p>
<p><span m="2337450">The</span> <span m="2337570">problem</span> <span m="2337990">is</span> <span m="2338110">now</span> <span m="2338350">that</span> <span m="2338920">that</span> <span m="2339250">root</span> <span m="2339490">node</span> <span m="2339910">has</span> <span m="2340510">maybe</span> <span m="2340780">a</span> <span m="2340840">very</span> <span m="2341020">small</span> <span m="2341380">key.</span> <span m="2341830">Because</span> <span m="2342580">the</span> <span m="2342700">key</span> <span m="2342880">that's</span> <span m="2343060">here</span> <span m="2343340">now</span> <span m="2343810">is</span> <span m="2344050">whatever</span> <span m="2344360">was</span> <span m="2344500">down</span> <span m="2344710">here,</span> <span m="2345110">which</span> <span m="2345190">is</span> <span m="2345280">very</span> <span m="2345490">low</span> <span m="2345730">in</span> <span m="2345820">the</span> <span m="2345910">tree.</span> <span m="2346150">So</span> <span m="2346300">intuitively,</span> <span m="2346750">that's</span> <span m="2346930">a</span> <span m="2347020">small</span> <span m="2347440">value.</span> <span m="2348910">This</span> <span m="2349120">is</span> <span m="2349210">supposed</span> <span m="2349570">to</span> <span m="2349660">be</span> <span m="2349780">the</span> <span m="2349870">maximum</span> <span m="2350260">value,</span> <span m="2350630">and we</span> <span m="2350740">just</span> <span m="2350890">put</span> <span m="2351040">a</span> <span m="2351100">small</span> <span m="2351370">value</span> <span m="2351730">in</span> <span m="2351850">the</span> <span m="2351940">root.</span> <span m="2352700">So</span> <span m="2352780">what</span> <span m="2352870">do</span> <span m="2352930">we</span> <span m="2353020">do?</span> <span m="2354040">Heapify</span> <span m="2354580">down.</span> <span m="2356540">We're</span> <span m="2356710">going</span> <span m="2356830">to</span> <span m="2356950">take</span> <span m="2357220">that</span> <span m="2357400">item</span> <span m="2358060">and</span> <span m="2358360">somehow</span> <span m="2358690">push</span> <span m="2358960">it</span> <span m="2359050">down</span> <span m="2359800">to</span> <span m="2359980">the</span> <span m="2360100">tree</span> <span m="2360430">until</span> <span m="2360850">the--</span> <span m="2361390">down</span> <span m="2361720">in</span> <span m="2361900">the</span> <span m="2361990">tree</span> <span m="2362470">until</span> <span m="2362890">max-heap</span> <span m="2363220">property</span> <span m="2363610">is</span> <span m="2363670">satisfied.</span></p>
<p><span m="2364760">So</span> <span m="2364900">this</span> <span m="2365110">is</span> <span m="2365230">going</span> <span m="2365350">to</span> <span m="2365440">be</span> <span m="2366760">max_heapify_down.</span> <span m="2370960">And</span> <span m="2371140">we</span> <span m="2371260">will</span> <span m="2371440">start</span> <span m="2372670">at</span> <span m="2373060">position</span> <span m="2373510">0,</span> <span m="2373900">which</span> <span m="2374080">is</span> <span m="2374200">the</span> <span m="2374290">root.</span> <span m="2378120">And</span> <span m="2378660">max_heapify_down</span> <span m="2382890">is</span> <span m="2383190">going</span> <span m="2383400">to</span> <span m="2383550">be</span> <span m="2384315">a</span> <span m="2384660">recursive</span> <span m="2385200">algorithm.</span> <span m="2385840">So</span> <span m="2385980">we'll</span> <span m="2386130">start</span> <span m="2386430">at</span> <span m="2386520">some</span> <span m="2386730">position</span> <span m="2387120">i.</span> <span m="2387990">And</span> <span m="2388200">initially,</span> <span m="2388590">that's</span> <span m="2388830">the</span> <span m="2388920">root.</span> <span m="2389940">And</span> <span m="2390180">what</span> <span m="2390330">we're</span> <span m="2390450">going</span> <span m="2390570">to</span> <span m="2390630">do</span> <span m="2390960">is</span> <span m="2391260">look</span> <span m="2391560">at</span> <span m="2392490">position</span> <span m="2392880">i</span> <span m="2393570">and</span> <span m="2393930">its</span> <span m="2394050">two</span> <span m="2394200">children.</span></p>
<p><span m="2397350">So</span> <span m="2397580">let's</span> <span m="2397790">say</span> <span m="2398180">we</span> <span m="2398330">put</span> <span m="2398510">a</span> <span m="2398570">very</span> <span m="2398750">small</span> <span m="2399110">value</span> <span m="2399440">up</span> <span m="2399560">here,</span> <span m="2399710">like</span> <span m="2399890">0.</span> <span m="2401090">And</span> <span m="2401540">let's</span> <span m="2401690">say</span> <span m="2401840">we</span> <span m="2401960">have</span> <span m="2402170">our</span> <span m="2402260">children,</span> <span m="2402710">5</span> <span m="2403160">and</span> <span m="2403280">10.</span> <span m="2404180">We</span> <span m="2404360">don't</span> <span m="2404540">know--</span> <span m="2404855">maybe</span> <span m="2405170">I'll</span> <span m="2405290">swap</span> <span m="2405590">their</span> <span m="2405740">order</span> <span m="2406010">just</span> <span m="2406220">to</span> <span m="2407420">be</span> <span m="2407630">more</span> <span m="2407810">generic,</span> <span m="2408410">because</span> <span m="2408590">that</span> <span m="2408710">looks</span> <span m="2408890">like</span> <span m="2409860">not</span> <span m="2410210">quite</span> <span m="2410420">a</span> <span m="2411120">binary search</span> <span m="2411475">tree,</span> <span m="2411830">but</span> <span m="2412310">we</span> <span m="2412520">don't</span> <span m="2412700">know</span> <span m="2412850">their</span> <span m="2413000">relative</span> <span m="2413390">order.</span> <span m="2414060">But</span> <span m="2414170">one</span> <span m="2414290">of</span> <span m="2414380">them</span> <span m="2414560">is</span> <span m="2415100">greater</span> <span m="2415460">than</span> <span m="2415610">or</span> <span m="2415640">equal</span> <span m="2415820">to</span> <span m="2415970">the</span> <span m="2416060">other</span> <span m="2417070">in</span> <span m="2417170">some</span> <span m="2417410">order.</span> <span m="2418920">And</span> <span m="2419090">so</span> <span m="2419480">what</span> <span m="2419720">would</span> <span m="2419840">I</span> <span m="2419930">like</span> <span m="2420080">to</span> <span m="2420200">do</span> <span m="2420350">to</span> <span m="2420440">fix</span> <span m="2420830">this</span> <span m="2421080">local</span> <span m="2421460">picture?</span> <span m="2425370">Yeah,</span> <span m="2425760">I</span> <span m="2425940">want</span> <span m="2426090">to</span> <span m="2426150">swap.</span></p>
<p><span m="2426840">And</span> <span m="2427020">I</span> <span m="2427110">could</span> <span m="2427290">swap--</span> <span m="2428490">0 is</span> <span m="2428910">clearly</span> <span m="2429150">in</span> <span m="2429240">the</span> <span m="2429300">wrong</span> <span m="2429510">spot.</span> <span m="2429900">It</span> <span m="2430080">needs</span> <span m="2430260">to</span> <span m="2430350">go</span> <span m="2430500">lower</span> <span m="2430800">in</span> <span m="2430890">the</span> <span m="2430980">tree.</span> <span m="2431400">I</span> <span m="2431580">can</span> <span m="2431700">swap</span> <span m="2431880">0</span> <span m="2432120">with</span> <span m="2432240">5</span> <span m="2432630">or</span> <span m="2432720">0</span> <span m="2432960">with</span> <span m="2433080">10.</span> <span m="2434280">Which</span> <span m="2434520">one?</span> <span m="2435861">10.</span> <span m="2439010">I</span> <span m="2439190">could</span> <span m="2439340">draw</span> <span m="2439490">the</span> <span m="2439550">picture</span> <span m="2439850">with</span> <span m="2439970">5,</span> <span m="2440330">but</span> <span m="2442340">it</span> <span m="2442610">will</span> <span m="2442730">not</span> <span m="2442940">be</span> <span m="2443180">happy.</span> <span m="2446180">Why</span> <span m="2446660">10?</span> <span m="2447050">We</span> <span m="2447200">want</span> <span m="2447350">to</span> <span m="2447440">do</span> <span m="2447560">it</span> <span m="2447650">with</span> <span m="2447740">the</span> <span m="2447830">larger</span> <span m="2448190">one,</span> <span m="2448430">because</span> <span m="2448760">then</span> <span m="2449030">this</span> <span m="2449330">edge</span> <span m="2449600">will</span> <span m="2449780">be</span> <span m="2449990">happy,</span> <span m="2451010">and</span> <span m="2451280">also</span> <span m="2451580">this</span> <span m="2451820">edge</span> <span m="2452000">will</span> <span m="2452090">be</span> <span m="2452240">happy.</span> <span m="2452660">If</span> <span m="2452870">I</span> <span m="2452960">swapped</span> <span m="2453800">5</span> <span m="2454130">up</span> <span m="2454250">there</span> <span m="2454400">instead,</span> <span m="2454830">the</span> <span m="2454940">5/10</span> <span m="2455450">edge</span> <span m="2455630">would</span> <span m="2455750">be</span> <span m="2455870">unhappy.</span> <span m="2456890">It</span> <span m="2457130">wouldn't</span> <span m="2457310">satisfy</span> <span m="2457700">the</span> <span m="2457850">max-heap</span> <span m="2458060">property.</span></p>
<p><span m="2458460">So</span> <span m="2458560">I</span> <span m="2458660">can</span> <span m="2458760">do</span> <span m="2458860">one</span> <span m="2458960">swap</span> <span m="2459350">and</span> <span m="2459440">fix</span> <span m="2460190">max-heap</span> <span m="2460640">property.</span> <span m="2461270">Except</span> <span m="2461870">that,</span> <span m="2462080">again,</span> <span m="2462380">0</span> <span m="2463310">may</span> <span m="2463610">be</span> <span m="2463820">unhappy</span> <span m="2464360">with</span> <span m="2464540">its</span> <span m="2464720">children.</span> <span m="2465680">0</span> <span m="2466040">was</span> <span m="2466160">this</span> <span m="2466340">one</span> <span m="2466640">item</span> <span m="2466970">that</span> <span m="2467120">was</span> <span m="2467270">in</span> <span m="2467390">the</span> <span m="2467480">wrong</span> <span m="2467810">spot.</span> <span m="2468380">And</span> <span m="2468560">so</span> <span m="2468710">it</span> <span m="2468830">made</span> <span m="2468930">it</span> <span m="2469040">have</span> <span m="2469160">to</span> <span m="2469280">go</span> <span m="2469430">farther</span> <span m="2469760">down.</span> <span m="2470210">But</span> <span m="2470420">5</span> <span m="2470690">will</span> <span m="2470840">be--</span> <span m="2471560">5</span> <span m="2471830">didn't</span> <span m="2472010">even</span> <span m="2472190">move.</span> <span m="2472790">So</span> <span m="2473060">it's</span> <span m="2473270">happy.</span> <span m="2473600">Everything</span> <span m="2474050">in</span> <span m="2474170">this</span> <span m="2474290">subtree</span> <span m="2474740">is</span> <span m="2474890">good.</span></p>
<p><span m="2476960">What</span> <span m="2477140">about</span> <span m="2477410">the</span> <span m="2477500">parent?</span> <span m="2478460">Well,</span> <span m="2478820">if</span> <span m="2479000">you</span> <span m="2479090">think</span> <span m="2479300">about</span> <span m="2479630">it,</span> <span m="2480110">because</span> <span m="2480560">everything</span> <span m="2480950">was</span> <span m="2481530">a</span> <span m="2481930">correct</span> <span m="2482230">heap</span> <span m="2482450">before</span> <span m="2482990">we</span> <span m="2483170">added</span> <span m="2483470">0,</span> <span m="2483890">or</span> <span m="2484010">before</span> <span m="2484280">we</span> <span m="2484400">put</span> <span m="2484550">0</span> <span m="2484880">too</span> <span m="2485090">high,</span> <span m="2485870">all</span> <span m="2486140">of</span> <span m="2486230">these</span> <span m="2486470">nodes</span> <span m="2486770">will</span> <span m="2486890">be</span> <span m="2487130">greater</span> <span m="2487670">than</span> <span m="2487850">or</span> <span m="2487940">equal</span> <span m="2488210">to</span> <span m="2488600">10</span> <span m="2491090">on</span> <span m="2491330">the</span> <span m="2491390">ancestor</span> <span m="2491900">path.</span> <span m="2493820">And</span> <span m="2494090">all</span> <span m="2494240">of</span> <span m="2494330">these</span> <span m="2494540">nodes</span> <span m="2494900">were</span> <span m="2495200">less</span> <span m="2495390">than</span> <span m="2495500">or</span> <span m="2495600">equal</span> <span m="2495710">to</span> <span m="2496130">10</span> <span m="2496550">before,</span> <span m="2497060">unless</span> <span m="2497330">you're</span> <span m="2497420">equal</span> <span m="2497570">to</span> <span m="2497660">5.</span> <span m="2498380">So</span> <span m="2498620">that's</span> <span m="2498800">still</span> <span m="2498980">true.</span> <span m="2501510">But</span> <span m="2501720">you</span> <span m="2501840">see,</span> <span m="2502020">this</span> <span m="2502290">tree</span> <span m="2502500">is</span> <span m="2502620">happy.</span> <span m="2503880">This</span> <span m="2504120">tree</span> <span m="2504360">still</span> <span m="2504570">may</span> <span m="2504690">be</span> <span m="2504810">unhappy.</span> <span m="2505200">0</span> <span m="2505490">still</span> <span m="2505890">might</span> <span m="2506070">need</span> <span m="2506220">to</span> <span m="2506280">push</span> <span m="2506520">down</span> <span m="2506730">farther.</span> <span m="2507450">That's</span> <span m="2507720">going</span> <span m="2507840">to</span> <span m="2507900">be</span> <span m="2508050">the</span> <span m="2508140">recursion.</span></p>
<p><span m="2510300">So</span> <span m="2510660">we</span> <span m="2510930">check</span> <span m="2516080">down</span> <span m="2516290">here.</span> <span m="2526470">There's</span> <span m="2526650">a</span> <span m="2526710">base</span> <span m="2526950">case,</span> <span m="2527380">which</span> <span m="2527520">is</span> <span m="2527730">if</span> <span m="2528060">i</span> <span m="2528270">is</span> <span m="2528420">a</span> <span m="2528480">leaf,</span> <span m="2528960">we're</span> <span m="2529080">done.</span> <span m="2529650">Because</span> <span m="2530220">there's</span> <span m="2530400">nothing</span> <span m="2530700">below</span> <span m="2531000">them.</span> <span m="2533900">So</span> <span m="2535300">we</span> <span m="2535450">satisfy</span> <span m="2535870">the</span> <span m="2535960">max-heap</span> <span m="2536380">property</span> <span m="2536740">at</span> <span m="2536830">i</span> <span m="2537100">because there's</span> <span m="2537400">no</span> <span m="2537520">children.</span> <span m="2538750">Otherwise,</span> <span m="2539920">let's</span> <span m="2540280">look</span> <span m="2540610">at</span> <span m="2541660">the</span> <span m="2541840">leaf</span> <span m="2542800">among</span> <span m="2543430">the</span> <span m="2543550">left--</span> <span m="2544400">sorry,</span> <span m="2544870">left</span> <span m="2545620">not</span> <span m="2545800">leaf--</span> <span m="2546700">among</span> <span m="2547300">the</span> <span m="2547420">two</span> <span m="2547630">children</span> <span m="2548260">left</span> <span m="2548560">and</span> <span m="2548650">right</span> <span m="2548860">of</span> <span m="2548980">i.</span> <span m="2549640">Right</span> <span m="2549910">if</span> <span m="2550000">i</span> <span m="2550120">might</span> <span m="2550300">not</span> <span m="2550450">exist.</span> <span m="2550960">Then</span> <span m="2551200">ignore</span> <span m="2551500">it.</span> <span m="2552000">But</span> <span m="2552550">among</span> <span m="2552880">the</span> <span m="2552970">two</span> <span m="2553180">children</span> <span m="2553750">that</span> <span m="2553960">exist,</span> <span m="2556000">find</span> <span m="2556330">the</span> <span m="2556420">one</span> <span m="2556780">that</span> <span m="2556960">has</span> <span m="2557170">maximum</span> <span m="2559450">key</span> <span m="2559750">value,</span> <span m="2561950">Q[j].key.</span> <span m="2566840">That</span> <span m="2567650">was</span> <span m="2567800">10</span> <span m="2568070">in</span> <span m="2568190">our</span> <span m="2568280">example.</span></p>
<p><span m="2569090">And</span> <span m="2569330">then,</span> <span m="2569510">if</span> <span m="2570230">these</span> <span m="2570440">items</span> <span m="2570830">are</span> <span m="2571160">out</span> <span m="2571430">of</span> <span m="2571550">order,</span> <span m="2572040">if</span> <span m="2572120">we</span> <span m="2572240">do</span> <span m="2572390">not</span> <span m="2572720">satisfy--</span> <span m="2574460">so</span> <span m="2574700">greater</span> <span m="2575000">than</span> <span m="2575120">would</span> <span m="2575240">be</span> <span m="2575360">satisfy.</span> <span m="2576710">Less</span> <span m="2577100">than</span> <span m="2577370">Q[j]</span> <span m="2578630">would</span> <span m="2578900">be</span> <span m="2579080">the</span> <span m="2579260">opposite</span> <span m="2579890">of</span> <span m="2580100">the</span> <span m="2580190">max-heap</span> <span m="2580550">property</span> <span m="2582140">here.</span> <span m="2583850">If</span> <span m="2584780">max-heap</span> <span m="2585140">property</span> <span m="2585500">is</span> <span m="2585620">violated,</span> <span m="2586560">then</span> <span m="2586730">we</span> <span m="2586850">fix</span> <span m="2587150">it</span> <span m="2587510">by</span> <span m="2587780">swapping</span> <span m="2590630">Q[i]</span> <span m="2592070">with</span> <span m="2592500">Q[j],</span> <span m="2595160">and</span> <span m="2595430">then</span> <span m="2595640">we</span> <span m="2595760">recurse</span> <span m="2596990">on</span> <span m="2597290">j--</span> <span m="2601700">call</span> <span m="2602000">max_heapify_down</span> <span m="2603350">of</span> <span m="2603590">j.</span> <span m="2604980">That's</span> <span m="2605310">it.</span> <span m="2605560">So</span> <span m="2605700">pretty</span> <span m="2606030">symmetric.</span></p>
<p><span m="2606930">Insert</span> <span m="2607290">was</span> <span m="2607410">a</span> <span m="2607470">little</span> <span m="2607620">bit</span> <span m="2607740">simpler,</span> <span m="2608040">because</span> <span m="2608220">we</span> <span m="2608310">only</span> <span m="2608460">have</span> <span m="2608580">one</span> <span m="2608790">parent.</span> <span m="2609780">Delete_min,</span> <span m="2610590">because</span> <span m="2610830">we're</span> <span m="2610920">pushing</span> <span m="2611250">down,</span> <span m="2611610">we</span> <span m="2611760">have</span> <span m="2611940">two</span> <span m="2612150">children.</span> <span m="2612760">We</span> <span m="2612860">have</span> <span m="2612870">to</span> <span m="2613170">pick</span> <span m="2613470">one.</span> <span m="2614140">But</span> <span m="2614430">there's</span> <span m="2614610">a</span> <span m="2614670">clear</span> <span m="2614880">choice--</span> <span m="2615330">the</span> <span m="2615450">bigger</span> <span m="2615660">one.</span> <span m="2616470">And</span> <span m="2616770">again,</span> <span m="2617160">this</span> <span m="2617520">algorithm--</span> <span m="2618030">this</span> <span m="2618150">whole</span> <span m="2618330">thing--</span> <span m="2618930">will</span> <span m="2619140">take</span> <span m="2619410">order</span> <span m="2619710">h</span> <span m="2619980">time,</span> <span m="2620220">the</span> <span m="2620310">height</span> <span m="2620460">of</span> <span m="2620520">the</span> <span m="2620610">tree,</span> <span m="2620980">which</span> <span m="2621090">is</span> <span m="2621240">log</span> <span m="2621480">n,</span> <span m="2622380">because</span> <span m="2622755">our</span> <span m="2623130">node</span> <span m="2623340">just</span> <span m="2623760">sort</span> <span m="2623940">of</span> <span m="2624000">bubbles</span> <span m="2624360">down.</span> <span m="2624570">At</span> <span m="2624660">some</span> <span m="2624840">point,</span> <span m="2625120">it</span> <span m="2625220">stops.</span> <span m="2625410">When</span> <span m="2625560">it</span> <span m="2625620">stops,</span> <span m="2625980">we</span> <span m="2626100">know</span> <span m="2626610">the</span> <span m="2626760">max-heap</span> <span m="2627060">property</span> <span m="2627480">was</span> <span m="2627600">satisfied</span> <span m="2628050">there.</span> <span m="2629050">And</span> <span m="2629250">if</span> <span m="2629370">you</span> <span m="2629430">check</span> <span m="2629730">along</span> <span m="2630060">the</span> <span m="2630150">way,</span> <span m="2630720">by</span> <span m="2630930">induction,</span> <span m="2631470">all</span> <span m="2631710">the</span> <span m="2631830">other</span> <span m="2632100">max-heap</span> <span m="2632460">properties</span> <span m="2633000">will</span> <span m="2633090">be</span> <span m="2633180">satisfied,</span> <span m="2634200">because</span> <span m="2634440">they</span> <span m="2634560">were</span> <span m="2634680">before.</span></p>
<p><span m="2637400">So</span> <span m="2638060">almost</span> <span m="2638540">forced</span> <span m="2638910">what</span> <span m="2639110">we</span> <span m="2639260">could</span> <span m="2639380">do</span> <span m="2639590">here.</span> <span m="2639800">The</span> <span m="2639920">amazing</span> <span m="2640280">thing</span> <span m="2640490">is</span> <span m="2640610">that</span> <span m="2640700">you</span> <span m="2640910">can</span> <span m="2641090">actually</span> <span m="2641420">maintain</span> <span m="2641780">a</span> <span m="2641870">complete</span> <span m="2642470">binary</span> <span m="2642860">tree</span> <span m="2643400">that</span> <span m="2643640">satisfies</span> <span m="2644240">the</span> <span m="2644330">max-heap</span> <span m="2644660">property.</span> <span m="2645800">But</span> <span m="2645950">once</span> <span m="2646190">you're</span> <span m="2646430">told</span> <span m="2646820">that,</span> <span m="2647120">the</span> <span m="2647300">algorithm</span> <span m="2647810">kind</span> <span m="2648020">of</span> <span m="2648080">falls</span> <span m="2648380">out.</span> <span m="2648560">Because</span> <span m="2649340">we</span> <span m="2649490">have</span> <span m="2649580">an</span> <span m="2649670">array.</span> <span m="2650210">The</span> <span m="2650360">only</span> <span m="2650540">thing</span> <span m="2650690">we</span> <span m="2650780">can</span> <span m="2650900">do</span> <span m="2650990">is</span> <span m="2651080">insert</span> <span m="2651350">and</span> <span m="2651470">delete</span> <span m="2651680">the</span> <span m="2651770">last</span> <span m="2652070">item.</span> <span m="2652610">And</span> <span m="2652820">so</span> <span m="2653000">we've</span> <span m="2653120">got</span> <span m="2653240">to</span> <span m="2653300">swap</span> <span m="2653570">things</span> <span m="2653810">to</span> <span m="2653930">there</span> <span m="2654200">in</span> <span m="2654290">order--</span> <span m="2654710">or</span> <span m="2654860">out</span> <span m="2655040">of</span> <span m="2655160">there</span> <span m="2655580">in</span> <span m="2655760">order</span> <span m="2655910">to</span> <span m="2656060">make</span> <span m="2656240">that</span> <span m="2656420">work.</span> <span m="2658170">And</span> <span m="2658340">then,</span> <span m="2658610">the</span> <span m="2658700">rest</span> <span m="2658970">is</span> <span m="2659060">just</span> <span m="2659780">checking</span> <span m="2660170">locally</span> <span m="2660500">that</span> <span m="2660650">you</span> <span m="2660770">can</span> <span m="2660920">fix</span> <span m="2661820">the</span> <span m="2661880">property.</span> <span m="2664930">Cool.</span></p>
<p><span m="2667000">So</span> <span m="2669160">that's</span> <span m="2669410">almost</span> <span m="2669950">it,</span> <span m="2670340">not</span> <span m="2670550">quite</span> <span m="2671150">what</span> <span m="2671360">we</span> <span m="2671480">wanted.</span> <span m="2672300">So</span> <span m="2672410">we</span> <span m="2672530">now</span> <span m="2672800">have</span> <span m="2673640">log</span> <span m="2674015">n</span> <span m="2674390">amortize</span> <span m="2675020">insert</span> <span m="2675350">and</span> <span m="2675440">delete_max</span> <span m="2676370">in</span> <span m="2676715">our</span> <span m="2677600">heap.</span> <span m="2679330">We</span> <span m="2679550">did</span> <span m="2679700">not</span> <span m="2679910">yet</span> <span m="2680120">cover</span> <span m="2680420">linear</span> <span m="2680750">build.</span> <span m="2681260">Right</span> <span m="2681500">now,</span> <span m="2681920">it's</span> <span m="2682130">n log n</span> <span m="2682520">if</span> <span m="2682640">you</span> <span m="2682790">insert</span> <span m="2684080">n</span> <span m="2684350">times.</span> <span m="2685070">And</span> <span m="2685340">we</span> <span m="2685430">did</span> <span m="2685580">not</span> <span m="2685790">yet</span> <span m="2685940">cover</span> <span m="2686300">how</span> <span m="2686450">to</span> <span m="2686570">make</span> <span m="2686750">this</span> <span m="2686900">an</span> <span m="2687020">in-place</span> <span m="2687500">sorting</span> <span m="2687830">algorithm.</span> <span m="2689030">So</span> <span m="2690560">let</span> <span m="2690770">me</span> <span m="2690890">sketch</span> <span m="2691400">each</span> <span m="2691640">of</span> <span m="2691730">those.</span> <span m="2692660">I</span> <span m="2693110">think</span> <span m="2693320">first</span> <span m="2693740">is</span> <span m="2693980">in-place.</span> <span m="2696490">So</span> <span m="2699550">how</span> <span m="2699820">do</span> <span m="2699940">we</span> <span m="2700060">make</span> <span m="2700240">this</span> <span m="2700420">algorithm</span> <span m="2700840">in-place?</span> <span m="2701530">I</span> <span m="2701650">guess</span> <span m="2701860">I</span> <span m="2701980">want</span> <span m="2702280">that,</span> <span m="2703090">but</span> <span m="2703300">I</span> <span m="2703420">don't</span> <span m="2703660">need</span> <span m="2703960">this.</span></p>
<p><span m="2706720">So</span> <span m="2706830">we</span> <span m="2706950">want</span> <span m="2707130">to</span> <span m="2707190">follow</span> <span m="2708090">priority</span> <span m="2708540">queue</span> <span m="2708750">sort.</span> <span m="2709820">Maybe</span> <span m="2710030">I</span> <span m="2710160">do</span> <span m="2710250">want</span> <span m="2710490">that.</span> <span m="2716570">But</span> <span m="2716900">I</span> <span m="2717080">don't</span> <span m="2717530">want</span> <span m="2717830">to</span> <span m="2717890">have</span> <span m="2718100">to</span> <span m="2720440">grow</span> <span m="2721040">and</span> <span m="2721160">shrink</span> <span m="2721460">my</span> <span m="2721640">array.</span> <span m="2722060">I</span> <span m="2722270">would</span> <span m="2722390">just</span> <span m="2722570">like</span> <span m="2722750">to</span> <span m="2722870">start</span> <span m="2723230">with</span> <span m="2723560">the</span> <span m="2723740">array</span> <span m="2723950">itself.</span> <span m="2736500">So</span> <span m="2736700">this</span> <span m="2736910">is</span> <span m="2737150">in</span> <span m="2737360">place.</span> <span m="2742140">So</span> <span m="2742280">what</span> <span m="2742400">we're</span> <span m="2742520">going</span> <span m="2742640">to</span> <span m="2742700">do</span> <span m="2742910">is</span> <span m="2742970">say,</span> <span m="2743340">OK,</span> <span m="2743580">here's</span> <span m="2743810">my</span> <span m="2744020">array</span> <span m="2745520">that</span> <span m="2745730">I</span> <span m="2745820">want</span> <span m="2746000">to</span> <span m="2746060">sort.</span> <span m="2747590">That's</span> <span m="2747800">given</span> <span m="2748040">to</span> <span m="2748130">me.</span> <span m="2748340">That's</span> <span m="2748550">the</span> <span m="2748670">input</span> <span m="2749420">to</span> <span m="2749600">priority</span> <span m="2749840">queue</span> <span m="2749930">sort.</span> <span m="2753650">And</span> <span m="2753980">what</span> <span m="2754130">I'd</span> <span m="2754220">like</span> <span m="2754490">is</span> <span m="2754640">to</span> <span m="2754760">build</span> <span m="2755120">a</span> <span m="2755180">priority</span> <span m="2755510">queue</span> <span m="2755870">out</span> <span m="2756080">of</span> <span m="2756200">it.</span> <span m="2756320">Initially,</span> <span m="2757130">it's</span> <span m="2757400">empty.</span> <span m="2757820">And</span> <span m="2758000">then</span> <span m="2758150">I</span> <span m="2758210">want</span> <span m="2758360">to</span> <span m="2758450">insert</span> <span m="2758840">the</span> <span m="2758960">items</span> <span m="2759800">one</span> <span m="2760100">at</span> <span m="2760220">a</span> <span m="2760250">time,</span> <span m="2760740">let's</span> <span m="2760880">say.</span></p>
<p><span m="2762600">So</span> <span m="2763890">in</span> <span m="2764100">general,</span> <span m="2764530">what</span> <span m="2764580">I'm</span> <span m="2764670">going</span> <span m="2764790">to</span> <span m="2764850">do</span> <span m="2765000">is</span> <span m="2765120">maintain</span> <span m="2765630">that</span> <span m="2765780">Q</span> <span m="2766710">is</span> <span m="2766950">some</span> <span m="2767220">prefix</span> <span m="2767760">of</span> <span m="2767880">A.</span> <span m="2769330">That's</span> <span m="2769630">going</span> <span m="2769750">to</span> <span m="2769810">be</span> <span m="2769930">my</span> <span m="2770080">priority queue.</span> <span m="2770560">It's</span> <span m="2770680">going</span> <span m="2770800">to</span> <span m="2771370">live</span> <span m="2771790">in</span> <span m="2771970">this</span> <span m="2772300">sub</span> <span m="2772615">array--</span> <span m="2772930">this</span> <span m="2773110">prefix.</span> <span m="2775110">So</span> <span m="2775440">how</span> <span m="2775620">do</span> <span m="2775770">I</span> <span m="2775890">insert</span> <span m="2776250">a</span> <span m="2776280">new</span> <span m="2776460">item?</span> <span m="2777240">Well,</span> <span m="2777480">I</span> <span m="2777570">just</span> <span m="2778770">increment.</span> <span m="2780510">So</span> <span m="2780840">to</span> <span m="2781020">do</span> <span m="2781200">an</span> <span m="2781290">insert,</span> <span m="2782490">the</span> <span m="2782640">first</span> <span m="2782910">step</span> <span m="2783810">is</span> <span m="2784200">increment</span> <span m="2784800">size</span> <span m="2785130">of</span> <span m="2785220">Q.</span> <span m="2789090">Then</span> <span m="2789330">I</span> <span m="2789420">will</span> <span m="2789600">have</span> <span m="2789750">taken</span> <span m="2790170">the</span> <span m="2790260">next</span> <span m="2790530">item</span> <span m="2790710">from</span> <span m="2790890">A and</span> <span m="2791160">injected</span> <span m="2791700">into</span> <span m="2791970">this</span> <span m="2792120">Q.</span></p>
<p><span m="2792540">And</span> <span m="2792960">conveniently,</span> <span m="2793380">if</span> <span m="2793650">we</span> <span m="2793770">look</span> <span m="2793950">at</span> <span m="2794070">our</span> <span m="2794250">insert</span> <span m="2794640">code,</span> <span m="2795330">which</span> <span m="2795720">is</span> <span m="2795990">here,</span> <span m="2797430">the</span> <span m="2797610">first</span> <span m="2797820">thing</span> <span m="2798000">we</span> <span m="2798090">wanted</span> <span m="2798330">to</span> <span m="2798450">do</span> <span m="2798720">was</span> <span m="2798900">add</span> <span m="2799080">an</span> <span m="2799200">item</span> <span m="2799470">at</span> <span m="2799590">the</span> <span m="2799680">end</span> <span m="2799950">of</span> <span m="2800010">the</span> <span m="2800130">array.</span> <span m="2800600">So</span> <span m="2800670">we</span> <span m="2800760">just</span> <span m="2800940">did</span> <span m="2801150">it</span> <span m="2801900">without</span> <span m="2802560">any</span> <span m="2803010">actual</span> <span m="2803490">work,</span> <span m="2803760">just</span> <span m="2803940">conceptual</span> <span m="2804510">work.</span> <span m="2804750">We</span> <span m="2804840">just</span> <span m="2804990">said,</span> <span m="2805140">oh,</span> <span m="2805270">our Q is</span> <span m="2805650">one</span> <span m="2805830">bigger.</span> <span m="2806280">Boom!</span> <span m="2806640">Now</span> <span m="2806820">this</span> <span m="2806970">is</span> <span m="2807090">at</span> <span m="2807210">the</span> <span m="2807300">end</span> <span m="2807420">of</span> <span m="2807510">the</span> <span m="2807600">array.</span> <span m="2809430">no</span> <span m="2809700">more</span> <span m="2809910">amortization,</span> <span m="2811020">in</span> <span m="2811090">fact,</span> <span m="2811990">because</span> <span m="2812070">we're</span> <span m="2812190">not</span> <span m="2812490">ever</span> <span m="2812780">resizing</span> <span m="2813270">our</span> <span m="2813420">array,</span> <span m="2813600">we're</span> <span m="2813690">just</span> <span m="2813840">saying,</span> <span m="2814020">oh,</span> <span m="2814230">now</span> <span m="2814440">Q</span> <span m="2815070">is</span> <span m="2815310">a</span> <span m="2815400">little</span> <span m="2815610">bit</span> <span m="2815730">bigger</span> <span m="2816000">of</span> <span m="2816120">a</span> <span m="2816180">prefix.</span> <span m="2817050">It</span> <span m="2817320">just</span> <span m="2817590">absorb</span> <span m="2818070">the</span> <span m="2818160">next</span> <span m="2818400">item</span> <span m="2818670">of</span> <span m="2818790">A.</span></p>
<p><span m="2819450">Similarly,</span> <span m="2821430">delete_max</span> <span m="2825150">is</span> <span m="2825480">going</span> <span m="2825750">to,</span> <span m="2826330">at</span> <span m="2826410">the</span> <span m="2826530">end,</span> <span m="2827460">decrement</span> <span m="2828090">the</span> <span m="2828180">size</span> <span m="2828450">of</span> <span m="2828540">Q.</span> <span m="2830940">Why</span> <span m="2831210">is</span> <span m="2831330">that</span> <span m="2831480">OK?</span> <span m="2832260">Because</span> <span m="2832860">at</span> <span m="2833070">the</span> <span m="2833190">end</span> <span m="2834120">of</span> <span m="2834450">our</span> <span m="2834750">delete_max</span> <span m="2835410">operation--</span> <span m="2836520">not</span> <span m="2836730">quite</span> <span m="2836910">at</span> <span m="2837000">the</span> <span m="2837090">end,</span> <span m="2837330">but</span> <span m="2837510">almost</span> <span m="2837810">the</span> <span m="2837900">end--</span> <span m="2839520">we</span> <span m="2839670">deleted</span> <span m="2840240">the</span> <span m="2840330">last</span> <span m="2840660">item</span> <span m="2840930">from</span> <span m="2841110">our</span> <span m="2841270">array.</span> <span m="2842160">So</span> <span m="2842400">we</span> <span m="2842490">just</span> <span m="2842640">replaced</span> <span m="2843030">that</span> <span m="2843180">delete</span> <span m="2843450">last</span> <span m="2843900">with</span> <span m="2844170">a</span> <span m="2844260">decrement,</span> <span m="2845310">and</span> <span m="2845550">that's</span> <span m="2845790">going</span> <span m="2845910">to</span> <span m="2846000">shrink</span> <span m="2846450">the</span> <span m="2846540">Q</span> <span m="2846805">by</span> <span m="2847290">1.</span> <span m="2848290">It</span> <span m="2848370">has</span> <span m="2848540">the</span> <span m="2848580">exact</span> <span m="2848970">same</span> <span m="2849180">impact</span> <span m="2849960">as</span> <span m="2850200">leading</span> <span m="2850740">the</span> <span m="2850920">last</span> <span m="2851160">item.</span> <span m="2851430">But</span> <span m="2851550">now,</span> <span m="2851730">it's</span> <span m="2851850">constant</span> <span m="2852195">time,</span> <span m="2852540">worst</span> <span m="2852810">case</span> <span m="2853050">not</span> <span m="2853260">amortized.</span></p>
<p><span m="2854520">And</span> <span m="2855000">the</span> <span m="2855150">result</span> <span m="2855540">is</span> <span m="2856110">we</span> <span m="2856290">never</span> <span m="2856530">actually</span> <span m="2856800">build</span> <span m="2857070">a</span> <span m="2857100">dynamic</span> <span m="2857550">array.</span> <span m="2857790">We</span> <span m="2857910">just</span> <span m="2858120">use</span> <span m="2858420">a</span> <span m="2858480">portion</span> <span m="2858900">of</span> <span m="2859040">A</span> <span m="2859210">to</span> <span m="2859350">do</span> <span m="2859560">it.</span> <span m="2860140">So</span> <span m="2860250">what's</span> <span m="2860400">going</span> <span m="2860520">to</span> <span m="2860580">happen</span> <span m="2860880">is</span> <span m="2861660">we're</span> <span m="2861750">going</span> <span m="2861870">to</span> <span m="2861930">absorb</span> <span m="2862320">all</span> <span m="2862530">the</span> <span m="2862650">items</span> <span m="2862950">into</span> <span m="2863130">the</span> <span m="2863220">priority</span> <span m="2863550">queue,</span> <span m="2863895">and</span> <span m="2864240">then</span> <span m="2864390">start</span> <span m="2864600">kicking</span> <span m="2864960">them</span> <span m="2865080">out.</span> <span m="2865620">As</span> <span m="2865980">we</span> <span m="2866100">kick</span> <span m="2866340">them</span> <span m="2866520">out,</span> <span m="2867120">we</span> <span m="2867360">kick</span> <span m="2867630">out</span> <span m="2867810">the</span> <span m="2868080">largest</span> <span m="2868830">key</span> <span m="2869160">item</span> <span m="2869460">first,</span> <span m="2869790">and</span> <span m="2869940">we</span> <span m="2870030">put</span> <span m="2870210">it</span> <span m="2870330">here,</span> <span m="2870990">then</span> <span m="2871230">the</span> <span m="2871320">next</span> <span m="2871560">largest,</span> <span m="2871950">then</span> <span m="2872100">the</span> <span m="2872160">next</span> <span m="2872430">largest,</span> <span m="2872860">and</span> <span m="2872960">so</span> <span m="2873060">on.</span> <span m="2873420">The</span> <span m="2873540">minimum</span> <span m="2873900">item</span> <span m="2874110">is</span> <span m="2874170">going</span> <span m="2874290">to</span> <span m="2874350">be</span> <span m="2874470">here.</span> <span m="2875010">And,</span> <span m="2875250">boom,</span> <span m="2875520">it's</span> <span m="2875640">sorted.</span></p>
<p><span m="2876150">This</span> <span m="2876360">is</span> <span m="2876480">the</span> <span m="2876570">whole</span> <span m="2876810">reason</span> <span m="2877170">I</span> <span m="2877260">did</span> <span m="2877470">max-heaps</span> <span m="2878280">instead</span> <span m="2878640">of</span> <span m="2878700">min-heaps,</span> <span m="2880080">is</span> <span m="2880290">that</span> <span m="2880470">in</span> <span m="2880620">the</span> <span m="2880770">end,</span> <span m="2881560">this</span> <span m="2881790">will</span> <span m="2882030">be</span> <span m="2882380">a</span> <span m="2882990">upward</span> <span m="2883500">sorted</span> <span m="2883830">array</span> <span m="2884100">with</span> <span m="2884220">the</span> <span m="2884310">max</span> <span m="2884670">at</span> <span m="2884760">the</span> <span m="2884880">end.</span> <span m="2885300">Because</span> <span m="2885570">we</span> <span m="2885660">always</span> <span m="2885870">kick</span> <span m="2886080">out</span> <span m="2886260">items</span> <span m="2886590">at</span> <span m="2886680">the</span> <span m="2886770">end.</span> <span m="2887400">We</span> <span m="2887550">delete</span> <span m="2887790">the</span> <span m="2887850">max</span> <span m="2888480">first.</span> <span m="2890200">So</span> <span m="2890380">that</span> <span m="2890680">is</span> <span m="2891280">what's</span> <span m="2891550">normally</span> <span m="2891910">called</span> <span m="2892450">heapsort.</span> <span m="2895180">You</span> <span m="2895390">can</span> <span m="2895540">apply</span> <span m="2895840">this</span> <span m="2896020">same</span> <span m="2896260">trick</span> <span m="2897100">to</span> <span m="2897490">insertion</span> <span m="2897980">sort</span> <span m="2898270">and</span> <span m="2898390">selection</span> <span m="2898750">sort,</span> <span m="2898990">and</span> <span m="2899110">you</span> <span m="2899200">actually</span> <span m="2899470">get</span> <span m="2900100">the</span> <span m="2900250">insertion</span> <span m="2900640">sort</span> <span m="2900850">and</span> <span m="2900910">selection</span> <span m="2901360">sort</span> <span m="2901660">algorithms</span> <span m="2902050">that</span> <span m="2902170">we've</span> <span m="2902350">seen</span> <span m="2902980">which</span> <span m="2903310">operate</span> <span m="2903820">in</span> <span m="2903940">prefixes</span> <span m="2904930">of</span> <span m="2905170">the</span> <span m="2905290">array.</span></p>
<p><span m="2906920">Cool,</span> <span m="2908050">so</span> <span m="2908200">now</span> <span m="2908440">we</span> <span m="2908560">have--</span> <span m="2909280">we've</span> <span m="2909520">achieved</span> <span m="2909880">the</span> <span m="2910030">y</span> <span m="2910480">up</span> <span m="2910690">there,</span> <span m="2911060">which</span> <span m="2911110">is</span> <span m="2911230">n</span> <span m="2911550">log n</span> <span m="2912070">sorting</span> <span m="2912460">algorithm</span> <span m="2913210">that</span> <span m="2913420">is</span> <span m="2913570">in-place.</span> <span m="2914390">So</span> <span m="2914530">that</span> <span m="2914680">was</span> <span m="2914830">our</span> <span m="2914920">main</span> <span m="2915160">goal--</span> <span m="2915640">heapsort.</span> <span m="2917160">Let</span> <span m="2917320">me</span> <span m="2917770">very</span> <span m="2918010">quickly</span> <span m="2918400">mention</span> <span m="2921520">you</span> <span m="2921820">can</span> <span m="2923050">build</span> <span m="2923470">a</span> <span m="2923530">heap</span> <span m="2923830">in</span> <span m="2923950">linear</span> <span m="2924250">time</span> <span m="2926150">with</span> <span m="2926420">a</span> <span m="2926480">clever</span> <span m="2926840">trick.</span> <span m="2927930">So</span> <span m="2928130">if</span> <span m="2928370">you</span> <span m="2928700">insert</span> <span m="2929150">the</span> <span m="2929270">items</span> <span m="2929570">one</span> <span m="2929720">at</span> <span m="2929810">a</span> <span m="2929870">time,</span> <span m="2930140">that</span> <span m="2930290">would</span> <span m="2930380">correspond</span> <span m="2930890">to</span> <span m="2931370">inserting</span> <span m="2932390">down</span> <span m="2932780">the</span> <span m="2932900">array.</span> <span m="2933230">And</span> <span m="2933350">every</span> <span m="2933560">time</span> <span m="2933800">I</span> <span m="2933860">insert</span> <span m="2934190">an</span> <span m="2934280">item,</span> <span m="2934580">I</span> <span m="2934640">have</span> <span m="2934790">to</span> <span m="2934910">walk</span> <span m="2935210">up</span> <span m="2935840">the</span> <span m="2935990">tree.</span> <span m="2937040">So</span> <span m="2937310">this</span> <span m="2937490">would</span> <span m="2937610">be</span> <span m="2938240">the</span> <span m="2938450">sum</span> <span m="2939440">of</span> <span m="2939890">the</span> <span m="2940340">depth</span> <span m="2941330">of</span> <span m="2941600">each</span> <span m="2941840">node.</span></p>
<p><span m="2944170">If</span> <span m="2944410">you</span> <span m="2944500">do</span> <span m="2944680">that,</span> <span m="2945070">you</span> <span m="2945280">get</span> <span m="2945490">n</span> <span m="2945640">log</span> <span m="2945850">n.</span> <span m="2948520">This</span> <span m="2948790">is</span> <span m="2949090">the</span> <span m="2949240">sum</span> <span m="2949810">over</span> <span m="2950230">i</span> <span m="2950770">of</span> <span m="2951040">log</span> <span m="2951295">i.</span> <span m="2952150">That</span> <span m="2952390">turns</span> <span m="2952630">out</span> <span m="2952780">to</span> <span m="2952900">be</span> <span m="2953500">n</span> <span m="2953740">log</span> <span m="2953920">n.</span> <span m="2954610">It's</span> <span m="2955300">a</span> <span m="2955330">log</span> <span m="2955660">of</span> <span m="2955750">n</span> <span m="2955870">factorial.</span> <span m="2957310">The</span> <span m="2957490">cool</span> <span m="2957700">trick</span> <span m="2958330">is</span> <span m="2958600">to,</span> <span m="2958660">instead,</span> <span m="2959680">imagine</span> <span m="2960220">adding</span> <span m="2960520">all</span> <span m="2960760">the</span> <span m="2960850">items</span> <span m="2961120">at</span> <span m="2961210">once</span> <span m="2961480">and</span> <span m="2961570">not</span> <span m="2961810">heapifying</span> <span m="2962350">anything,</span> <span m="2963070">and</span> <span m="2963310">then</span> <span m="2963460">heapify</span> <span m="2964090">up--</span> <span m="2964540">sorry,</span> <span m="2964805">heapify</span> <span m="2965410"><i>down</i></span> <span m="2966280">from</span> <span m="2966550">the</span> <span m="2966640">bottom</span> <span m="2967330">up.</span> <span m="2968420">So</span> <span m="2968500">here</span> <span m="2968650">we're</span> <span m="2968830">heapifying</span> <span m="2969400">up.</span> <span m="2971530">Now,</span> <span m="2971830">we're</span> <span m="2971950">going</span> <span m="2972070">to</span> <span m="2972130">heapify</span> <span m="2972670">down.</span></p>
<p><span m="2975190">And</span> <span m="2975400">surprisingly,</span> <span m="2976030">that's</span> <span m="2976240">better.</span> <span m="2977080">Because</span> <span m="2977590">this</span> <span m="2977860">is</span> <span m="2978100">the</span> <span m="2978220">sum</span> <span m="2978580">of</span> <span m="2978700">the</span> <span m="2978790">heights</span> <span m="2979240">of</span> <span m="2979360">the</span> <span m="2979450">nodes.</span> <span m="2982150">And</span> <span m="2982420">that</span> <span m="2982600">turns</span> <span m="2982870">out</span> <span m="2982960">to</span> <span m="2983050">be</span> <span m="2983200">linear.</span> <span m="2983810">It's</span> <span m="2984010">not</span> <span m="2984190">obvious.</span> <span m="2985090">But</span> <span m="2985360">intuitively,</span> <span m="2986440">for</span> <span m="2986710">a</span> <span m="2986740">depth,</span> <span m="2987250">this</span> <span m="2987550">is</span> <span m="2987610">0,</span> <span m="2988270">this</span> <span m="2988510">is</span> <span m="2988630">log</span> <span m="2988900">n,</span> <span m="2989740">and</span> <span m="2990040">we've</span> <span m="2990160">got</span> <span m="2990280">a</span> <span m="2990340">whole</span> <span m="2990670">ton</span> <span m="2990940">of</span> <span m="2991060">leaves.</span> <span m="2991450">So</span> <span m="2991480">right</span> <span m="2991690">at</span> <span m="2991780">the</span> <span m="2991870">leaf</span> <span m="2992110">level,</span> <span m="2992380">you</span> <span m="2992500">can</span> <span m="2992620">see,</span> <span m="2992800">we're</span> <span m="2992890">paying</span> <span m="2993130">n</span> <span m="2993280">log</span> <span m="2993460">n,</span> <span m="2994390">right?</span> <span m="2994720">Because</span> <span m="2995590">there</span> <span m="2995740">are</span> <span m="2995810">n</span> <span m="2995950">of</span> <span m="2996070">them,</span> <span m="2996380">and</span> <span m="2996480">each</span> <span m="2996520">one</span> <span m="2996670">costs</span> <span m="2996880">log</span> <span m="2997090">n.</span></p>
<p><span m="2997540">Down</span> <span m="2997810">here,</span> <span m="2998200">at</span> <span m="2998350">the</span> <span m="2998440">leaf</span> <span m="2998680">level,</span> <span m="2998950">we're</span> <span m="2999070">paying</span> <span m="2999310">constant.</span> <span m="2999850">Because</span> <span m="3001560">the</span> <span m="3001740">height</span> <span m="3001980">of</span> <span m="3002100">the</span> <span m="3002190">leaves</span> <span m="3002490">are</span> <span m="3002640">1.</span> <span m="3003480">Here,</span> <span m="3003780">the</span> <span m="3003900">height</span> <span m="3004110">of</span> <span m="3004320">the</span> <span m="3004440">root</span> <span m="3004710">is</span> <span m="3004860">log</span> <span m="3005130">n.</span> <span m="3005250">And</span> <span m="3005340">this</span> <span m="3006030">is</span> <span m="3006150">better.</span> <span m="3006480">Now</span> <span m="3006690">we're</span> <span m="3006810">paying</span> <span m="3008100">a</span> <span m="3008280">small</span> <span m="3008580">amount</span> <span m="3008940">for</span> <span m="3009120">the</span> <span m="3009210">thing</span> <span m="3009530">of</span> <span m="3009660">which</span> <span m="3009840">there</span> <span m="3009990">are</span> <span m="3010050">many.</span> <span m="3011040">It's</span> <span m="3011160">not</span> <span m="3011340">quite</span> <span m="3011700">a</span> <span m="3011760">geometric</span> <span m="3012210">series,</span> <span m="3012730">but</span> <span m="3012840">it</span> <span m="3012930">turns</span> <span m="3013200">out</span> <span m="3013590">this</span> <span m="3013950">is</span> <span m="3014220">linear.</span> <span m="3015090">So</span> <span m="3015300">that's</span> <span m="3015510">how</span> <span m="3015630">you</span> <span m="3015750">can</span> <span m="3015870">do</span> <span m="3016320">linear</span> <span m="3016770">building</span> <span m="3017110">heap.</span></p>
<p><span m="3017790">To</span> <span m="3017940">come</span> <span m="3018150">back</span> <span m="3018360">to</span> <span m="3018750">your</span> <span m="3018990">question</span> <span m="3019530">about</span> <span m="3020430">sequence</span> <span m="3022050">AVL</span> <span m="3022530">trees,</span> <span m="3023450">turns</span> <span m="3023730">out</span> <span m="3023910">you</span> <span m="3024060">can</span> <span m="3024210">get</span> <span m="3024420">all</span> <span m="3024780">of</span> <span m="3024870">the</span> <span m="3024960">same</span> <span m="3025230">bounds</span> <span m="3025500">as</span> <span m="3025620">heaps,</span> <span m="3026220">except</span> <span m="3026610">for</span> <span m="3026730">the</span> <span m="3026820">in-place</span> <span m="3027210">part,</span> <span m="3027750">by</span> <span m="3027960">taking</span> <span m="3028230">a</span> <span m="3028290">sequence</span> <span m="3028710">AVL</span> <span m="3028860">tree,</span> <span m="3029340">storing</span> <span m="3030330">the</span> <span m="3030510">items</span> <span m="3030960">in</span> <span m="3031110">an</span> <span m="3031230">arbitrary</span> <span m="3031890">order,</span> <span m="3032370">and</span> <span m="3032610">augmenting</span> <span m="3033150">by</span> <span m="3033495">max,</span> <span m="3034110">which</span> <span m="3034350">is</span> <span m="3034470">a</span> <span m="3034530">crazy</span> <span m="3034890">idea.</span> <span m="3036210">But</span> <span m="3036450">it</span> <span m="3036600">also</span> <span m="3036960">gives</span> <span m="3037170">you</span> <span m="3037270">a</span> <span m="3037290">linear</span> <span m="3037590">build</span> <span m="3037800">time.</span> <span m="3038490">And</span> <span m="3039210">yeah,</span> <span m="3039420">there's</span> <span m="3039630">other</span> <span m="3039840">fun</span> <span m="3039990">stuff</span> <span m="3040260">in</span> <span m="3040350">your</span> <span m="3040470">notes.</span> <span m="3040710">But</span> <span m="3040860">I'll</span> <span m="3041070">stop</span> <span m="3041430">there.</span></p>
<p> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.006S20/MIT6_006S20_03_03_Lecture_8_300k.mp4">MP4 - 112MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/lecture-videos/lecture-8-binary-heaps/Xnpo1atN-Iw.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","00");googletag.pubads().set("CRS_END","6");googletag.pubads().set("SESSION","S");googletag.pubads().set("YEAR","20");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
